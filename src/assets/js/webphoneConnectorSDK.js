(function(le,he){he(le.WebphoneConnectorSdkExports={})})(this,function(le){"use strict";var kh=Object.defineProperty;var qi=le=>{throw TypeError(le)};var Dh=(le,he,_e)=>he in le?kh(le,he,{enumerable:!0,configurable:!0,writable:!0,value:_e}):le[he]=_e;var ve=(le,he,_e)=>Dh(le,typeof he!="symbol"?he+"":he,_e),Gi=(le,he,_e)=>he.has(le)||qi("Cannot "+_e);var Br=(le,he,_e)=>(Gi(le,he,"read from private field"),_e?_e.call(le):he.get(le)),Jr=(le,he,_e)=>he.has(le)?qi("Cannot add the same private member more than once"):he instanceof WeakSet?he.add(le):he.set(le,_e),Yr=(le,he,_e,jt)=>(Gi(le,he,"write to private field"),jt?jt.call(le,_e):he.set(le,_e),_e);var Ft,xr,lr;var he=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jt={exports:{}},se={},Bt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(R){if(super(),!e.IDENTIFIER.test(R))throw new Error("CodeGen: name must be a valid identifier");this.str=R}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(R){super(),this._items=typeof R=="string"?[R]:R}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const R=this._items[0];return R===""||R==='""'}get str(){var R;return(R=this._str)!==null&&R!==void 0?R:this._str=this._items.reduce((L,G)=>`${L}${G}`,"")}get names(){var R;return(R=this._names)!==null&&R!==void 0?R:this._names=this._items.reduce((L,G)=>(G instanceof r&&(L[G.str]=(L[G.str]||0)+1),L),{})}}e._Code=n,e.nil=new n("");function s(v,...R){const L=[v[0]];let G=0;for(;G<R.length;)f(L,R[G]),L.push(v[++G]);return new n(L)}e._=s;const i=new n("+");function a(v,...R){const L=[b(v[0])];let G=0;for(;G<R.length;)L.push(i),f(L,R[G]),L.push(i,b(v[++G]));return d(L),new n(L)}e.str=a;function f(v,R){R instanceof n?v.push(...R._items):R instanceof r?v.push(R):v.push(g(R))}e.addCodeArg=f;function d(v){let R=1;for(;R<v.length-1;){if(v[R]===i){const L=m(v[R-1],v[R+1]);if(L!==void 0){v.splice(R-1,3,L);continue}v[R++]="+"}R++}}function m(v,R){if(R==='""')return v;if(v==='""')return R;if(typeof v=="string")return R instanceof r||v[v.length-1]!=='"'?void 0:typeof R!="string"?`${v.slice(0,-1)}${R}"`:R[0]==='"'?v.slice(0,-1)+R.slice(1):void 0;if(typeof R=="string"&&R[0]==='"'&&!(v instanceof r))return`"${v}${R.slice(1)}`}function u(v,R){return R.emptyStr()?v:v.emptyStr()?R:a`${v}${R}`}e.strConcat=u;function g(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:b(Array.isArray(v)?v.join(","):v)}function N(v){return new n(b(v))}e.stringify=N;function b(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=b;function P(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new n(`.${v}`):s`[${v}]`}e.getProperty=P;function E(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new n(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=E;function S(v){return new n(v.toString())}e.regexpCode=S})(Bt);var Zr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Bt;class r extends Error{constructor(m){super(`CodeGen: "code" for ${m} not defined`),this.value=m.value}}var n;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:m,parent:u}={}){this._names={},this._prefixes=m,this._parent=u}toName(m){return m instanceof t.Name?m:this.name(m)}name(m){return new t.Name(this._newName(m))}_newName(m){const u=this._names[m]||this._nameGroup(m);return`${m}${u.index++}`}_nameGroup(m){var u,g;if(!((g=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||g===void 0)&&g.has(m)||this._prefixes&&!this._prefixes.has(m))throw new Error(`CodeGen: prefix "${m}" is not allowed in this scope`);return this._names[m]={prefix:m,index:0}}}e.Scope=s;class i extends t.Name{constructor(m,u){super(u),this.prefix=m}setValue(m,{property:u,itemIndex:g}){this.value=m,this.scopePath=(0,t._)`.${new t.Name(u)}[${g}]`}}e.ValueScopeName=i;const a=(0,t._)`\n`;class f extends s{constructor(m){super(m),this._values={},this._scope=m.scope,this.opts={...m,_n:m.lines?a:t.nil}}get(){return this._scope}name(m){return new i(m,this._newName(m))}value(m,u){var g;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(m),{prefix:b}=N,P=(g=u.key)!==null&&g!==void 0?g:u.ref;let E=this._values[b];if(E){const R=E.get(P);if(R)return R}else E=this._values[b]=new Map;E.set(P,N);const S=this._scope[b]||(this._scope[b]=[]),v=S.length;return S[v]=u.ref,N.setValue(u,{property:b,itemIndex:v}),N}getValue(m,u){const g=this._values[m];if(g)return g.get(u)}scopeRefs(m,u=this._values){return this._reduceValues(u,g=>{if(g.scopePath===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return(0,t._)`${m}${g.scopePath}`})}scopeCode(m=this._values,u,g){return this._reduceValues(m,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},u,g)}_reduceValues(m,u,g={},N){let b=t.nil;for(const P in m){const E=m[P];if(!E)continue;const S=g[P]=g[P]||new Map;E.forEach(v=>{if(S.has(v))return;S.set(v,n.Started);let R=u(v);if(R){const L=this.opts.es5?e.varKinds.var:e.varKinds.const;b=(0,t._)`${b}${L} ${v} = ${R};${this.opts._n}`}else if(R=N==null?void 0:N(v))b=(0,t._)`${b}${R}${this.opts._n}`;else throw new r(v);S.set(v,n.Completed)})}return b}}e.ValueScope=f})(Zr),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Bt,r=Zr;var n=Bt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=Zr;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(l,y){return this}}class a extends i{constructor(l,y,j){super(),this.varKind=l,this.name=y,this.rhs=j}render({es5:l,_n:y}){const j=l?r.varKinds.var:this.varKind,B=this.rhs===void 0?"":` = ${this.rhs}`;return`${j} ${this.name}${B};`+y}optimizeNames(l,y){if(l[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,l,y)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class f extends i{constructor(l,y,j){super(),this.lhs=l,this.rhs=y,this.sideEffects=j}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,y){if(!(this.lhs instanceof t.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,l,y),this}get names(){const l=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ze(l,this.rhs)}}class d extends f{constructor(l,y,j,B){super(l,j,B),this.op=y}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class m extends i{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class u extends i{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class g extends i{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class N extends i{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,y){return this.code=U(this.code,l,y),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class b extends i{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((y,j)=>y+j.render(l),"")}optimizeNodes(){const{nodes:l}=this;let y=l.length;for(;y--;){const j=l[y].optimizeNodes();Array.isArray(j)?l.splice(y,1,...j):j?l[y]=j:l.splice(y,1)}return l.length>0?this:void 0}optimizeNames(l,y){const{nodes:j}=this;let B=j.length;for(;B--;){const X=j[B];X.optimizeNames(l,y)||(M(l,X.names),j.splice(B,1))}return j.length>0?this:void 0}get names(){return this.nodes.reduce((l,y)=>We(l,y.names),{})}}class P extends b{render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class E extends b{}class S extends P{}S.kind="else";class v extends P{constructor(l,y){super(y),this.condition=l}render(l){let y=`if(${this.condition})`+super.render(l);return this.else&&(y+="else "+this.else.render(l)),y}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let y=this.else;if(y){const j=y.optimizeNodes();y=this.else=Array.isArray(j)?new S(j):j}if(y)return l===!1?y instanceof v?y:y.nodes:this.nodes.length?this:new v(Z(l),y instanceof v?[y]:y.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,y){var j;if(this.else=(j=this.else)===null||j===void 0?void 0:j.optimizeNames(l,y),!!(super.optimizeNames(l,y)||this.else))return this.condition=U(this.condition,l,y),this}get names(){const l=super.names;return ze(l,this.condition),this.else&&We(l,this.else.names),l}}v.kind="if";class R extends P{}R.kind="for";class L extends R{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,y){if(super.optimizeNames(l,y))return this.iteration=U(this.iteration,l,y),this}get names(){return We(super.names,this.iteration.names)}}class G extends R{constructor(l,y,j,B){super(),this.varKind=l,this.name=y,this.from=j,this.to=B}render(l){const y=l.es5?r.varKinds.var:this.varKind,{name:j,from:B,to:X}=this;return`for(${y} ${j}=${B}; ${j}<${X}; ${j}++)`+super.render(l)}get names(){const l=ze(super.names,this.from);return ze(l,this.to)}}class F extends R{constructor(l,y,j,B){super(),this.loop=l,this.varKind=y,this.name=j,this.iterable=B}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,y){if(super.optimizeNames(l,y))return this.iterable=U(this.iterable,l,y),this}get names(){return We(super.names,this.iterable.names)}}class ue extends P{constructor(l,y,j){super(),this.name=l,this.args=y,this.async=j}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}ue.kind="func";class de extends b{render(l){return"return "+super.render(l)}}de.kind="return";class Ce extends P{render(l){let y="try"+super.render(l);return this.catch&&(y+=this.catch.render(l)),this.finally&&(y+=this.finally.render(l)),y}optimizeNodes(){var l,y;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(y=this.finally)===null||y===void 0||y.optimizeNodes(),this}optimizeNames(l,y){var j,B;return super.optimizeNames(l,y),(j=this.catch)===null||j===void 0||j.optimizeNames(l,y),(B=this.finally)===null||B===void 0||B.optimizeNames(l,y),this}get names(){const l=super.names;return this.catch&&We(l,this.catch.names),this.finally&&We(l,this.finally.names),l}}class He extends P{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}He.kind="catch";class Qe extends P{render(l){return"finally"+super.render(l)}}Qe.kind="finally";class De{constructor(l,y={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...y,_n:y.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,y){const j=this._extScope.value(l,y);return(this._values[j.prefix]||(this._values[j.prefix]=new Set)).add(j),j}getScopeValue(l,y){return this._extScope.getValue(l,y)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,y,j,B){const X=this._scope.toName(y);return j!==void 0&&B&&(this._constants[X.str]=j),this._leafNode(new a(l,X,j)),X}const(l,y,j){return this._def(r.varKinds.const,l,y,j)}let(l,y,j){return this._def(r.varKinds.let,l,y,j)}var(l,y,j){return this._def(r.varKinds.var,l,y,j)}assign(l,y,j){return this._leafNode(new f(l,y,j))}add(l,y){return this._leafNode(new d(l,e.operators.ADD,y))}code(l){return typeof l=="function"?l():l!==t.nil&&this._leafNode(new N(l)),this}object(...l){const y=["{"];for(const[j,B]of l)y.length>1&&y.push(","),y.push(j),(j!==B||this.opts.es5)&&(y.push(":"),(0,t.addCodeArg)(y,B));return y.push("}"),new t._Code(y)}if(l,y,j){if(this._blockNode(new v(l)),y&&j)this.code(y).else().code(j).endIf();else if(y)this.code(y).endIf();else if(j)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new v(l))}else(){return this._elseNode(new S)}endIf(){return this._endBlockNode(v,S)}_for(l,y){return this._blockNode(l),y&&this.code(y).endFor(),this}for(l,y){return this._for(new L(l),y)}forRange(l,y,j,B,X=this.opts.es5?r.varKinds.var:r.varKinds.let){const ae=this._scope.toName(l);return this._for(new G(X,ae,y,j),()=>B(ae))}forOf(l,y,j,B=r.varKinds.const){const X=this._scope.toName(l);if(this.opts.es5){const ae=y instanceof t.Name?y:this.var("_arr",y);return this.forRange("_i",0,(0,t._)`${ae}.length`,ie=>{this.var(X,(0,t._)`${ae}[${ie}]`),j(X)})}return this._for(new F("of",B,X,y),()=>j(X))}forIn(l,y,j,B=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,t._)`Object.keys(${y})`,j);const X=this._scope.toName(l);return this._for(new F("in",B,X,y),()=>j(X))}endFor(){return this._endBlockNode(R)}label(l){return this._leafNode(new m(l))}break(l){return this._leafNode(new u(l))}return(l){const y=new de;if(this._blockNode(y),this.code(l),y.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(de)}try(l,y,j){if(!y&&!j)throw new Error('CodeGen: "try" without "catch" and "finally"');const B=new Ce;if(this._blockNode(B),this.code(l),y){const X=this.name("e");this._currNode=B.catch=new He(X),y(X)}return j&&(this._currNode=B.finally=new Qe,this.code(j)),this._endBlockNode(He,Qe)}throw(l){return this._leafNode(new g(l))}block(l,y){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(y),this}endBlock(l){const y=this._blockStarts.pop();if(y===void 0)throw new Error("CodeGen: not in self-balancing block");const j=this._nodes.length-y;if(j<0||l!==void 0&&j!==l)throw new Error(`CodeGen: wrong number of nodes: ${j} vs ${l} expected`);return this._nodes.length=y,this}func(l,y=t.nil,j,B){return this._blockNode(new ue(l,y,j)),B&&this.code(B).endFunc(),this}endFunc(){return this._endBlockNode(ue)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,y){const j=this._currNode;if(j instanceof l||y&&j instanceof y)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${y?`${l.kind}/${y.kind}`:l.kind}"`)}_elseNode(l){const y=this._currNode;if(!(y instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=y.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const y=this._nodes;y[y.length-1]=l}}e.CodeGen=De;function We(_,l){for(const y in l)_[y]=(_[y]||0)+(l[y]||0);return _}function ze(_,l){return l instanceof t._CodeOrName?We(_,l.names):_}function U(_,l,y){if(_ instanceof t.Name)return j(_);if(!B(_))return _;return new t._Code(_._items.reduce((X,ae)=>(ae instanceof t.Name&&(ae=j(ae)),ae instanceof t._Code?X.push(...ae._items):X.push(ae),X),[]));function j(X){const ae=y[X.str];return ae===void 0||l[X.str]!==1?X:(delete l[X.str],ae)}function B(X){return X instanceof t._Code&&X._items.some(ae=>ae instanceof t.Name&&l[ae.str]===1&&y[ae.str]!==void 0)}}function M(_,l){for(const y in l)_[y]=(_[y]||0)-(l[y]||0)}function Z(_){return typeof _=="boolean"||typeof _=="number"||_===null?!_:(0,t._)`!${I(_)}`}e.not=Z;const x=w(e.operators.AND);function Y(..._){return _.reduce(x)}e.and=Y;const W=w(e.operators.OR);function k(..._){return _.reduce(W)}e.or=k;function w(_){return(l,y)=>l===t.nil?y:y===t.nil?l:(0,t._)`${I(l)} ${_} ${I(y)}`}function I(_){return _ instanceof t.Name?_:(0,t._)`(${_})`}}(se),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=se,n=["undefined","string","number","object","function","boolean","symbol"];function s(){return{keyword:"typeof",schemaType:["string","array"],code(i){const{data:a,schema:f,schemaValue:d}=i;i.fail(typeof f=="string"?(0,r._)`typeof ${a} != ${f}`:(0,r._)`${d}.indexOf(typeof ${a}) < 0`)},metaSchema:{anyOf:[{type:"string",enum:n},{type:"array",items:{type:"string",enum:n}}]}}}t.default=s,e.exports=s}(jt,jt.exports);var Ki=jt.exports;const xi=_e(Ki),Ps={$ref:"#/definitions/CallAssignments",definitions:{CallAssignments:{description:"Structure describies payload used to change call assignments in FCC.",type:"object",properties:{recordId:{description:"Identifier of the object representing the company associated with the call.",type:"string"},recordType:{description:"Identifier of the object representing the individual associated with the call.",type:"string"}},required:["recordId","recordType"]}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/callAssignments.schema.json"},Rs={$ref:"#/definitions/CallTicket",definitions:{CallTicket:{type:"object",properties:{ticketNumber:{description:"Thing number that is used in CRM for display entity.",type:"string"},ticketId:{description:"Thing Id in crm system.",type:"string"},subject:{description:"Thing subject/topic a brief description.",type:"string"}}}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/callTicket.schema.json"},Os={$ref:"#/definitions/ChangeUserStatus",definitions:{ChangeUserStatus:{type:"object",properties:{statusId:{type:"string"}},required:["statusId"]}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/changeUserStatus.schema.json"},Is={$ref:"#/definitions/WebphoneConnectorConfig",definitions:{WebphoneConnectorConfig:{description:"Structure of Webphone Connector Configuration",type:"object",properties:{type:{description:"Integration type supported by FCC backend. Contact CC for get integration name.",type:"string"},container:{description:'Selector for html object, phone iframe will be placed in it. If object is iframe, ensure it\'s not visible by default `style="visibility:hidden"`.',type:"string"},userId:{description:"Current logged in user Id in your system.",type:"string"},mode:{description:"Connector mode.",enum:["dev","prod"],type:"string"},adapter:{$ref:"webphoneAdapter.schema.json",description:"Webphone adapter in your system."},authData:{$ref:"#/definitions/AuthData",description:"Authorization Data for current user."}},required:["adapter","authData","container","type","userId"]},AuthData:{type:"object",properties:{domain:{description:"Fcc tenant domain.",type:"string"},token:{description:"Token retrived from external-api for authorizating connector instance.",type:"string"}},required:["domain","token"]}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/connectorConfig.schema.json"},Ns={$ref:"#/definitions/CallRecordData",definitions:{CallRecordData:{description:"Create call record representing call in your system.",type:"object",properties:{callId:{description:"Call Id.",type:"number"},phoneNumber:{description:"Phone number.",anyOf:[{type:"string",pattern:"^[0-9]*$"},{type:"string",pattern:"^\\+[0-9]*$"}]},direction:{description:"Call direction from CallCenter perspective.",enum:["inbound","outbound"],type:"string"},subject:{description:"Call record subject ex. Inbound Call (Answered) from: +48XXXXXXX.",type:"string"}}}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/createCallRecord.schema.json"},Xi={$ref:"#/definitions/CreateEntity",definitions:{CreateEntity:{type:"object",properties:{entity:{description:"Entity type to create.",type:"string"},phoneNumber:{description:"Phone number.",anyOf:[{type:"string",pattern:"^[0-9]*$"},{type:"string",pattern:"^\\+[0-9]*$"}]},vid:{description:"Id from crm system.",type:"string"},callId:{description:"Call id from FCC",type:"string"}}}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/createEntity.schema.json"},Bi={$ref:"#/definitions/CallObjectDetails",definitions:{CallObjectDetails:{description:"Structure describies given call object from your system. Used to retrive data for both ended and active calls.",type:"object",properties:{accountId:{description:"Identifier of the object representing the company associated with the call.",type:"string"},whoId:{description:"Identifier of the object representing the individual associated with the call.",type:"string"},whatId:{description:"The identifier of the object representing the Ticket (case) associated with the call. This should be something that can be done.",type:"string"},id:{description:"System identifier for the connection provided.",type:"string"}}}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/objectDetails.schema.json"},js={$ref:"#/definitions/PlaceCall",definitions:{PlaceCall:{type:"object",properties:{phoneNumber:{$ref:"#/definitions/PhoneNumber"},vid:{description:"ID of object that we will call.",type:"string"},ticket:{description:"Thing releated to called vid",type:["null","string"]}},required:["phoneNumber","vid"]},PhoneNumber:{anyOf:[{type:"string",pattern:"^[0-9]*$"},{type:"string",pattern:"^\\+[0-9]*$"}]}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/placeCall.schema.json"},Ji={$ref:"#/definitions/SearchObjectList",definitions:{SearchObjectList:{description:"Structure describing given object from your system. Used to retrive data for ended and active calls.",type:"object",properties:{id:{description:"System ID of object.",type:"string"},vid:{description:"Object ID for external systems.",type:"string"},ownerId:{description:"Object owner id.",type:"string"},type:{description:"Entity type.",type:"string"},phone:{$ref:"#/definitions/PhoneNumber",description:"Phone number"},email:{description:"Email",type:"string",pattern:"^.*@.*\\\\\\..*$"},displayName:{description:"Name in format for displaying in phone.",type:"string"},profileUrl:{description:"Absolute url to object.",type:"string"},company:{description:"Company name.",type:"string"},firstname:{description:"Firstname.",type:"string"},lastname:{description:"LastName.",type:"string"},portalId:{description:"Object id for accessing using URI's, null otherwise.",type:"string"}},required:["displayName","id","ownerId","phone","type","vid"]},PhoneNumber:{anyOf:[{type:"string",pattern:"^[0-9]*$"},{type:"string",pattern:"^\\+[0-9]*$"}]}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/searchObjectList.schema.json"},Yi={$ref:"#/definitions/WebphoneAdapter",definitions:{WebphoneAdapter:{description:"Structure of Webphone Adapter",type:"object",properties:{loader:{$ref:"#/definitions/AdapterLoader"},createEntityHandler:{typeof:"function"},onToggleClick2Dial:{typeof:"function"},onUserStatusChanged:{typeof:"function"},getCallObject:{typeof:"function"},getUserStatus:{typeof:"function"},linkToCurrentHandler:{typeof:"function"},supportMatrixHandler:{typeof:"function"},searchHandler:{typeof:"function"},popSoftphoneHandler:{typeof:"function"},navigateToObjectHandler:{typeof:"function"},upsertCallRecordHandler:{typeof:"function"},iconHandler:{typeof:"function"}},required:["createEntityHandler","getCallObject","iconHandler","loader","onToggleClick2Dial","supportMatrixHandler","upsertCallRecordHandler"]},AdapterLoader:{type:"object",properties:{prompt:{typeof:"function"},finish:{typeof:"function"},error:{typeof:"function"}},required:["error","finish","prompt"]}},$schema:"http://json-schema.org/draft-07/schema#",$id:"https://webphone-connector.fcc-online.pl/src/schema/webphoneAdapter.schema.json"};var Qr={exports:{}},Ts={},xe={},Tt={},Jt={},K={};Object.defineProperty(K,"__esModule",{value:!0}),K.checkStrictMode=K.getErrorPath=K.Type=K.useFunc=K.setEvaluated=K.evaluatedPropsToName=K.mergeEvaluated=K.eachItem=K.unescapeJsonPointer=K.escapeJsonPointer=K.escapeFragment=K.unescapeFragment=K.schemaRefOrVal=K.schemaHasRulesButRef=K.schemaHasRules=K.checkUnknownRules=K.alwaysValidSchema=K.toHash=void 0;const fe=se,Zi=Bt;function Qi(e){const t={};for(const r of e)t[r]=!0;return t}K.toHash=Qi;function ea(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Cs(e,t),!As(t,e.self.RULES.all))}K.alwaysValidSchema=ea;function Cs(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const i in t)s[i]||Ws(e,`unknown keyword: "${i}"`)}K.checkUnknownRules=Cs;function As(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}K.schemaHasRules=As;function ta(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}K.schemaHasRulesButRef=ta;function ra({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,fe._)`${r}`}return(0,fe._)`${e}${t}${(0,fe.getProperty)(n)}`}K.schemaRefOrVal=ra;function na(e){return ks(decodeURIComponent(e))}K.unescapeFragment=na;function sa(e){return encodeURIComponent(en(e))}K.escapeFragment=sa;function en(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}K.escapeJsonPointer=en;function ks(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}K.unescapeJsonPointer=ks;function oa(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}K.eachItem=oa;function Ds({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,i,a,f)=>{const d=a===void 0?i:a instanceof fe.Name?(i instanceof fe.Name?e(s,i,a):t(s,i,a),a):i instanceof fe.Name?(t(s,a,i),i):r(i,a);return f===fe.Name&&!(d instanceof fe.Name)?n(s,d):d}}K.mergeEvaluated={props:Ds({mergeNames:(e,t,r)=>e.if((0,fe._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,fe._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,fe._)`${r} || {}`).code((0,fe._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,fe._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,fe._)`${r} || {}`),tn(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Ls}),items:Ds({mergeNames:(e,t,r)=>e.if((0,fe._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,fe._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,fe._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,fe._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Ls(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,fe._)`{}`);return t!==void 0&&tn(e,r,t),r}K.evaluatedPropsToName=Ls;function tn(e,t,r){Object.keys(r).forEach(n=>e.assign((0,fe._)`${t}${(0,fe.getProperty)(n)}`,!0))}K.setEvaluated=tn;const Ms={};function ia(e,t){return e.scopeValue("func",{ref:t,code:Ms[t.code]||(Ms[t.code]=new Zi._Code(t.code))})}K.useFunc=ia;var rn;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(rn||(K.Type=rn={}));function aa(e,t,r){if(e instanceof fe.Name){const n=t===rn.Num;return r?n?(0,fe._)`"[" + ${e} + "]"`:(0,fe._)`"['" + ${e} + "']"`:n?(0,fe._)`"/" + ${e}`:(0,fe._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,fe.getProperty)(e).toString():"/"+en(e)}K.getErrorPath=aa;function Ws(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}K.checkStrictMode=Ws;var et={};Object.defineProperty(et,"__esModule",{value:!0});const Te=se,ca={data:new Te.Name("data"),valCxt:new Te.Name("valCxt"),instancePath:new Te.Name("instancePath"),parentData:new Te.Name("parentData"),parentDataProperty:new Te.Name("parentDataProperty"),rootData:new Te.Name("rootData"),dynamicAnchors:new Te.Name("dynamicAnchors"),vErrors:new Te.Name("vErrors"),errors:new Te.Name("errors"),this:new Te.Name("this"),self:new Te.Name("self"),scope:new Te.Name("scope"),json:new Te.Name("json"),jsonPos:new Te.Name("jsonPos"),jsonLen:new Te.Name("jsonLen"),jsonPart:new Te.Name("jsonPart")};et.default=ca,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=se,r=K,n=et;e.keywordError={message:({keyword:S})=>(0,t.str)`must pass "${S}" keyword validation`},e.keyword$DataError={message:({keyword:S,schemaType:v})=>v?(0,t.str)`"${S}" keyword must be ${v} ($data)`:(0,t.str)`"${S}" keyword is invalid ($data)`};function s(S,v=e.keywordError,R,L){const{it:G}=S,{gen:F,compositeRule:ue,allErrors:de}=G,Ce=g(S,v,R);L??(ue||de)?d(F,Ce):m(G,(0,t._)`[${Ce}]`)}e.reportError=s;function i(S,v=e.keywordError,R){const{it:L}=S,{gen:G,compositeRule:F,allErrors:ue}=L,de=g(S,v,R);d(G,de),F||ue||m(L,n.default.vErrors)}e.reportExtraError=i;function a(S,v){S.assign(n.default.errors,v),S.if((0,t._)`${n.default.vErrors} !== null`,()=>S.if(v,()=>S.assign((0,t._)`${n.default.vErrors}.length`,v),()=>S.assign(n.default.vErrors,null)))}e.resetErrorsCount=a;function f({gen:S,keyword:v,schemaValue:R,data:L,errsCount:G,it:F}){if(G===void 0)throw new Error("ajv implementation error");const ue=S.name("err");S.forRange("i",G,n.default.errors,de=>{S.const(ue,(0,t._)`${n.default.vErrors}[${de}]`),S.if((0,t._)`${ue}.instancePath === undefined`,()=>S.assign((0,t._)`${ue}.instancePath`,(0,t.strConcat)(n.default.instancePath,F.errorPath))),S.assign((0,t._)`${ue}.schemaPath`,(0,t.str)`${F.errSchemaPath}/${v}`),F.opts.verbose&&(S.assign((0,t._)`${ue}.schema`,R),S.assign((0,t._)`${ue}.data`,L))})}e.extendErrors=f;function d(S,v){const R=S.const("err",v);S.if((0,t._)`${n.default.vErrors} === null`,()=>S.assign(n.default.vErrors,(0,t._)`[${R}]`),(0,t._)`${n.default.vErrors}.push(${R})`),S.code((0,t._)`${n.default.errors}++`)}function m(S,v){const{gen:R,validateName:L,schemaEnv:G}=S;G.$async?R.throw((0,t._)`new ${S.ValidationError}(${v})`):(R.assign((0,t._)`${L}.errors`,v),R.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function g(S,v,R){const{createErrors:L}=S.it;return L===!1?(0,t._)`{}`:N(S,v,R)}function N(S,v,R={}){const{gen:L,it:G}=S,F=[b(G,R),P(S,R)];return E(S,v,F),L.object(...F)}function b({errorPath:S},{instancePath:v}){const R=v?(0,t.str)`${S}${(0,r.getErrorPath)(v,r.Type.Str)}`:S;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,R)]}function P({keyword:S,it:{errSchemaPath:v}},{schemaPath:R,parentSchema:L}){let G=L?v:(0,t.str)`${v}/${S}`;return R&&(G=(0,t.str)`${G}${(0,r.getErrorPath)(R,r.Type.Str)}`),[u.schemaPath,G]}function E(S,{params:v,message:R},L){const{keyword:G,data:F,schemaValue:ue,it:de}=S,{opts:Ce,propertyName:He,topSchemaRef:Qe,schemaPath:De}=de;L.push([u.keyword,G],[u.params,typeof v=="function"?v(S):v||(0,t._)`{}`]),Ce.messages&&L.push([u.message,typeof R=="function"?R(S):R]),Ce.verbose&&L.push([u.schema,ue],[u.parentSchema,(0,t._)`${Qe}${De}`],[n.default.data,F]),He&&L.push([u.propertyName,He])}}(Jt),Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.boolOrEmptySchema=Tt.topBoolOrEmptySchema=void 0;const ua=Jt,la=se,da=et,fa={message:"boolean schema is false"};function ha(e){const{gen:t,schema:r,validateName:n}=e;r===!1?zs(e,!1):typeof r=="object"&&r.$async===!0?t.return(da.default.data):(t.assign((0,la._)`${n}.errors`,null),t.return(!0))}Tt.topBoolOrEmptySchema=ha;function pa(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),zs(e)):r.var(t,!0)}Tt.boolOrEmptySchema=pa;function zs(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,ua.reportError)(s,fa,void 0,t)}var Pe={},wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.getRules=wt.isJSONType=void 0;const ma=["string","number","integer","boolean","null","object","array"],ya=new Set(ma);function $a(e){return typeof e=="string"&&ya.has(e)}wt.isJSONType=$a;function ga(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}wt.getRules=ga;var ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.shouldUseRule=ot.shouldUseGroup=ot.schemaHasRulesForType=void 0;function va({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Vs(e,n)}ot.schemaHasRulesForType=va;function Vs(e,t){return t.rules.some(r=>Hs(e,r))}ot.shouldUseGroup=Vs;function Hs(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}ot.shouldUseRule=Hs,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.reportTypeError=Pe.checkDataTypes=Pe.checkDataType=Pe.coerceAndCheckDataType=Pe.getJSONTypes=Pe.getSchemaTypes=Pe.DataType=void 0;const wa=wt,Ea=ot,_a=Jt,ee=se,Us=K;var Ct;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Ct||(Pe.DataType=Ct={}));function ba(e){const t=Fs(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Pe.getSchemaTypes=ba;function Fs(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(wa.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Pe.getJSONTypes=Fs;function Sa(e,t){const{gen:r,data:n,opts:s}=e,i=Pa(t,s.coerceTypes),a=t.length>0&&!(i.length===0&&t.length===1&&(0,Ea.schemaHasRulesForType)(e,t[0]));if(a){const f=sn(t,n,s.strictNumbers,Ct.Wrong);r.if(f,()=>{i.length?Ra(e,t,i):on(e)})}return a}Pe.coerceAndCheckDataType=Sa;const qs=new Set(["string","number","integer","boolean","null"]);function Pa(e,t){return t?e.filter(r=>qs.has(r)||t==="array"&&r==="array"):[]}function Ra(e,t,r){const{gen:n,data:s,opts:i}=e,a=n.let("dataType",(0,ee._)`typeof ${s}`),f=n.let("coerced",(0,ee._)`undefined`);i.coerceTypes==="array"&&n.if((0,ee._)`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ee._)`${s}[0]`).assign(a,(0,ee._)`typeof ${s}`).if(sn(t,s,i.strictNumbers),()=>n.assign(f,s))),n.if((0,ee._)`${f} !== undefined`);for(const m of r)(qs.has(m)||m==="array"&&i.coerceTypes==="array")&&d(m);n.else(),on(e),n.endIf(),n.if((0,ee._)`${f} !== undefined`,()=>{n.assign(s,f),Oa(e,f)});function d(m){switch(m){case"string":n.elseIf((0,ee._)`${a} == "number" || ${a} == "boolean"`).assign(f,(0,ee._)`"" + ${s}`).elseIf((0,ee._)`${s} === null`).assign(f,(0,ee._)`""`);return;case"number":n.elseIf((0,ee._)`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(f,(0,ee._)`+${s}`);return;case"integer":n.elseIf((0,ee._)`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(f,(0,ee._)`+${s}`);return;case"boolean":n.elseIf((0,ee._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(f,!1).elseIf((0,ee._)`${s} === "true" || ${s} === 1`).assign(f,!0);return;case"null":n.elseIf((0,ee._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(f,null);return;case"array":n.elseIf((0,ee._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(f,(0,ee._)`[${s}]`)}}}function Oa({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,ee._)`${t} !== undefined`,()=>e.assign((0,ee._)`${t}[${r}]`,n))}function nn(e,t,r,n=Ct.Correct){const s=n===Ct.Correct?ee.operators.EQ:ee.operators.NEQ;let i;switch(e){case"null":return(0,ee._)`${t} ${s} null`;case"array":i=(0,ee._)`Array.isArray(${t})`;break;case"object":i=(0,ee._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a((0,ee._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return(0,ee._)`typeof ${t} ${s} ${e}`}return n===Ct.Correct?i:(0,ee.not)(i);function a(f=ee.nil){return(0,ee.and)((0,ee._)`typeof ${t} == "number"`,f,r?(0,ee._)`isFinite(${t})`:ee.nil)}}Pe.checkDataType=nn;function sn(e,t,r,n){if(e.length===1)return nn(e[0],t,r,n);let s;const i=(0,Us.toHash)(e);if(i.array&&i.object){const a=(0,ee._)`typeof ${t} != "object"`;s=i.null?a:(0,ee._)`!${t} || ${a}`,delete i.null,delete i.array,delete i.object}else s=ee.nil;i.number&&delete i.integer;for(const a in i)s=(0,ee.and)(s,nn(a,t,r,n));return s}Pe.checkDataTypes=sn;const Ia={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,ee._)`{type: ${e}}`:(0,ee._)`{type: ${t}}`};function on(e){const t=Na(e);(0,_a.reportError)(t,Ia)}Pe.reportTypeError=on;function Na(e){const{gen:t,data:r,schema:n}=e,s=(0,Us.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var mr={};Object.defineProperty(mr,"__esModule",{value:!0}),mr.assignDefaults=void 0;const At=se,ja=K;function Ta(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)Gs(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>Gs(e,i,s.default))}mr.assignDefaults=Ta;function Gs(e,t,r){const{gen:n,compositeRule:s,data:i,opts:a}=e;if(r===void 0)return;const f=(0,At._)`${i}${(0,At.getProperty)(t)}`;if(s){(0,ja.checkStrictMode)(e,`default is ignored for: ${f}`);return}let d=(0,At._)`${f} === undefined`;a.useDefaults==="empty"&&(d=(0,At._)`${d} || ${f} === null || ${f} === ""`),n.if(d,(0,At._)`${f} = ${(0,At.stringify)(r)}`)}var tt={},oe={};Object.defineProperty(oe,"__esModule",{value:!0}),oe.validateUnion=oe.validateArray=oe.usePattern=oe.callValidateCode=oe.schemaProperties=oe.allSchemaProperties=oe.noPropertyInData=oe.propertyInData=oe.isOwnProperty=oe.hasPropFunc=oe.reportMissingProp=oe.checkMissingProp=oe.checkReportMissingProp=void 0;const ye=se,an=K,ft=et,Ca=K;function Aa(e,t){const{gen:r,data:n,it:s}=e;r.if(un(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ye._)`${t}`},!0),e.error()})}oe.checkReportMissingProp=Aa;function ka({gen:e,data:t,it:{opts:r}},n,s){return(0,ye.or)(...n.map(i=>(0,ye.and)(un(e,t,i,r.ownProperties),(0,ye._)`${s} = ${i}`)))}oe.checkMissingProp=ka;function Da(e,t){e.setParams({missingProperty:t},!0),e.error()}oe.reportMissingProp=Da;function Ks(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ye._)`Object.prototype.hasOwnProperty`})}oe.hasPropFunc=Ks;function cn(e,t,r){return(0,ye._)`${Ks(e)}.call(${t}, ${r})`}oe.isOwnProperty=cn;function La(e,t,r,n){const s=(0,ye._)`${t}${(0,ye.getProperty)(r)} !== undefined`;return n?(0,ye._)`${s} && ${cn(e,t,r)}`:s}oe.propertyInData=La;function un(e,t,r,n){const s=(0,ye._)`${t}${(0,ye.getProperty)(r)} === undefined`;return n?(0,ye.or)(s,(0,ye.not)(cn(e,t,r))):s}oe.noPropertyInData=un;function xs(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}oe.allSchemaProperties=xs;function Ma(e,t){return xs(t).filter(r=>!(0,an.alwaysValidSchema)(e,t[r]))}oe.schemaProperties=Ma;function Wa({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:a},f,d,m){const u=m?(0,ye._)`${e}, ${t}, ${n}${s}`:t,g=[[ft.default.instancePath,(0,ye.strConcat)(ft.default.instancePath,i)],[ft.default.parentData,a.parentData],[ft.default.parentDataProperty,a.parentDataProperty],[ft.default.rootData,ft.default.rootData]];a.opts.dynamicRef&&g.push([ft.default.dynamicAnchors,ft.default.dynamicAnchors]);const N=(0,ye._)`${u}, ${r.object(...g)}`;return d!==ye.nil?(0,ye._)`${f}.call(${d}, ${N})`:(0,ye._)`${f}(${N})`}oe.callValidateCode=Wa;const za=(0,ye._)`new RegExp`;function Va({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ye._)`${s.code==="new RegExp"?za:(0,Ca.useFunc)(e,s)}(${r}, ${n})`})}oe.usePattern=Va;function Ha(e){const{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){const f=t.let("valid",!0);return a(()=>t.assign(f,!1)),f}return t.var(i,!0),a(()=>t.break()),i;function a(f){const d=t.const("len",(0,ye._)`${r}.length`);t.forRange("i",0,d,m=>{e.subschema({keyword:n,dataProp:m,dataPropType:an.Type.Num},i),t.if((0,ye.not)(i),f)})}}oe.validateArray=Ha;function Ua(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(d=>(0,an.alwaysValidSchema)(s,d))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),f=t.name("_valid");t.block(()=>r.forEach((d,m)=>{const u=e.subschema({keyword:n,schemaProp:m,compositeRule:!0},f);t.assign(a,(0,ye._)`${a} || ${f}`),e.mergeValidEvaluated(u,f)||t.if((0,ye.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}oe.validateUnion=Ua,Object.defineProperty(tt,"__esModule",{value:!0}),tt.validateKeywordUsage=tt.validSchemaType=tt.funcKeywordCode=tt.macroKeywordCode=void 0;const Ae=se,Et=et,Fa=oe,qa=Jt;function Ga(e,t){const{gen:r,keyword:n,schema:s,parentSchema:i,it:a}=e,f=t.macro.call(a.self,s,i,a),d=Bs(r,n,f);a.opts.validateSchema!==!1&&a.self.validateSchema(f,!0);const m=r.name("valid");e.subschema({schema:f,schemaPath:Ae.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:d,compositeRule:!0},m),e.pass(m,()=>e.error(!0))}tt.macroKeywordCode=Ga;function Ka(e,t){var r;const{gen:n,keyword:s,schema:i,parentSchema:a,$data:f,it:d}=e;Xa(d,t);const m=!f&&t.compile?t.compile.call(d.self,i,a,d):t.validate,u=Bs(n,s,m),g=n.let("valid");e.block$data(g,N),e.ok((r=t.valid)!==null&&r!==void 0?r:g);function N(){if(t.errors===!1)E(),t.modifying&&Xs(e),S(()=>e.error());else{const v=t.async?b():P();t.modifying&&Xs(e),S(()=>xa(e,v))}}function b(){const v=n.let("ruleErrs",null);return n.try(()=>E((0,Ae._)`await `),R=>n.assign(g,!1).if((0,Ae._)`${R} instanceof ${d.ValidationError}`,()=>n.assign(v,(0,Ae._)`${R}.errors`),()=>n.throw(R))),v}function P(){const v=(0,Ae._)`${u}.errors`;return n.assign(v,null),E(Ae.nil),v}function E(v=t.async?(0,Ae._)`await `:Ae.nil){const R=d.opts.passContext?Et.default.this:Et.default.self,L=!("compile"in t&&!f||t.schema===!1);n.assign(g,(0,Ae._)`${v}${(0,Fa.callValidateCode)(e,u,R,L)}`,t.modifying)}function S(v){var R;n.if((0,Ae.not)((R=t.valid)!==null&&R!==void 0?R:g),v)}}tt.funcKeywordCode=Ka;function Xs(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Ae._)`${n.parentData}[${n.parentDataProperty}]`))}function xa(e,t){const{gen:r}=e;r.if((0,Ae._)`Array.isArray(${t})`,()=>{r.assign(Et.default.vErrors,(0,Ae._)`${Et.default.vErrors} === null ? ${t} : ${Et.default.vErrors}.concat(${t})`).assign(Et.default.errors,(0,Ae._)`${Et.default.vErrors}.length`),(0,qa.extendErrors)(e)},()=>e.error())}function Xa({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Bs(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Ae.stringify)(r)})}function Ba(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}tt.validSchemaType=Ba;function Ja({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const a=s.dependencies;if(a!=null&&a.some(f=>!Object.prototype.hasOwnProperty.call(e,f)))throw new Error(`parent schema must have dependencies of ${i}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const d=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(d);else throw new Error(d)}}tt.validateKeywordUsage=Ja;var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.extendSubschemaMode=ht.extendSubschemaData=ht.getSubschema=void 0;const rt=se,Js=K;function Ya(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:a}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const f=e.schema[t];return r===void 0?{schema:f,schemaPath:(0,rt._)`${e.schemaPath}${(0,rt.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:f[r],schemaPath:(0,rt._)`${e.schemaPath}${(0,rt.getProperty)(t)}${(0,rt.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Js.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:a,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}ht.getSubschema=Ya;function Za(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:a}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=t;if(r!==void 0){const{errorPath:m,dataPathArr:u,opts:g}=t,N=f.let("data",(0,rt._)`${t.data}${(0,rt.getProperty)(r)}`,!0);d(N),e.errorPath=(0,rt.str)`${m}${(0,Js.getErrorPath)(r,n,g.jsPropertySyntax)}`,e.parentDataProperty=(0,rt._)`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(s!==void 0){const m=s instanceof rt.Name?s:f.let("data",s,!0);d(m),a!==void 0&&(e.propertyName=a)}i&&(e.dataTypes=i);function d(m){e.data=m,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,m]}}ht.extendSubschemaData=Za;function Qa(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}ht.extendSubschemaMode=Qa;var Ie={},Ys=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var a=i[s];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r},Zs={exports:{}},pt=Zs.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};yr(t,n,s,e,"",e)};pt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},pt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},pt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},pt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function yr(e,t,r,n,s,i,a,f,d,m){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,i,a,f,d,m);for(var u in n){var g=n[u];if(Array.isArray(g)){if(u in pt.arrayKeywords)for(var N=0;N<g.length;N++)yr(e,t,r,g[N],s+"/"+u+"/"+N,i,s,u,n,N)}else if(u in pt.propsKeywords){if(g&&typeof g=="object")for(var b in g)yr(e,t,r,g[b],s+"/"+u+"/"+ec(b),i,s,u,n,b)}else(u in pt.keywords||e.allKeys&&!(u in pt.skipKeywords))&&yr(e,t,r,g,s+"/"+u,i,s,u,n)}r(n,s,i,a,f,d,m)}}function ec(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var tc=Zs.exports;Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.getSchemaRefs=Ie.resolveUrl=Ie.normalizeId=Ie._getFullPath=Ie.getFullPath=Ie.inlineRef=void 0;const rc=K,nc=Ys,sc=tc,oc=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ic(e,t=!0){return typeof e=="boolean"?!0:t===!0?!ln(e):t?Qs(e)<=t:!1}Ie.inlineRef=ic;const ac=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ln(e){for(const t in e){if(ac.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(ln)||typeof r=="object"&&ln(r))return!0}return!1}function Qs(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!oc.has(r)&&(typeof e[r]=="object"&&(0,rc.eachItem)(e[r],n=>t+=Qs(n)),t===1/0))return 1/0}return t}function eo(e,t="",r){r!==!1&&(t=kt(t));const n=e.parse(t);return to(e,n)}Ie.getFullPath=eo;function to(e,t){return e.serialize(t).split("#")[0]+"#"}Ie._getFullPath=to;const cc=/#\/?$/;function kt(e){return e?e.replace(cc,""):""}Ie.normalizeId=kt;function uc(e,t,r){return r=kt(r),e.resolve(t,r)}Ie.resolveUrl=uc;const lc=/^[a-z_][-a-z0-9._]*$/i;function dc(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=kt(e[r]||t),i={"":s},a=eo(n,s,!1),f={},d=new Set;return sc(e,{allKeys:!0},(g,N,b,P)=>{if(P===void 0)return;const E=a+N;let S=i[P];typeof g[r]=="string"&&(S=v.call(this,g[r])),R.call(this,g.$anchor),R.call(this,g.$dynamicAnchor),i[N]=S;function v(L){const G=this.opts.uriResolver.resolve;if(L=kt(S?G(S,L):L),d.has(L))throw u(L);d.add(L);let F=this.refs[L];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?m(g,F.schema,L):L!==kt(E)&&(L[0]==="#"?(m(g,f[L],L),f[L]=g):this.refs[L]=E),L}function R(L){if(typeof L=="string"){if(!lc.test(L))throw new Error(`invalid anchor "${L}"`);v.call(this,`#${L}`)}}}),f;function m(g,N,b){if(N!==void 0&&!nc(g,N))throw u(b)}function u(g){return new Error(`reference "${g}" resolves to more than one schema`)}}Ie.getSchemaRefs=dc,Object.defineProperty(xe,"__esModule",{value:!0}),xe.getData=xe.KeywordCxt=xe.validateFunctionCode=void 0;const ro=Tt,no=Pe,dn=ot,$r=Pe,fc=mr,Yt=tt,fn=ht,J=se,Q=et,hc=Ie,it=K,Zt=Jt;function pc(e){if(ao(e)&&(co(e),io(e))){$c(e);return}so(e,()=>(0,ro.topBoolOrEmptySchema)(e))}xe.validateFunctionCode=pc;function so({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,J._)`${Q.default.data}, ${Q.default.valCxt}`,n.$async,()=>{e.code((0,J._)`"use strict"; ${oo(r,s)}`),yc(e,s),e.code(i)}):e.func(t,(0,J._)`${Q.default.data}, ${mc(s)}`,n.$async,()=>e.code(oo(r,s)).code(i))}function mc(e){return(0,J._)`{${Q.default.instancePath}="", ${Q.default.parentData}, ${Q.default.parentDataProperty}, ${Q.default.rootData}=${Q.default.data}${e.dynamicRef?(0,J._)`, ${Q.default.dynamicAnchors}={}`:J.nil}}={}`}function yc(e,t){e.if(Q.default.valCxt,()=>{e.var(Q.default.instancePath,(0,J._)`${Q.default.valCxt}.${Q.default.instancePath}`),e.var(Q.default.parentData,(0,J._)`${Q.default.valCxt}.${Q.default.parentData}`),e.var(Q.default.parentDataProperty,(0,J._)`${Q.default.valCxt}.${Q.default.parentDataProperty}`),e.var(Q.default.rootData,(0,J._)`${Q.default.valCxt}.${Q.default.rootData}`),t.dynamicRef&&e.var(Q.default.dynamicAnchors,(0,J._)`${Q.default.valCxt}.${Q.default.dynamicAnchors}`)},()=>{e.var(Q.default.instancePath,(0,J._)`""`),e.var(Q.default.parentData,(0,J._)`undefined`),e.var(Q.default.parentDataProperty,(0,J._)`undefined`),e.var(Q.default.rootData,Q.default.data),t.dynamicRef&&e.var(Q.default.dynamicAnchors,(0,J._)`{}`)})}function $c(e){const{schema:t,opts:r,gen:n}=e;so(e,()=>{r.$comment&&t.$comment&&lo(e),_c(e),n.let(Q.default.vErrors,null),n.let(Q.default.errors,0),r.unevaluated&&gc(e),uo(e),Pc(e)})}function gc(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,J._)`${r}.evaluated`),t.if((0,J._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,J._)`${e.evaluated}.props`,(0,J._)`undefined`)),t.if((0,J._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,J._)`${e.evaluated}.items`,(0,J._)`undefined`))}function oo(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,J._)`/*# sourceURL=${r} */`:J.nil}function vc(e,t){if(ao(e)&&(co(e),io(e))){wc(e,t);return}(0,ro.boolOrEmptySchema)(e,t)}function io({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function ao(e){return typeof e.schema!="boolean"}function wc(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&lo(e),bc(e),Sc(e);const i=n.const("_errs",Q.default.errors);uo(e,i),n.var(t,(0,J._)`${i} === ${Q.default.errors}`)}function co(e){(0,it.checkUnknownRules)(e),Ec(e)}function uo(e,t){if(e.opts.jtd)return fo(e,[],!1,t);const r=(0,no.getSchemaTypes)(e.schema),n=(0,no.coerceAndCheckDataType)(e,r);fo(e,r,!n,t)}function Ec(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,it.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function _c(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,it.checkStrictMode)(e,"default is ignored in the schema root")}function bc(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,hc.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Sc(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function lo({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(s.$comment===!0)e.code((0,J._)`${Q.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const a=(0,J.str)`${n}/$comment`,f=e.scopeValue("root",{ref:t.root});e.code((0,J._)`${Q.default.self}.opts.$comment(${i}, ${a}, ${f}.schema)`)}}function Pc(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,J._)`${Q.default.errors} === 0`,()=>t.return(Q.default.data),()=>t.throw((0,J._)`new ${s}(${Q.default.vErrors})`)):(t.assign((0,J._)`${n}.errors`,Q.default.vErrors),i.unevaluated&&Rc(e),t.return((0,J._)`${Q.default.errors} === 0`))}function Rc({gen:e,evaluated:t,props:r,items:n}){r instanceof J.Name&&e.assign((0,J._)`${t}.props`,r),n instanceof J.Name&&e.assign((0,J._)`${t}.items`,n)}function fo(e,t,r,n){const{gen:s,schema:i,data:a,allErrors:f,opts:d,self:m}=e,{RULES:u}=m;if(i.$ref&&(d.ignoreKeywordsWithRef||!(0,it.schemaHasRulesButRef)(i,u))){s.block(()=>yo(e,"$ref",u.all.$ref.definition));return}d.jtd||Oc(e,t),s.block(()=>{for(const N of u.rules)g(N);g(u.post)});function g(N){(0,dn.shouldUseGroup)(i,N)&&(N.type?(s.if((0,$r.checkDataType)(N.type,a,d.strictNumbers)),ho(e,N),t.length===1&&t[0]===N.type&&r&&(s.else(),(0,$r.reportTypeError)(e)),s.endIf()):ho(e,N),f||s.if((0,J._)`${Q.default.errors} === ${n||0}`))}}function ho(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,fc.assignDefaults)(e,t.type),r.block(()=>{for(const i of t.rules)(0,dn.shouldUseRule)(n,i)&&yo(e,i.keyword,i.definition,t.type)})}function Oc(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Ic(e,t),e.opts.allowUnionTypes||Nc(e,t),jc(e,e.dataTypes))}function Ic(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{po(e.dataTypes,r)||hn(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Cc(e,t)}}function Nc(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&hn(e,"use allowUnionTypes to allow union type keyword")}function jc(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,dn.shouldUseRule)(e.schema,s)){const{type:i}=s.definition;i.length&&!i.some(a=>Tc(t,a))&&hn(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Tc(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function po(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Cc(e,t){const r=[];for(const n of e.dataTypes)po(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function hn(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,it.checkStrictMode)(e,t,e.opts.strictTypes)}class mo{constructor(t,r,n){if((0,Yt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,it.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",$o(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Yt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Q.default.errors))}result(t,r,n){this.failResult((0,J.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,J.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,J._)`${r} !== undefined && (${(0,J.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Zt.reportExtraError:Zt.reportError)(this,this.def.error,r)}$dataError(){(0,Zt.reportError)(this,this.def.$dataError||Zt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Zt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=J.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=J.nil,r=J.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:i,def:a}=this;n.if((0,J.or)((0,J._)`${s} === undefined`,r)),t!==J.nil&&n.assign(t,!0),(i.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==J.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,J.or)(a(),f());function a(){if(n.length){if(!(r instanceof J.Name))throw new Error("ajv implementation error");const d=Array.isArray(n)?n:[n];return(0,J._)`${(0,$r.checkDataTypes)(d,r,i.opts.strictNumbers,$r.DataType.Wrong)}`}return J.nil}function f(){if(s.validateSchema){const d=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,J._)`!${d}(${r})`}return J.nil}}subschema(t,r){const n=(0,fn.getSubschema)(this.it,t);(0,fn.extendSubschemaData)(n,this.it,t),(0,fn.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return vc(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=it.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=it.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,J.Name)),!0}}xe.KeywordCxt=mo;function yo(e,t,r,n){const s=new mo(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Yt.funcKeywordCode)(s,r):"macro"in r?(0,Yt.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Yt.funcKeywordCode)(s,r)}const Ac=/^\/(?:[^~]|~0|~1)*$/,kc=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function $o(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return Q.default.rootData;if(e[0]==="/"){if(!Ac.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=Q.default.rootData}else{const m=kc.exec(e);if(!m)throw new Error(`Invalid JSON-pointer: ${e}`);const u=+m[1];if(s=m[2],s==="#"){if(u>=t)throw new Error(d("property/index",u));return n[t-u]}if(u>t)throw new Error(d("data",u));if(i=r[t-u],!s)return i}let a=i;const f=s.split("/");for(const m of f)m&&(i=(0,J._)`${i}${(0,J.getProperty)((0,it.unescapeJsonPointer)(m))}`,a=(0,J._)`${a} && ${i}`);return a;function d(m,u){return`Cannot access ${m} ${u} levels up, current level is ${t}`}}xe.getData=$o;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});class Dc extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Qt.default=Dc;var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});const pn=Ie;class Lc extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,pn.resolveUrl)(t,r,n),this.missingSchema=(0,pn.normalizeId)((0,pn.getFullPath)(t,this.missingRef))}}Dt.default=Lc;var Le={};Object.defineProperty(Le,"__esModule",{value:!0}),Le.resolveSchema=Le.getCompilingSchema=Le.resolveRef=Le.compileSchema=Le.SchemaEnv=void 0;const Xe=se,Mc=Qt,_t=et,Be=Ie,go=K,Wc=xe;class gr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Be.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}Le.SchemaEnv=gr;function mn(e){const t=vo.call(this,e);if(t)return t;const r=(0,Be.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,a=new Xe.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i});let f;e.$async&&(f=a.scopeValue("Error",{ref:Mc.default,code:(0,Xe._)`require("ajv/dist/runtime/validation_error").default`}));const d=a.scopeName("validate");e.validateName=d;const m={gen:a,allErrors:this.opts.allErrors,data:_t.default.data,parentData:_t.default.parentData,parentDataProperty:_t.default.parentDataProperty,dataNames:[_t.default.data],dataPathArr:[Xe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Xe.stringify)(e.schema)}:{ref:e.schema}),validateName:d,ValidationError:f,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Xe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Xe._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,Wc.validateFunctionCode)(m),a.optimize(this.opts.code.optimize);const g=a.toString();u=`${a.scopeRefs(_t.default.scope)}return ${g}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const b=new Function(`${_t.default.self}`,`${_t.default.scope}`,u)(this,this.scope.get());if(this.scope.value(d,{ref:b}),b.errors=null,b.schema=e.schema,b.schemaEnv=e,e.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:d,validateCode:g,scopeValues:a._values}),this.opts.unevaluated){const{props:P,items:E}=m;b.evaluated={props:P instanceof Xe.Name?void 0:P,items:E instanceof Xe.Name?void 0:E,dynamicProps:P instanceof Xe.Name,dynamicItems:E instanceof Xe.Name},b.source&&(b.source.evaluated=(0,Xe.stringify)(b.evaluated))}return e.validate=b,e}catch(g){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),g}finally{this._compilations.delete(e)}}Le.compileSchema=mn;function zc(e,t,r){var n;r=(0,Be.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let i=Uc.call(this,e,r);if(i===void 0){const a=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:f}=this.opts;a&&(i=new gr({schema:a,schemaId:f,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=Vc.call(this,i)}Le.resolveRef=zc;function Vc(e){return(0,Be.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:mn.call(this,e)}function vo(e){for(const t of this._compilations)if(Hc(t,e))return t}Le.getCompilingSchema=vo;function Hc(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Uc(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||vr.call(this,e,t)}function vr(e,t){const r=this.opts.uriResolver.parse(t),n=(0,Be._getFullPath)(this.opts.uriResolver,r);let s=(0,Be.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return yn.call(this,r,e);const i=(0,Be.normalizeId)(n),a=this.refs[i]||this.schemas[i];if(typeof a=="string"){const f=vr.call(this,e,a);return typeof(f==null?void 0:f.schema)!="object"?void 0:yn.call(this,r,f)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||mn.call(this,a),i===(0,Be.normalizeId)(t)){const{schema:f}=a,{schemaId:d}=this.opts,m=f[d];return m&&(s=(0,Be.resolveUrl)(this.opts.uriResolver,s,m)),new gr({schema:f,schemaId:d,root:e,baseId:s})}return yn.call(this,r,a)}}Le.resolveSchema=vr;const Fc=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function yn(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const f of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const d=r[(0,go.unescapeFragment)(f)];if(d===void 0)return;r=d;const m=typeof r=="object"&&r[this.opts.schemaId];!Fc.has(f)&&m&&(t=(0,Be.resolveUrl)(this.opts.uriResolver,t,m))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,go.schemaHasRulesButRef)(r,this.RULES)){const f=(0,Be.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=vr.call(this,n,f)}const{schemaId:a}=this.opts;if(i=i||new gr({schema:r,schemaId:a,root:n,baseId:t}),i.schema!==i.root.schema)return i}const qc={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var $n={},wr={exports:{}},Gc={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}};const{HEX:Kc}=Gc,xc=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function wo(e){if(bo(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(xc)||[],[r]=t;return r?{host:Bc(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Eo(e,t=!1){let r="",n=!0;for(const s of e){if(Kc[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return t&&r.length===0&&(r="0"),r}function Xc(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let i=!1,a=!1,f=!1;function d(){if(s.length){if(i===!1){const m=Eo(s);if(m!==void 0)n.push(m);else return r.error=!0,!1}s.length=0}return!0}for(let m=0;m<e.length;m++){const u=e[m];if(!(u==="["||u==="]"))if(u===":"){if(a===!0&&(f=!0),!d())break;if(t++,n.push(":"),t>7){r.error=!0;break}m-1>=0&&e[m-1]===":"&&(a=!0);continue}else if(u==="%"){if(!d())break;i=!0}else{s.push(u);continue}}return s.length&&(i?r.zone=s.join(""):f?n.push(s.join("")):n.push(Eo(s))),r.address=n.join(""),r}function _o(e){if(bo(e,":")<2)return{host:e,isIPV6:!1};const t=Xc(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,escapedHost:n,isIPV6:!0}}}function Bc(e,t){let r="",n=!0;const s=e.length;for(let i=0;i<s;i++){const a=e[i];a==="0"&&n?(i+1<=s&&e[i+1]===t||i+1===s)&&(r+=a,n=!1):(a===t?n=!0:n=!1,r+=a)}return r}function bo(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}const So=/^\.\.?\//u,Po=/^\/\.(?:\/|$)/u,Ro=/^\/\.\.(?:\/|$)/u,Jc=/^\/?(?:.|\n)*?(?=\/|$)/u;function Yc(e){const t=[];for(;e.length;)if(e.match(So))e=e.replace(So,"");else if(e.match(Po))e=e.replace(Po,"/");else if(e.match(Ro))e=e.replace(Ro,"/"),t.pop();else if(e==="."||e==="..")e="";else{const r=e.match(Jc);if(r){const n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function Zc(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function Qc(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);const n=wo(r);if(n.isIPV4)r=n.host;else{const s=_o(n.host);s.isIPV6===!0?r=`[${s.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var eu={recomposeAuthority:Qc,normalizeComponentEncoding:Zc,removeDotSegments:Yc,normalizeIPv4:wo,normalizeIPv6:_o};const tu=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,ru=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Oo(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function Io(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function No(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function nu(e){return e.secure=Oo(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function su(e){if((e.port===(Oo(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function ou(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(ru);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${n}:${t.nid||e.nid}`,i=gn[s];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function iu(e,t){const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,i=gn[s];i&&(e=i.serialize(e,t));const a=e,f=e.nss;return a.path=`${n||t.nid}:${f}`,t.skipEscape=!0,a}function au(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!tu.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function cu(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const jo={scheme:"http",domainHost:!0,parse:Io,serialize:No},uu={scheme:"https",domainHost:jo.domainHost,parse:Io,serialize:No},Er={scheme:"ws",domainHost:!0,parse:nu,serialize:su},lu={scheme:"wss",domainHost:Er.domainHost,parse:Er.parse,serialize:Er.serialize},gn={http:jo,https:uu,ws:Er,wss:lu,urn:{scheme:"urn",parse:ou,serialize:iu,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:au,serialize:cu,skipNormalize:!0}};var du=gn;const{normalizeIPv6:fu,normalizeIPv4:hu,removeDotSegments:er,recomposeAuthority:pu,normalizeComponentEncoding:_r}=eu,vn=du;function mu(e,t){return typeof e=="string"?e=nt(at(e,t),t):typeof e=="object"&&(e=at(nt(e,t),t)),e}function yu(e,t,r){const n=Object.assign({scheme:"null"},r),s=To(at(e,n),at(t,n),n,!0);return nt(s,{...n,skipEscape:!0})}function To(e,t,r,n){const s={};return n||(e=at(nt(e,r),r),t=at(nt(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=er(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=er(t.path||""),s.query=t.query):(t.path?(t.path.charAt(0)==="/"?s.path=er(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=er(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function $u(e,t,r){return typeof e=="string"?(e=unescape(e),e=nt(_r(at(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=nt(_r(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=nt(_r(at(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=nt(_r(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function nt(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],i=vn[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");const a=pu(r);if(a!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(a),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let f=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(f=er(f)),a===void 0&&(f=f.replace(/^\/\//u,"/%2F")),s.push(f)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}const gu=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function vu(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||gu[t])return!0;return!1}const wu=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function at(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=e.indexOf("%")!==-1;let i=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const a=e.match(wu);if(a){if(n.scheme=a[1],n.userinfo=a[3],n.host=a[4],n.port=parseInt(a[5],10),n.path=a[6]||"",n.query=a[7],n.fragment=a[8],isNaN(n.port)&&(n.port=a[5]),n.host){const d=hu(n.host);if(d.isIPV4===!1){const m=fu(d.host);n.host=m.host.toLowerCase(),i=m.isIPV6}else n.host=d.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const f=vn[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!f||!f.unicodeSupport)&&n.host&&(r.domainHost||f&&f.domainHost)&&i===!1&&vu(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(d){n.error=n.error||"Host's domain name can not be converted to ASCII: "+d}(!f||f&&!f.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),f&&f.parse&&f.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const wn={SCHEMES:vn,normalize:mu,resolve:yu,resolveComponents:To,equal:$u,serialize:nt,parse:at};wr.exports=wn,wr.exports.default=wn,wr.exports.fastUri=wn;var Eu=wr.exports;Object.defineProperty($n,"__esModule",{value:!0});const Co=Eu;Co.code='require("ajv/dist/runtime/uri").default',$n.default=Co,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=xe;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=se;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Qt,s=Dt,i=wt,a=Le,f=se,d=Ie,m=Pe,u=K,g=qc,N=$n,b=(k,w)=>new RegExp(k,w);b.code="new RegExp";const P=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),S={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},R=200;function L(k){var w,I,_,l,y,j,B,X,ae,ie,be,Ve,ut,qt,Rt,lt,Gt,Kt,xt,$t,dr,fr,dt,Xt,we;const Ot=k.strict,gt=(w=k.code)===null||w===void 0?void 0:w.optimize,je=gt===!0||gt===void 0?1:gt||0,hr=(_=(I=k.code)===null||I===void 0?void 0:I.regExp)!==null&&_!==void 0?_:b,Xr=(l=k.uriResolver)!==null&&l!==void 0?l:N.default;return{strictSchema:(j=(y=k.strictSchema)!==null&&y!==void 0?y:Ot)!==null&&j!==void 0?j:!0,strictNumbers:(X=(B=k.strictNumbers)!==null&&B!==void 0?B:Ot)!==null&&X!==void 0?X:!0,strictTypes:(ie=(ae=k.strictTypes)!==null&&ae!==void 0?ae:Ot)!==null&&ie!==void 0?ie:"log",strictTuples:(Ve=(be=k.strictTuples)!==null&&be!==void 0?be:Ot)!==null&&Ve!==void 0?Ve:"log",strictRequired:(qt=(ut=k.strictRequired)!==null&&ut!==void 0?ut:Ot)!==null&&qt!==void 0?qt:!1,code:k.code?{...k.code,optimize:je,regExp:hr}:{optimize:je,regExp:hr},loopRequired:(Rt=k.loopRequired)!==null&&Rt!==void 0?Rt:R,loopEnum:(lt=k.loopEnum)!==null&&lt!==void 0?lt:R,meta:(Gt=k.meta)!==null&&Gt!==void 0?Gt:!0,messages:(Kt=k.messages)!==null&&Kt!==void 0?Kt:!0,inlineRefs:(xt=k.inlineRefs)!==null&&xt!==void 0?xt:!0,schemaId:($t=k.schemaId)!==null&&$t!==void 0?$t:"$id",addUsedSchema:(dr=k.addUsedSchema)!==null&&dr!==void 0?dr:!0,validateSchema:(fr=k.validateSchema)!==null&&fr!==void 0?fr:!0,validateFormats:(dt=k.validateFormats)!==null&&dt!==void 0?dt:!0,unicodeRegExp:(Xt=k.unicodeRegExp)!==null&&Xt!==void 0?Xt:!0,int32range:(we=k.int32range)!==null&&we!==void 0?we:!0,uriResolver:Xr}}class G{constructor(w={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,w=this.opts={...w,...L(w)};const{es5:I,lines:_}=this.opts.code;this.scope=new f.ValueScope({scope:{},prefixes:E,es5:I,lines:_}),this.logger=We(w.logger);const l=w.validateFormats;w.validateFormats=!1,this.RULES=(0,i.getRules)(),F.call(this,S,w,"NOT SUPPORTED"),F.call(this,v,w,"DEPRECATED","warn"),this._metaOpts=Qe.call(this),w.formats&&Ce.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),w.keywords&&He.call(this,w.keywords),typeof w.meta=="object"&&this.addMetaSchema(w.meta),de.call(this),w.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:w,meta:I,schemaId:_}=this.opts;let l=g;_==="id"&&(l={...g},l.id=l.$id,delete l.$id),I&&w&&this.addMetaSchema(l,l[_],!1)}defaultMeta(){const{meta:w,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof w=="object"?w[I]||w:void 0}validate(w,I){let _;if(typeof w=="string"){if(_=this.getSchema(w),!_)throw new Error(`no schema with key or ref "${w}"`)}else _=this.compile(w);const l=_(I);return"$async"in _||(this.errors=_.errors),l}compile(w,I){const _=this._addSchema(w,I);return _.validate||this._compileSchemaEnv(_)}compileAsync(w,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:_}=this.opts;return l.call(this,w,I);async function l(ie,be){await y.call(this,ie.$schema);const Ve=this._addSchema(ie,be);return Ve.validate||j.call(this,Ve)}async function y(ie){ie&&!this.getSchema(ie)&&await l.call(this,{$ref:ie},!0)}async function j(ie){try{return this._compileSchemaEnv(ie)}catch(be){if(!(be instanceof s.default))throw be;return B.call(this,be),await X.call(this,be.missingSchema),j.call(this,ie)}}function B({missingSchema:ie,missingRef:be}){if(this.refs[ie])throw new Error(`AnySchema ${ie} is loaded but ${be} cannot be resolved`)}async function X(ie){const be=await ae.call(this,ie);this.refs[ie]||await y.call(this,be.$schema),this.refs[ie]||this.addSchema(be,ie,I)}async function ae(ie){const be=this._loading[ie];if(be)return be;try{return await(this._loading[ie]=_(ie))}finally{delete this._loading[ie]}}}addSchema(w,I,_,l=this.opts.validateSchema){if(Array.isArray(w)){for(const j of w)this.addSchema(j,void 0,_,l);return this}let y;if(typeof w=="object"){const{schemaId:j}=this.opts;if(y=w[j],y!==void 0&&typeof y!="string")throw new Error(`schema ${j} must be string`)}return I=(0,d.normalizeId)(I||y),this._checkUnique(I),this.schemas[I]=this._addSchema(w,_,I,l,!0),this}addMetaSchema(w,I,_=this.opts.validateSchema){return this.addSchema(w,I,!0,_),this}validateSchema(w,I){if(typeof w=="boolean")return!0;let _;if(_=w.$schema,_!==void 0&&typeof _!="string")throw new Error("$schema must be a string");if(_=_||this.opts.defaultMeta||this.defaultMeta(),!_)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(_,w);if(!l&&I){const y="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(y);else throw new Error(y)}return l}getSchema(w){let I;for(;typeof(I=ue.call(this,w))=="string";)w=I;if(I===void 0){const{schemaId:_}=this.opts,l=new a.SchemaEnv({schema:{},schemaId:_});if(I=a.resolveSchema.call(this,l,w),!I)return;this.refs[w]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(w){if(w instanceof RegExp)return this._removeAllSchemas(this.schemas,w),this._removeAllSchemas(this.refs,w),this;switch(typeof w){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const I=ue.call(this,w);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[w],delete this.refs[w],this}case"object":{const I=w;this._cache.delete(I);let _=w[this.opts.schemaId];return _&&(_=(0,d.normalizeId)(_),delete this.schemas[_],delete this.refs[_]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(w){for(const I of w)this.addKeyword(I);return this}addKeyword(w,I){let _;if(typeof w=="string")_=w,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=_);else if(typeof w=="object"&&I===void 0){if(I=w,_=I.keyword,Array.isArray(_)&&!_.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,_,I),!I)return(0,u.eachItem)(_,y=>M.call(this,y)),this;x.call(this,I);const l={...I,type:(0,m.getJSONTypes)(I.type),schemaType:(0,m.getJSONTypes)(I.schemaType)};return(0,u.eachItem)(_,l.type.length===0?y=>M.call(this,y,l):y=>l.type.forEach(j=>M.call(this,y,l,j))),this}getKeyword(w){const I=this.RULES.all[w];return typeof I=="object"?I.definition:!!I}removeKeyword(w){const{RULES:I}=this;delete I.keywords[w],delete I.all[w];for(const _ of I.rules){const l=_.rules.findIndex(y=>y.keyword===w);l>=0&&_.rules.splice(l,1)}return this}addFormat(w,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[w]=I,this}errorsText(w=this.errors,{separator:I=", ",dataVar:_="data"}={}){return!w||w.length===0?"No errors":w.map(l=>`${_}${l.instancePath} ${l.message}`).reduce((l,y)=>l+I+y)}$dataMetaSchema(w,I){const _=this.RULES.all;w=JSON.parse(JSON.stringify(w));for(const l of I){const y=l.split("/").slice(1);let j=w;for(const B of y)j=j[B];for(const B in _){const X=_[B];if(typeof X!="object")continue;const{$data:ae}=X.definition,ie=j[B];ae&&ie&&(j[B]=W(ie))}}return w}_removeAllSchemas(w,I){for(const _ in w){const l=w[_];(!I||I.test(_))&&(typeof l=="string"?delete w[_]:l&&!l.meta&&(this._cache.delete(l.schema),delete w[_]))}}_addSchema(w,I,_,l=this.opts.validateSchema,y=this.opts.addUsedSchema){let j;const{schemaId:B}=this.opts;if(typeof w=="object")j=w[B];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof w!="boolean")throw new Error("schema must be object or boolean")}let X=this._cache.get(w);if(X!==void 0)return X;_=(0,d.normalizeId)(j||_);const ae=d.getSchemaRefs.call(this,w,_);return X=new a.SchemaEnv({schema:w,schemaId:B,meta:I,baseId:_,localRefs:ae}),this._cache.set(X.schema,X),y&&!_.startsWith("#")&&(_&&this._checkUnique(_),this.refs[_]=X),l&&this.validateSchema(w,!0),X}_checkUnique(w){if(this.schemas[w]||this.refs[w])throw new Error(`schema with key or id "${w}" already exists`)}_compileSchemaEnv(w){if(w.meta?this._compileMetaSchema(w):a.compileSchema.call(this,w),!w.validate)throw new Error("ajv implementation error");return w.validate}_compileMetaSchema(w){const I=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,w)}finally{this.opts=I}}}G.ValidationError=n.default,G.MissingRefError=s.default,e.default=G;function F(k,w,I,_="error"){for(const l in k){const y=l;y in w&&this.logger[_](`${I}: option ${l}. ${k[y]}`)}}function ue(k){return k=(0,d.normalizeId)(k),this.schemas[k]||this.refs[k]}function de(){const k=this.opts.schemas;if(k)if(Array.isArray(k))this.addSchema(k);else for(const w in k)this.addSchema(k[w],w)}function Ce(){for(const k in this.opts.formats){const w=this.opts.formats[k];w&&this.addFormat(k,w)}}function He(k){if(Array.isArray(k)){this.addVocabulary(k);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const w in k){const I=k[w];I.keyword||(I.keyword=w),this.addKeyword(I)}}function Qe(){const k={...this.opts};for(const w of P)delete k[w];return k}const De={log(){},warn(){},error(){}};function We(k){if(k===!1)return De;if(k===void 0)return console;if(k.log&&k.warn&&k.error)return k;throw new Error("logger must implement log, warn and error methods")}const ze=/^[a-z_$][a-z0-9_$:-]*$/i;function U(k,w){const{RULES:I}=this;if((0,u.eachItem)(k,_=>{if(I.keywords[_])throw new Error(`Keyword ${_} is already defined`);if(!ze.test(_))throw new Error(`Keyword ${_} has invalid name`)}),!!w&&w.$data&&!("code"in w||"validate"in w))throw new Error('$data keyword must have "code" or "validate" function')}function M(k,w,I){var _;const l=w==null?void 0:w.post;if(I&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:y}=this;let j=l?y.post:y.rules.find(({type:X})=>X===I);if(j||(j={type:I,rules:[]},y.rules.push(j)),y.keywords[k]=!0,!w)return;const B={keyword:k,definition:{...w,type:(0,m.getJSONTypes)(w.type),schemaType:(0,m.getJSONTypes)(w.schemaType)}};w.before?Z.call(this,j,B,w.before):j.rules.push(B),y.all[k]=B,(_=w.implements)===null||_===void 0||_.forEach(X=>this.addKeyword(X))}function Z(k,w,I){const _=k.rules.findIndex(l=>l.keyword===I);_>=0?k.rules.splice(_,0,w):(k.rules.push(w),this.logger.warn(`rule ${I} is not defined`))}function x(k){let{metaSchema:w}=k;w!==void 0&&(k.$data&&this.opts.$data&&(w=W(w)),k.validateSchema=this.compile(w,!0))}const Y={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function W(k){return{anyOf:[k,Y]}}}(Ts);var En={},_n={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});const _u={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};bn.default=_u;var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.callRef=bt.getValidate=void 0;const bu=Dt,Ao=oe,Me=se,Lt=et,ko=Le,br=K,Su={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:i,validateName:a,opts:f,self:d}=n,{root:m}=i;if((r==="#"||r==="#/")&&s===m.baseId)return g();const u=ko.resolveRef.call(d,m,s,r);if(u===void 0)throw new bu.default(n.opts.uriResolver,s,r);if(u instanceof ko.SchemaEnv)return N(u);return b(u);function g(){if(i===m)return Sr(e,a,i,i.$async);const P=t.scopeValue("root",{ref:m});return Sr(e,(0,Me._)`${P}.validate`,m,m.$async)}function N(P){const E=Do(e,P);Sr(e,E,P,P.$async)}function b(P){const E=t.scopeValue("schema",f.code.source===!0?{ref:P,code:(0,Me.stringify)(P)}:{ref:P}),S=t.name("valid"),v=e.subschema({schema:P,dataTypes:[],schemaPath:Me.nil,topSchemaRef:E,errSchemaPath:r},S);e.mergeEvaluated(v),e.ok(S)}}};function Do(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Me._)`${r.scopeValue("wrapper",{ref:t})}.validate`}bt.getValidate=Do;function Sr(e,t,r,n){const{gen:s,it:i}=e,{allErrors:a,schemaEnv:f,opts:d}=i,m=d.passContext?Lt.default.this:Me.nil;n?u():g();function u(){if(!f.$async)throw new Error("async schema referenced by sync schema");const P=s.let("valid");s.try(()=>{s.code((0,Me._)`await ${(0,Ao.callValidateCode)(e,t,m)}`),b(t),a||s.assign(P,!0)},E=>{s.if((0,Me._)`!(${E} instanceof ${i.ValidationError})`,()=>s.throw(E)),N(E),a||s.assign(P,!1)}),e.ok(P)}function g(){e.result((0,Ao.callValidateCode)(e,t,m),()=>b(t),()=>N(t))}function N(P){const E=(0,Me._)`${P}.errors`;s.assign(Lt.default.vErrors,(0,Me._)`${Lt.default.vErrors} === null ? ${E} : ${Lt.default.vErrors}.concat(${E})`),s.assign(Lt.default.errors,(0,Me._)`${Lt.default.vErrors}.length`)}function b(P){var E;if(!i.opts.unevaluated)return;const S=(E=r==null?void 0:r.validate)===null||E===void 0?void 0:E.evaluated;if(i.props!==!0)if(S&&!S.dynamicProps)S.props!==void 0&&(i.props=br.mergeEvaluated.props(s,S.props,i.props));else{const v=s.var("props",(0,Me._)`${P}.evaluated.props`);i.props=br.mergeEvaluated.props(s,v,i.props,Me.Name)}if(i.items!==!0)if(S&&!S.dynamicItems)S.items!==void 0&&(i.items=br.mergeEvaluated.items(s,S.items,i.items));else{const v=s.var("items",(0,Me._)`${P}.evaluated.items`);i.items=br.mergeEvaluated.items(s,v,i.items,Me.Name)}}}bt.callRef=Sr,bt.default=Su,Object.defineProperty(_n,"__esModule",{value:!0});const Pu=bn,Ru=bt,Ou=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Pu.default,Ru.default];_n.default=Ou;var Sn={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});const Pr=se,mt=Pr.operators,Rr={maximum:{okStr:"<=",ok:mt.LTE,fail:mt.GT},minimum:{okStr:">=",ok:mt.GTE,fail:mt.LT},exclusiveMaximum:{okStr:"<",ok:mt.LT,fail:mt.GTE},exclusiveMinimum:{okStr:">",ok:mt.GT,fail:mt.LTE}},Iu={message:({keyword:e,schemaCode:t})=>(0,Pr.str)`must be ${Rr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Pr._)`{comparison: ${Rr[e].okStr}, limit: ${t}}`},Nu={keyword:Object.keys(Rr),type:"number",schemaType:"number",$data:!0,error:Iu,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Pr._)`${r} ${Rr[t].fail} ${n} || isNaN(${r})`)}};Pn.default=Nu;var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});const tr=se,ju={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>(0,tr.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,tr._)`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,i=s.opts.multipleOfPrecision,a=t.let("res"),f=i?(0,tr._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${i}`:(0,tr._)`${a} !== parseInt(${a})`;e.fail$data((0,tr._)`(${n} === 0 || (${a} = ${r}/${n}, ${f}))`)}};Rn.default=ju;var On={},In={};Object.defineProperty(In,"__esModule",{value:!0});function Lo(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}In.default=Lo,Lo.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(On,"__esModule",{value:!0});const St=se,Tu=K,Cu=In,Au={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,St.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,St._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,i=t==="maxLength"?St.operators.GT:St.operators.LT,a=s.opts.unicode===!1?(0,St._)`${r}.length`:(0,St._)`${(0,Tu.useFunc)(e.gen,Cu.default)}(${r})`;e.fail$data((0,St._)`${a} ${i} ${n}`)}};On.default=Au;var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});const ku=oe,Or=se,Du={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,Or.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Or._)`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:i}=e,a=i.opts.unicodeRegExp?"u":"",f=r?(0,Or._)`(new RegExp(${s}, ${a}))`:(0,ku.usePattern)(e,n);e.fail$data((0,Or._)`!${f}.test(${t})`)}};Nn.default=Du;var jn={};Object.defineProperty(jn,"__esModule",{value:!0});const rr=se,Lu={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,rr.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,rr._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?rr.operators.GT:rr.operators.LT;e.fail$data((0,rr._)`Object.keys(${r}).length ${s} ${n}`)}};jn.default=Lu;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});const nr=oe,sr=se,Mu=K,Wu={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>(0,sr.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,sr._)`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:i,it:a}=e,{opts:f}=a;if(!i&&r.length===0)return;const d=r.length>=f.loopRequired;if(a.allErrors?m():u(),f.strictRequired){const b=e.parentSchema.properties,{definedProperties:P}=e.it;for(const E of r)if((b==null?void 0:b[E])===void 0&&!P.has(E)){const S=a.schemaEnv.baseId+a.errSchemaPath,v=`required property "${E}" is not defined at "${S}" (strictRequired)`;(0,Mu.checkStrictMode)(a,v,a.opts.strictRequired)}}function m(){if(d||i)e.block$data(sr.nil,g);else for(const b of r)(0,nr.checkReportMissingProp)(e,b)}function u(){const b=t.let("missing");if(d||i){const P=t.let("valid",!0);e.block$data(P,()=>N(b,P)),e.ok(P)}else t.if((0,nr.checkMissingProp)(e,r,b)),(0,nr.reportMissingProp)(e,b),t.else()}function g(){t.forOf("prop",n,b=>{e.setParams({missingProperty:b}),t.if((0,nr.noPropertyInData)(t,s,b,f.ownProperties),()=>e.error())})}function N(b,P){e.setParams({missingProperty:b}),t.forOf(b,n,()=>{t.assign(P,(0,nr.propertyInData)(t,s,b,f.ownProperties)),t.if((0,sr.not)(P),()=>{e.error(),t.break()})},sr.nil)}}};Tn.default=Wu;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});const or=se,zu={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,or.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,or._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?or.operators.GT:or.operators.LT;e.fail$data((0,or._)`${r}.length ${s} ${n}`)}};Cn.default=zu;var An={},ir={};Object.defineProperty(ir,"__esModule",{value:!0});const Mo=Ys;Mo.code='require("ajv/dist/runtime/equal").default',ir.default=Mo,Object.defineProperty(An,"__esModule",{value:!0});const kn=Pe,Ne=se,Vu=K,Hu=ir,Uu={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>(0,Ne.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ne._)`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:i,schemaCode:a,it:f}=e;if(!n&&!s)return;const d=t.let("valid"),m=i.items?(0,kn.getSchemaTypes)(i.items):[];e.block$data(d,u,(0,Ne._)`${a} === false`),e.ok(d);function u(){const P=t.let("i",(0,Ne._)`${r}.length`),E=t.let("j");e.setParams({i:P,j:E}),t.assign(d,!0),t.if((0,Ne._)`${P} > 1`,()=>(g()?N:b)(P,E))}function g(){return m.length>0&&!m.some(P=>P==="object"||P==="array")}function N(P,E){const S=t.name("item"),v=(0,kn.checkDataTypes)(m,S,f.opts.strictNumbers,kn.DataType.Wrong),R=t.const("indices",(0,Ne._)`{}`);t.for((0,Ne._)`;${P}--;`,()=>{t.let(S,(0,Ne._)`${r}[${P}]`),t.if(v,(0,Ne._)`continue`),m.length>1&&t.if((0,Ne._)`typeof ${S} == "string"`,(0,Ne._)`${S} += "_"`),t.if((0,Ne._)`typeof ${R}[${S}] == "number"`,()=>{t.assign(E,(0,Ne._)`${R}[${S}]`),e.error(),t.assign(d,!1).break()}).code((0,Ne._)`${R}[${S}] = ${P}`)})}function b(P,E){const S=(0,Vu.useFunc)(t,Hu.default),v=t.name("outer");t.label(v).for((0,Ne._)`;${P}--;`,()=>t.for((0,Ne._)`${E} = ${P}; ${E}--;`,()=>t.if((0,Ne._)`${S}(${r}[${P}], ${r}[${E}])`,()=>{e.error(),t.assign(d,!1).break(v)})))}}};An.default=Uu;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});const Ln=se,Fu=K,qu=ir,Gu={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>(0,Ln._)`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,Ln._)`!${(0,Fu.useFunc)(t,qu.default)}(${r}, ${s})`):e.fail((0,Ln._)`${i} !== ${r}`)}};Dn.default=Gu;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});const ar=se,Ku=K,xu=ir,Xu={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,ar._)`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:i,it:a}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const f=s.length>=a.opts.loopEnum;let d;const m=()=>d??(d=(0,Ku.useFunc)(t,xu.default));let u;if(f||n)u=t.let("valid"),e.block$data(u,g);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const b=t.const("vSchema",i);u=(0,ar.or)(...s.map((P,E)=>N(b,E)))}e.pass(u);function g(){t.assign(u,!1),t.forOf("v",i,b=>t.if((0,ar._)`${m()}(${r}, ${b})`,()=>t.assign(u,!0).break()))}function N(b,P){const E=s[P];return typeof E=="object"&&E!==null?(0,ar._)`${m()}(${r}, ${b}[${P}])`:(0,ar._)`${r} === ${E}`}}};Mn.default=Xu,Object.defineProperty(Sn,"__esModule",{value:!0});const Bu=Pn,Ju=Rn,Yu=On,Zu=Nn,Qu=jn,el=Tn,tl=Cn,rl=An,nl=Dn,sl=Mn,ol=[Bu.default,Ju.default,Yu.default,Zu.default,Qu.default,el.default,tl.default,rl.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},nl.default,sl.default];Sn.default=ol;var Wn={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.validateAdditionalItems=void 0;const Pt=se,zn=K,il={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,Pt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Pt._)`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,zn.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Wo(e,n)}};function Wo(e,t){const{gen:r,schema:n,data:s,keyword:i,it:a}=e;a.items=!0;const f=r.const("len",(0,Pt._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,Pt._)`${f} <= ${t.length}`);else if(typeof n=="object"&&!(0,zn.alwaysValidSchema)(a,n)){const m=r.var("valid",(0,Pt._)`${f} <= ${t.length}`);r.if((0,Pt.not)(m),()=>d(m)),e.ok(m)}function d(m){r.forRange("i",t.length,f,u=>{e.subschema({keyword:i,dataProp:u,dataPropType:zn.Type.Num},m),a.allErrors||r.if((0,Pt.not)(m),()=>r.break())})}}Mt.validateAdditionalItems=Wo,Mt.default=il;var Vn={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.validateTuple=void 0;const zo=se,Ir=K,al=oe,cl={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Vo(e,"additionalItems",t);r.items=!0,!(0,Ir.alwaysValidSchema)(r,t)&&e.ok((0,al.validateArray)(e))}};function Vo(e,t,r=e.schema){const{gen:n,parentSchema:s,data:i,keyword:a,it:f}=e;u(s),f.opts.unevaluated&&r.length&&f.items!==!0&&(f.items=Ir.mergeEvaluated.items(n,r.length,f.items));const d=n.name("valid"),m=n.const("len",(0,zo._)`${i}.length`);r.forEach((g,N)=>{(0,Ir.alwaysValidSchema)(f,g)||(n.if((0,zo._)`${m} > ${N}`,()=>e.subschema({keyword:a,schemaProp:N,dataProp:N},d)),e.ok(d))});function u(g){const{opts:N,errSchemaPath:b}=f,P=r.length,E=P===g.minItems&&(P===g.maxItems||g[t]===!1);if(N.strictTuples&&!E){const S=`"${a}" is ${P}-tuple, but minItems or maxItems/${t} are not specified or different at path "${b}"`;(0,Ir.checkStrictMode)(f,S,N.strictTuples)}}}Wt.validateTuple=Vo,Wt.default=cl,Object.defineProperty(Vn,"__esModule",{value:!0});const ul=Wt,ll={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,ul.validateTuple)(e,"items")};Vn.default=ll;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const Ho=se,dl=K,fl=oe,hl=Mt,pl={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,Ho.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ho._)`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,dl.alwaysValidSchema)(n,t)&&(s?(0,hl.validateAdditionalItems)(e,s):e.ok((0,fl.validateArray)(e)))}};Hn.default=pl;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});const Ge=se,Nr=K,ml={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>t===void 0?(0,Ge.str)`must contain at least ${e} valid item(s)`:(0,Ge.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ge._)`{minContains: ${e}}`:(0,Ge._)`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;let a,f;const{minContains:d,maxContains:m}=n;i.opts.next?(a=d===void 0?1:d,f=m):a=1;const u=t.const("len",(0,Ge._)`${s}.length`);if(e.setParams({min:a,max:f}),f===void 0&&a===0){(0,Nr.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&a>f){(0,Nr.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Nr.alwaysValidSchema)(i,r)){let E=(0,Ge._)`${u} >= ${a}`;f!==void 0&&(E=(0,Ge._)`${E} && ${u} <= ${f}`),e.pass(E);return}i.items=!0;const g=t.name("valid");f===void 0&&a===1?b(g,()=>t.if(g,()=>t.break())):a===0?(t.let(g,!0),f!==void 0&&t.if((0,Ge._)`${s}.length > 0`,N)):(t.let(g,!1),N()),e.result(g,()=>e.reset());function N(){const E=t.name("_valid"),S=t.let("count",0);b(E,()=>t.if(E,()=>P(S)))}function b(E,S){t.forRange("i",0,u,v=>{e.subschema({keyword:"contains",dataProp:v,dataPropType:Nr.Type.Num,compositeRule:!0},E),S()})}function P(E){t.code((0,Ge._)`${E}++`),f===void 0?t.if((0,Ge._)`${E} >= ${a}`,()=>t.assign(g,!0).break()):(t.if((0,Ge._)`${E} > ${f}`,()=>t.assign(g,!1).break()),a===1?t.assign(g,!0):t.if((0,Ge._)`${E} >= ${a}`,()=>t.assign(g,!0)))}}};Un.default=ml;var Uo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=se,r=K,n=oe;e.error={message:({params:{property:d,depsCount:m,deps:u}})=>{const g=m===1?"property":"properties";return(0,t.str)`must have ${g} ${u} when property ${d} is present`},params:({params:{property:d,depsCount:m,deps:u,missingProperty:g}})=>(0,t._)`{property: ${d},
    missingProperty: ${g},
    depsCount: ${m},
    deps: ${u}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(d){const[m,u]=i(d);a(d,m),f(d,u)}};function i({schema:d}){const m={},u={};for(const g in d){if(g==="__proto__")continue;const N=Array.isArray(d[g])?m:u;N[g]=d[g]}return[m,u]}function a(d,m=d.schema){const{gen:u,data:g,it:N}=d;if(Object.keys(m).length===0)return;const b=u.let("missing");for(const P in m){const E=m[P];if(E.length===0)continue;const S=(0,n.propertyInData)(u,g,P,N.opts.ownProperties);d.setParams({property:P,depsCount:E.length,deps:E.join(", ")}),N.allErrors?u.if(S,()=>{for(const v of E)(0,n.checkReportMissingProp)(d,v)}):(u.if((0,t._)`${S} && (${(0,n.checkMissingProp)(d,E,b)})`),(0,n.reportMissingProp)(d,b),u.else())}}e.validatePropertyDeps=a;function f(d,m=d.schema){const{gen:u,data:g,keyword:N,it:b}=d,P=u.name("valid");for(const E in m)(0,r.alwaysValidSchema)(b,m[E])||(u.if((0,n.propertyInData)(u,g,E,b.opts.ownProperties),()=>{const S=d.subschema({keyword:N,schemaProp:E},P);d.mergeValidEvaluated(S,P)},()=>u.var(P,!0)),d.ok(P))}e.validateSchemaDeps=f,e.default=s})(Uo);var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});const Fo=se,yl=K,$l={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>(0,Fo._)`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,yl.alwaysValidSchema)(s,r))return;const i=t.name("valid");t.forIn("key",n,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},i),t.if((0,Fo.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};Fn.default=$l;var jr={};Object.defineProperty(jr,"__esModule",{value:!0});const Tr=oe,Je=se,gl=et,Cr=K,vl={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>(0,Je._)`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:a}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:f,opts:d}=a;if(a.props=!0,d.removeAdditional!=="all"&&(0,Cr.alwaysValidSchema)(a,r))return;const m=(0,Tr.allSchemaProperties)(n.properties),u=(0,Tr.allSchemaProperties)(n.patternProperties);g(),e.ok((0,Je._)`${i} === ${gl.default.errors}`);function g(){t.forIn("key",s,S=>{!m.length&&!u.length?P(S):t.if(N(S),()=>P(S))})}function N(S){let v;if(m.length>8){const R=(0,Cr.schemaRefOrVal)(a,n.properties,"properties");v=(0,Tr.isOwnProperty)(t,R,S)}else m.length?v=(0,Je.or)(...m.map(R=>(0,Je._)`${S} === ${R}`)):v=Je.nil;return u.length&&(v=(0,Je.or)(v,...u.map(R=>(0,Je._)`${(0,Tr.usePattern)(e,R)}.test(${S})`))),(0,Je.not)(v)}function b(S){t.code((0,Je._)`delete ${s}[${S}]`)}function P(S){if(d.removeAdditional==="all"||d.removeAdditional&&r===!1){b(S);return}if(r===!1){e.setParams({additionalProperty:S}),e.error(),f||t.break();return}if(typeof r=="object"&&!(0,Cr.alwaysValidSchema)(a,r)){const v=t.name("valid");d.removeAdditional==="failing"?(E(S,v,!1),t.if((0,Je.not)(v),()=>{e.reset(),b(S)})):(E(S,v),f||t.if((0,Je.not)(v),()=>t.break()))}}function E(S,v,R){const L={keyword:"additionalProperties",dataProp:S,dataPropType:Cr.Type.Str};R===!1&&Object.assign(L,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(L,v)}}};jr.default=vl;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});const wl=xe,qo=oe,Gn=K,Go=jr,El={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Go.default.code(new wl.KeywordCxt(i,Go.default,"additionalProperties"));const a=(0,qo.allSchemaProperties)(r);for(const g of a)i.definedProperties.add(g);i.opts.unevaluated&&a.length&&i.props!==!0&&(i.props=Gn.mergeEvaluated.props(t,(0,Gn.toHash)(a),i.props));const f=a.filter(g=>!(0,Gn.alwaysValidSchema)(i,r[g]));if(f.length===0)return;const d=t.name("valid");for(const g of f)m(g)?u(g):(t.if((0,qo.propertyInData)(t,s,g,i.opts.ownProperties)),u(g),i.allErrors||t.else().var(d,!0),t.endIf()),e.it.definedProperties.add(g),e.ok(d);function m(g){return i.opts.useDefaults&&!i.compositeRule&&r[g].default!==void 0}function u(g){e.subschema({keyword:"properties",schemaProp:g,dataProp:g},d)}}};qn.default=El;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});const Ko=oe,Ar=se,xo=K,Xo=K,_l={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:i}=e,{opts:a}=i,f=(0,Ko.allSchemaProperties)(r),d=f.filter(E=>(0,xo.alwaysValidSchema)(i,r[E]));if(f.length===0||d.length===f.length&&(!i.opts.unevaluated||i.props===!0))return;const m=a.strictSchema&&!a.allowMatchingProperties&&s.properties,u=t.name("valid");i.props!==!0&&!(i.props instanceof Ar.Name)&&(i.props=(0,Xo.evaluatedPropsToName)(t,i.props));const{props:g}=i;N();function N(){for(const E of f)m&&b(E),i.allErrors?P(E):(t.var(u,!0),P(E),t.if(u))}function b(E){for(const S in m)new RegExp(E).test(S)&&(0,xo.checkStrictMode)(i,`property ${S} matches pattern ${E} (use allowMatchingProperties)`)}function P(E){t.forIn("key",n,S=>{t.if((0,Ar._)`${(0,Ko.usePattern)(e,E)}.test(${S})`,()=>{const v=d.includes(E);v||e.subschema({keyword:"patternProperties",schemaProp:E,dataProp:S,dataPropType:Xo.Type.Str},u),i.opts.unevaluated&&g!==!0?t.assign((0,Ar._)`${g}[${S}]`,!0):!v&&!i.allErrors&&t.if((0,Ar.not)(u),()=>t.break())})})}}};Kn.default=_l;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});const bl=K,Sl={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,bl.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};xn.default=Sl;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});const Pl={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:oe.validateUnion,error:{message:"must match a schema in anyOf"}};Xn.default=Pl;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});const kr=se,Rl=K,Ol={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>(0,kr._)`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const i=r,a=t.let("valid",!1),f=t.let("passing",null),d=t.name("_valid");e.setParams({passing:f}),t.block(m),e.result(a,()=>e.reset(),()=>e.error(!0));function m(){i.forEach((u,g)=>{let N;(0,Rl.alwaysValidSchema)(s,u)?t.var(d,!0):N=e.subschema({keyword:"oneOf",schemaProp:g,compositeRule:!0},d),g>0&&t.if((0,kr._)`${d} && ${a}`).assign(a,!1).assign(f,(0,kr._)`[${f}, ${g}]`).else(),t.if(d,()=>{t.assign(a,!0),t.assign(f,g),N&&e.mergeEvaluated(N,kr.Name)})})}}};Bn.default=Ol;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});const Il=K,Nl={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((i,a)=>{if((0,Il.alwaysValidSchema)(n,i))return;const f=e.subschema({keyword:"allOf",schemaProp:a},s);e.ok(s),e.mergeEvaluated(f)})}};Jn.default=Nl;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});const Dr=se,Bo=K,jl={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>(0,Dr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Dr._)`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,Bo.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=Jo(n,"then"),i=Jo(n,"else");if(!s&&!i)return;const a=t.let("valid",!0),f=t.name("_valid");if(d(),e.reset(),s&&i){const u=t.let("ifClause");e.setParams({ifClause:u}),t.if(f,m("then",u),m("else",u))}else s?t.if(f,m("then")):t.if((0,Dr.not)(f),m("else"));e.pass(a,()=>e.error(!0));function d(){const u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},f);e.mergeEvaluated(u)}function m(u,g){return()=>{const N=e.subschema({keyword:u},f);t.assign(a,f),e.mergeValidEvaluated(N,a),g?t.assign(g,(0,Dr._)`${u}`):e.setParams({ifClause:u})}}}};function Jo(e,t){const r=e.schema[t];return r!==void 0&&!(0,Bo.alwaysValidSchema)(e,r)}Yn.default=jl;var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});const Tl=K,Cl={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Tl.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Zn.default=Cl,Object.defineProperty(Wn,"__esModule",{value:!0});const Al=Mt,kl=Vn,Dl=Wt,Ll=Hn,Ml=Un,Wl=Uo,zl=Fn,Vl=jr,Hl=qn,Ul=Kn,Fl=xn,ql=Xn,Gl=Bn,Kl=Jn,xl=Yn,Xl=Zn;function Bl(e=!1){const t=[Fl.default,ql.default,Gl.default,Kl.default,xl.default,Xl.default,zl.default,Vl.default,Wl.default,Hl.default,Ul.default];return e?t.push(kl.default,Ll.default):t.push(Al.default,Dl.default),t.push(Ml.default),t}Wn.default=Bl;var Qn={},es={};Object.defineProperty(es,"__esModule",{value:!0});const Ee=se,Jl={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,Ee.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Ee._)`{format: ${e}}`},code(e,t){const{gen:r,data:n,$data:s,schema:i,schemaCode:a,it:f}=e,{opts:d,errSchemaPath:m,schemaEnv:u,self:g}=f;if(!d.validateFormats)return;s?N():b();function N(){const P=r.scopeValue("formats",{ref:g.formats,code:d.code.formats}),E=r.const("fDef",(0,Ee._)`${P}[${a}]`),S=r.let("fType"),v=r.let("format");r.if((0,Ee._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>r.assign(S,(0,Ee._)`${E}.type || "string"`).assign(v,(0,Ee._)`${E}.validate`),()=>r.assign(S,(0,Ee._)`"string"`).assign(v,E)),e.fail$data((0,Ee.or)(R(),L()));function R(){return d.strictSchema===!1?Ee.nil:(0,Ee._)`${a} && !${v}`}function L(){const G=u.$async?(0,Ee._)`(${E}.async ? await ${v}(${n}) : ${v}(${n}))`:(0,Ee._)`${v}(${n})`,F=(0,Ee._)`(typeof ${v} == "function" ? ${G} : ${v}.test(${n}))`;return(0,Ee._)`${v} && ${v} !== true && ${S} === ${t} && !${F}`}}function b(){const P=g.formats[i];if(!P){R();return}if(P===!0)return;const[E,S,v]=L(P);E===t&&e.pass(G());function R(){if(d.strictSchema===!1){g.logger.warn(F());return}throw new Error(F());function F(){return`unknown format "${i}" ignored in schema at path "${m}"`}}function L(F){const ue=F instanceof RegExp?(0,Ee.regexpCode)(F):d.code.formats?(0,Ee._)`${d.code.formats}${(0,Ee.getProperty)(i)}`:void 0,de=r.scopeValue("formats",{key:i,ref:F,code:ue});return typeof F=="object"&&!(F instanceof RegExp)?[F.type||"string",F.validate,(0,Ee._)`${de}.validate`]:["string",F,de]}function G(){if(typeof P=="object"&&!(P instanceof RegExp)&&P.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Ee._)`await ${v}(${n})`}return typeof S=="function"?(0,Ee._)`${v}(${n})`:(0,Ee._)`${v}.test(${n})`}}}};es.default=Jl,Object.defineProperty(Qn,"__esModule",{value:!0});const Yl=[es.default];Qn.default=Yl;var zt={};Object.defineProperty(zt,"__esModule",{value:!0}),zt.contentVocabulary=zt.metadataVocabulary=void 0,zt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],zt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(En,"__esModule",{value:!0});const Zl=_n,Ql=Sn,ed=Wn,td=Qn,Yo=zt,rd=[Zl.default,Ql.default,(0,ed.default)(),td.default,Yo.metadataVocabulary,Yo.contentVocabulary];En.default=rd;var ts={},Lr={};Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.DiscrError=void 0;var Zo;(function(e){e.Tag="tag",e.Mapping="mapping"})(Zo||(Lr.DiscrError=Zo={})),Object.defineProperty(ts,"__esModule",{value:!0});const Vt=se,rs=Lr,Qo=Le,nd=Dt,sd=K,od={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===rs.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Vt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{oneOf:a}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const f=n.propertyName;if(typeof f!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const d=t.let("valid",!1),m=t.const("tag",(0,Vt._)`${r}${(0,Vt.getProperty)(f)}`);t.if((0,Vt._)`typeof ${m} == "string"`,()=>u(),()=>e.error(!1,{discrError:rs.DiscrError.Tag,tag:m,tagName:f})),e.ok(d);function u(){const b=N();t.if(!1);for(const P in b)t.elseIf((0,Vt._)`${m} === ${P}`),t.assign(d,g(b[P]));t.else(),e.error(!1,{discrError:rs.DiscrError.Mapping,tag:m,tagName:f}),t.endIf()}function g(b){const P=t.name("valid"),E=e.subschema({keyword:"oneOf",schemaProp:b},P);return e.mergeEvaluated(E,Vt.Name),P}function N(){var b;const P={},E=v(s);let S=!0;for(let G=0;G<a.length;G++){let F=a[G];if(F!=null&&F.$ref&&!(0,sd.schemaHasRulesButRef)(F,i.self.RULES)){const de=F.$ref;if(F=Qo.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,de),F instanceof Qo.SchemaEnv&&(F=F.schema),F===void 0)throw new nd.default(i.opts.uriResolver,i.baseId,de)}const ue=(b=F==null?void 0:F.properties)===null||b===void 0?void 0:b[f];if(typeof ue!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${f}"`);S=S&&(E||v(F)),R(ue,G)}if(!S)throw new Error(`discriminator: "${f}" must be required`);return P;function v({required:G}){return Array.isArray(G)&&G.includes(f)}function R(G,F){if(G.const)L(G.const,F);else if(G.enum)for(const ue of G.enum)L(ue,F);else throw new Error(`discriminator: "properties/${f}" must have "const" or "enum"`)}function L(G,F){if(typeof G!="string"||G in P)throw new Error(`discriminator: "${f}" values must be unique strings`);P[G]=F}}}};ts.default=od;const id={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Ts,n=En,s=ts,i=id,a=["/properties"],f="http://json-schema.org/draft-07/schema";class d extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(P=>this.addVocabulary(P)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const P=this.opts.$data?this.$dataMetaSchema(i,a):i;this.addMetaSchema(P,f,!1),this.refs["http://json-schema.org/schema"]=f}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(f)?f:void 0)}}t.Ajv=d,e.exports=t=d,e.exports.Ajv=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var m=xe;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return m.KeywordCxt}});var u=se;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var g=Qt;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return g.default}});var N=Dt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return N.default}})})(Qr,Qr.exports);var ad=Qr.exports;const cd=_e(ad);var ei={exports:{}},ti={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(typeof self<"u"?self:he,function(){return function(r){var n={};function s(i){if(n[i])return n[i].exports;var a=n[i]={i,l:!1,exports:{}};return r[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=r,s.c=n,s.d=function(i,a,f){s.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:f})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,a){if(1&a&&(i=s(i)),8&a||4&a&&typeof i=="object"&&i&&i.__esModule)return i;var f=Object.create(null);if(s.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:i}),2&a&&typeof i!="string")for(var d in i)s.d(f,d,(function(m){return i[m]}).bind(null,d));return f},s.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(a,"a",a),a},s.o=function(i,a){return{}.hasOwnProperty.call(i,a)},s.p="",s(s.s=0)}([function(r,n,s){s.r(n),s.d(n,"Promise",function(){return W}),s.d(n,"TYPES",function(){return Ch}),s.d(n,"ProxyWindow",function(){return qe}),s.d(n,"setup",function(){return Fi}),s.d(n,"destroy",function(){return Th}),s.d(n,"serializeMessage",function(){return Oh}),s.d(n,"deserializeMessage",function(){return Ih}),s.d(n,"createProxyWindow",function(){return Nh}),s.d(n,"toProxyWindow",function(){return jh}),s.d(n,"on",function(){return Nt}),s.d(n,"once",function(){return Rh}),s.d(n,"send",function(){return vt}),s.d(n,"markWindowKnown",function(){return Ti}),s.d(n,"cleanUpWindow",function(){return Ah}),s.d(n,"bridge",function(){});function i(o){return{}.toString.call(o)==="[object RegExp]"}var a=`Call was rejected by callee.\r
`;function f(o){return o===void 0&&(o=window),o.location.protocol}function d(o){if(o===void 0&&(o=window),o.mockDomain){var h=o.mockDomain.split("//")[0];if(h)return h}return f(o)}function m(o){return o===void 0&&(o=window),d(o)==="about:"}function u(o){if(o===void 0&&(o=window),o)try{if(o.parent&&o.parent!==o)return o.parent}catch{}}function g(o){if(o===void 0&&(o=window),o&&!u(o))try{return o.opener}catch{}}function N(o){try{return!0}catch{}return!1}function b(o){o===void 0&&(o=window);var h=o.location;if(!h)throw new Error("Can not read window location");var c=f(o);if(!c)throw new Error("Can not read window protocol");if(c==="file:")return"file://";if(c==="about:"){var p=u(o);return p&&N()?b(p):"about://"}var $=h.host;if(!$)throw new Error("Can not read window host");return c+"//"+$}function P(o){o===void 0&&(o=window);var h=b(o);return h&&o.mockDomain&&o.mockDomain.indexOf("mock:")===0?o.mockDomain:h}function E(o){if(!function(h){try{if(h===window)return!0}catch{}try{var c=Object.getOwnPropertyDescriptor(h,"location");if(c&&c.enumerable===!1)return!1}catch{}try{if(m(h)&&N())return!0}catch{}try{if(function(p){return p===void 0&&(p=window),d(p)==="mock:"}(h)&&N())return!0}catch{}try{if(b(h)===b(window))return!0}catch{}return!1}(o))return!1;try{if(o===window||m(o)&&N()||P(window)===P(o))return!0}catch{}return!1}function S(o){if(!E(o))throw new Error("Expected window to be same domain");return o}function v(o,h){if(!o||!h)return!1;var c=u(h);return c?c===o:function(p){var $=[];try{for(;p.parent!==p;)$.push(p.parent),p=p.parent}catch{}return $}(h).indexOf(o)!==-1}function R(o){var h=[],c;try{c=o.frames}catch{c=o}var p;try{p=c.length}catch{}if(p===0)return h;if(p){for(var $=0;$<p;$++){var O=void 0;try{O=c[$]}catch{continue}h.push(O)}return h}for(var T=0;T<100;T++){var D=void 0;try{D=c[T]}catch{return h}if(!D)return h;h.push(D)}return h}var L=[],G=[];function F(o,h){h===void 0&&(h=!0);try{if(o===window)return!1}catch{return!0}try{if(!o)return!0}catch{return!0}try{if(o.closed)return!0}catch($){return!$||$.message!==a}if(h&&E(o))try{if(o.mockclosed)return!0}catch{}try{if(!o.parent||!o.top)return!0}catch{}var c=function($,O){for(var T=0;T<$.length;T++)try{if($[T]===O)return T}catch{}return-1}(L,o);if(c!==-1){var p=G[c];if(p&&function($){if(!$.contentWindow||!$.parentNode)return!0;var O=$.ownerDocument;if(O&&O.documentElement&&!O.documentElement.contains($)){for(var T=$;T.parentNode&&T.parentNode!==T;)T=T.parentNode;if(!T.host||!O.documentElement.contains(T.host))return!0}return!1}(p))return!0}return!1}function ue(o){return o===void 0&&(o=window),g(o=o||window)||u(o)||void 0}function de(o,h){if(typeof o=="string"){if(typeof h=="string")return o==="*"||h===o;if(i(h)||Array.isArray(h))return!1}return i(o)?i(h)?o.toString()===h.toString():!Array.isArray(h)&&!!h.match(o):!!Array.isArray(o)&&(Array.isArray(h)?JSON.stringify(o)===JSON.stringify(h):!i(h)&&o.some(function(c){return de(c,h)}))}function Ce(o){try{if(o===window)return!0}catch(h){if(h&&h.message===a)return!0}try{if({}.toString.call(o)==="[object Window]")return!0}catch(h){if(h&&h.message===a)return!0}try{if(window.Window&&o instanceof window.Window)return!0}catch(h){if(h&&h.message===a)return!0}try{if(o&&o.self===o)return!0}catch(h){if(h&&h.message===a)return!0}try{if(o&&o.parent===o)return!0}catch(h){if(h&&h.message===a)return!0}try{if(o&&o.top===o)return!0}catch(h){if(h&&h.message===a)return!0}try{if(o&&o.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in o&&"self"in o&&"location"in o)return!0}catch{}return!1}function He(o){if(E(o))return S(o).frameElement;for(var h=0,c=document.querySelectorAll("iframe");h<c.length;h++){var p=c[h];if(p&&p.contentWindow&&p.contentWindow===o)return p}}function Qe(o){if(function(c){return c===void 0&&(c=window),!!u(c)}(o)){var h=He(o);if(h&&h.parentElement){h.parentElement.removeChild(h);return}}try{o.close()}catch{}}function De(o){try{if(!o)return!1;if(typeof Promise<"u"&&o instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&o instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&o instanceof window.constructor)return!1;var h={}.toString;if(h){var c=h.call(o);if(c==="[object Window]"||c==="[object global]"||c==="[object DOMWindow]")return!1}if(typeof o.then=="function")return!0}catch{return!1}return!1}var We=[],ze=[],U=0,M;function Z(){if(!U&&M){var o=M;M=null,o.resolve()}}function x(){U+=1}function Y(){U-=1,Z()}var W=function(){function o(c){var p=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],c){var $,O,T=!1,D=!1,A=!1;x();try{c(function(C){A?p.resolve(C):(T=!0,$=C)},function(C){A?p.reject(C):(D=!0,O=C)})}catch(C){Y(),this.reject(C);return}Y(),A=!0,T?this.resolve($):D&&this.reject(O)}}var h=o.prototype;return h.resolve=function(c){if(this.resolved||this.rejected)return this;if(De(c))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=c,this.dispatch(),this},h.reject=function(c){var p=this;if(this.resolved||this.rejected)return this;if(De(c))throw new Error("Can not reject promise with another promise");if(!c){var $=c&&typeof c.toString=="function"?c.toString():{}.toString.call(c);c=new Error("Expected reject to be called with Error, got "+$)}return this.rejected=!0,this.error=c,this.errorHandled||setTimeout(function(){p.errorHandled||function(O,T){if(We.indexOf(O)===-1){We.push(O),setTimeout(function(){throw O},1);for(var D=0;D<ze.length;D++)ze[D](O,T)}}(c,p)},1),this.dispatch(),this},h.asyncReject=function(c){return this.errorHandled=!0,this.reject(c),this},h.dispatch=function(){var c=this.resolved,p=this.rejected,$=this.handlers;if(!this.dispatching&&(c||p)){this.dispatching=!0,x();for(var O=function(q,ne){return q.then(function(te){ne.resolve(te)},function(te){ne.reject(te)})},T=0;T<$.length;T++){var D=$[T],A=D.onSuccess,C=D.onError,H=D.promise,z=void 0;if(c)try{z=A?A(this.value):this.value}catch(q){H.reject(q);continue}else if(p){if(!C){H.reject(this.error);continue}try{z=C(this.error)}catch(q){H.reject(q);continue}}if(z instanceof o&&(z.resolved||z.rejected)){var V=z;V.resolved?H.resolve(V.value):H.reject(V.error),V.errorHandled=!0}else De(z)?z instanceof o&&(z.resolved||z.rejected)?z.resolved?H.resolve(z.value):H.reject(z.error):O(z,H):H.resolve(z)}$.length=0,this.dispatching=!1,Y()}},h.then=function(c,p){if(c&&typeof c!="function"&&!c.call)throw new Error("Promise.then expected a function for success handler");if(p&&typeof p!="function"&&!p.call)throw new Error("Promise.then expected a function for error handler");var $=new o;return this.handlers.push({promise:$,onSuccess:c,onError:p}),this.errorHandled=!0,this.dispatch(),$},h.catch=function(c){return this.then(void 0,c)},h.finally=function(c){if(c&&typeof c!="function"&&!c.call)throw new Error("Promise.finally expected a function");return this.then(function(p){return o.try(c).then(function(){return p})},function(p){return o.try(c).then(function(){throw p})})},h.timeout=function(c,p){var $=this;if(this.resolved||this.rejected)return this;var O=setTimeout(function(){$.resolved||$.rejected||$.reject(p||new Error("Promise timed out after "+c+"ms"))},c);return this.then(function(T){return clearTimeout(O),T})},h.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},h.lazy=function(){return this.errorHandled=!0,this},o.resolve=function(c){return c instanceof o?c:De(c)?new o(function(p,$){return c.then(p,$)}):new o().resolve(c)},o.reject=function(c){return new o().reject(c)},o.asyncReject=function(c){return new o().asyncReject(c)},o.all=function(c){var p=new o,$=c.length,O=[].slice();if(!$)return p.resolve(O),p;for(var T=function(C,H,z){return H.then(function(V){O[C]=V,($-=1)==0&&p.resolve(O)},function(V){z.reject(V)})},D=0;D<c.length;D++){var A=c[D];if(A instanceof o){if(A.resolved){O[D]=A.value,$-=1;continue}}else if(!De(A)){O[D]=A,$-=1;continue}T(D,o.resolve(A),p)}return $===0&&p.resolve(O),p},o.hash=function(c){var p={},$=[],O=function(D){if(c.hasOwnProperty(D)){var A=c[D];De(A)?$.push(A.then(function(C){p[D]=C})):p[D]=A}};for(var T in c)O(T);return o.all($).then(function(){return p})},o.map=function(c,p){return o.all(c.map(p))},o.onPossiblyUnhandledException=function(c){return function(p){return ze.push(p),{cancel:function(){ze.splice(ze.indexOf(p),1)}}}(c)},o.try=function(c,p,$){if(c&&typeof c!="function"&&!c.call)throw new Error("Promise.try expected a function");var O;x();try{O=c.apply(p,$||[])}catch(T){return Y(),o.reject(T)}return Y(),o.resolve(O)},o.delay=function(c){return new o(function(p){setTimeout(p,c)})},o.isPromise=function(c){return!!(c&&c instanceof o)||De(c)},o.flush=function(){return function(c){var p=M=M||new c;return Z(),p}(o)},o}();function k(o,h){for(var c=0;c<o.length;c++)try{if(o[c]===h)return c}catch{}return-1}var w=function(){function o(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var c=new WeakMap,p={};return Object.freeze(p),c.set(p,"__testvalue__"),c.get(p)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var h=o.prototype;return h._cleanupClosedWindows=function(){for(var c=this.weakmap,p=this.keys,$=0;$<p.length;$++){var O=p[$];if(Ce(O)&&F(O)){if(c)try{c.delete(O)}catch{}p.splice($,1),this.values.splice($,1),$-=1}}},h.isSafeToReadWrite=function(c){return!Ce(c)},h.set=function(c,p){if(!c)throw new Error("WeakMap expected key");var $=this.weakmap;if($)try{$.set(c,p)}catch{delete this.weakmap}if(this.isSafeToReadWrite(c))try{var O=this.name,T=c[O];T&&T[0]===c?T[1]=p:Object.defineProperty(c,O,{value:[c,p],writable:!0});return}catch{}this._cleanupClosedWindows();var D=this.keys,A=this.values,C=k(D,c);C===-1?(D.push(c),A.push(p)):A[C]=p},h.get=function(c){if(!c)throw new Error("WeakMap expected key");var p=this.weakmap;if(p)try{if(p.has(c))return p.get(c)}catch{delete this.weakmap}if(this.isSafeToReadWrite(c))try{var $=c[this.name];return $&&$[0]===c?$[1]:void 0}catch{}this._cleanupClosedWindows();var O=k(this.keys,c);if(O!==-1)return this.values[O]},h.delete=function(c){if(!c)throw new Error("WeakMap expected key");var p=this.weakmap;if(p)try{p.delete(c)}catch{delete this.weakmap}if(this.isSafeToReadWrite(c))try{var $=c[this.name];$&&$[0]===c&&($[0]=$[1]=void 0)}catch{}this._cleanupClosedWindows();var O=this.keys,T=k(O,c);T!==-1&&(O.splice(T,1),this.values.splice(T,1))},h.has=function(c){if(!c)throw new Error("WeakMap expected key");var p=this.weakmap;if(p)try{if(p.has(c))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(c))try{var $=c[this.name];return!(!$||$[0]!==c)}catch{}return this._cleanupClosedWindows(),k(this.keys,c)!==-1},h.getOrSet=function(c,p){if(this.has(c))return this.get(c);var $=p();return this.set(c,$),$},o}();function I(o){return o.name||o.__name__||o.displayName||"anonymous"}function _(o,h){try{delete o.name,o.name=h}catch{}return o.__name__=o.displayName=h,o}function l(){var o="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return o.charAt(Math.floor(Math.random()*o.length))})+"_"+function(h){if(typeof btoa=="function")return btoa(encodeURIComponent(h).replace(/%([0-9A-F]{2})/g,function(c,p){return String.fromCharCode(parseInt(p,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(h,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var y;function j(o){try{return JSON.stringify([].slice.call(o),function(h,c){return typeof c=="function"?"memoize["+function(p){if(y=y||new w,p==null||typeof p!="object"&&typeof p!="function")throw new Error("Invalid object");var $=y.get(p);return $||($=typeof p+":"+l(),y.set(p,$)),$}(c)+"]":typeof window<"u"&&c instanceof window.Element||c!==null&&typeof c=="object"&&c.nodeType===1&&typeof c.style=="object"&&typeof c.ownerDocument=="object"?{}:c})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function B(){return{}}var X=0,ae=0;function ie(o,h){h===void 0&&(h={});var c=h.thisNamespace,p=c!==void 0&&c,$=h.time,O,T,D=X;X+=1;var A=function(){for(var C=arguments.length,H=new Array(C),z=0;z<C;z++)H[z]=arguments[z];D<ae&&(O=null,T=null,D=X,X+=1);var V;V=p?(T=T||new w).getOrSet(this,B):O=O||{};var q;try{q=j(H)}catch{return o.apply(this,arguments)}var ne=V[q];if(ne&&$&&Date.now()-ne.time<$&&(delete V[q],ne=null),ne)return ne.value;var te=Date.now(),re=o.apply(this,arguments);return V[q]={time:te,value:re},re};return A.reset=function(){O=null,T=null},_(A,(h.name||I(o))+"::memoized")}ie.clear=function(){ae=X};function be(o){var h={};function c(){for(var p=arguments,$=this,O=arguments.length,T=new Array(O),D=0;D<O;D++)T[D]=arguments[D];var A=j(T);return h.hasOwnProperty(A)||(h[A]=W.try(function(){return o.apply($,p)}).finally(function(){delete h[A]})),h[A]}return c.reset=function(){h={}},_(c,I(o)+"::promiseMemoized")}function Ve(){}function ut(o,h){if(h===void 0&&(h=1),h>=3)return"stringifyError stack overflow";try{if(!o)return"<unknown error: "+{}.toString.call(o)+">";if(typeof o=="string")return o;if(o instanceof Error){var c=o&&o.stack,p=o&&o.message;if(c&&p)return c.indexOf(p)!==-1?c:p+`
`+c;if(c)return c;if(p)return p}return o&&o.toString&&typeof o.toString=="function"?o.toString():{}.toString.call(o)}catch($){return"Error while stringifying error: "+ut($,h+1)}}function qt(o){return typeof o=="string"?o:o.toString&&typeof o.toString=="function"?o.toString():{}.toString.call(o)}ie(function(o){if(Object.values)return Object.values(o);var h=[];for(var c in o)o.hasOwnProperty(c)&&h.push(o[c]);return h});function Rt(o){return{}.toString.call(o)==="[object RegExp]"}function lt(o,h,c){if(o.hasOwnProperty(h))return o[h];var p=c();return o[h]=p,p}function Gt(){var o=document.body;if(!o)throw new Error("Body element not found");return o}function Kt(){return!!document.body&&document.readyState==="complete"}function xt(){return!!document.body&&document.readyState==="interactive"}ie(function(){return new W(function(o){if(Kt()||xt())return o();var h=setInterval(function(){if(Kt()||xt())return clearInterval(h),o()},10)})});var $t=typeof document<"u"?document.currentScript:null,dr=ie(function(){if($t||($t=function(){try{var o=function(){try{throw new Error("_")}catch(T){return T.stack||""}}(),h=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(o),c=h&&h[1];if(!c)return;for(var p=0,$=[].slice.call(document.getElementsByTagName("script")).reverse();p<$.length;p++){var O=$[p];if(O.src&&O.src===c)return O}}catch{}}()))return $t;throw new Error("Can not determine current script")}),fr=l();ie(function(){var o;try{o=dr()}catch{return fr}var h=o.getAttribute("data-uid");if(h&&typeof h=="string"||(h=o.getAttribute("data-uid-auto"))&&typeof h=="string")return h;if(o.src){var c=function(p){for(var $="",O=0;O<p.length;O++){var T=p[O].charCodeAt(0)*O;p[O+1]&&(T+=p[O+1].charCodeAt(0)*(O-1)),$+=String.fromCharCode(97+Math.abs(T)%26)}return $}(JSON.stringify({src:o.src,dataset:o.dataset}));h="uid_"+c.slice(c.length-30)}else h=l();return o.setAttribute("data-uid-auto",h),h});function dt(o){o===void 0&&(o=window);var h="__post_robot_10_0_46__";return o!==window?o[h]:o[h]=o[h]||{}}var Xt=function(){return{}};function we(o,h){return o===void 0&&(o="store"),h===void 0&&(h=Xt),lt(dt(),o,function(){var c=h();return{has:function(p){return c.hasOwnProperty(p)},get:function(p,$){return c.hasOwnProperty(p)?c[p]:$},set:function(p,$){return c[p]=$,$},del:function(p){delete c[p]},getOrSet:function(p,$){return lt(c,p,$)},reset:function(){c=h()},keys:function(){return Object.keys(c)}}})}var Ot=function(){};function gt(){var o=dt();return o.WINDOW_WILDCARD=o.WINDOW_WILDCARD||new Ot,o.WINDOW_WILDCARD}function je(o,h){return o===void 0&&(o="store"),h===void 0&&(h=Xt),we("windowStore").getOrSet(o,function(){var c=new w,p=function($){return c.getOrSet($,h)};return{has:function($){return p($).hasOwnProperty(o)},get:function($,O){var T=p($);return T.hasOwnProperty(o)?T[o]:O},set:function($,O){return p($)[o]=O,O},del:function($){delete p($)[o]},getOrSet:function($,O){return lt(p($),o,O)}}})}function hr(){return we("instance").getOrSet("instanceID",l)}function Xr(o,h){var c=h.domain,p=je("helloPromises"),$=p.get(o);$&&$.resolve({domain:c});var O=W.resolve({domain:c});return p.set(o,O),O}function gs(o,h){return(0,h.send)(o,"postrobot_hello",{instanceID:hr()},{domain:"*",timeout:-1}).then(function(c){var p=c.origin,$=c.data.instanceID;return Xr(o,{domain:p}),{win:o,domain:p,instanceID:$}})}function ji(o,h){var c=h.send;return je("windowInstanceIDPromises").getOrSet(o,function(){return gs(o,{send:c}).then(function(p){return p.instanceID})})}function Ti(o){je("knownWindows").set(o,!0)}function vs(o){return typeof o=="object"&&o!==null&&typeof o.__type__=="string"}function Ci(o){return o===void 0?"undefined":o===null?"null":Array.isArray(o)?"array":typeof o=="function"?"function":typeof o=="object"?o instanceof Error?"error":typeof o.then=="function"?"promise":{}.toString.call(o)==="[object RegExp]"?"regex":{}.toString.call(o)==="[object Date]"?"date":"object":typeof o=="string"?"string":typeof o=="number"?"number":typeof o=="boolean"?"boolean":void 0}function It(o,h){return{__type__:o,__val__:h}}var Ue,vh=((Ue={}).function=function(){},Ue.error=function(o){return It("error",{message:o.message,stack:o.stack,code:o.code,data:o.data})},Ue.promise=function(){},Ue.regex=function(o){return It("regex",o.source)},Ue.date=function(o){return It("date",o.toJSON())},Ue.array=function(o){return o},Ue.object=function(o){return o},Ue.string=function(o){return o},Ue.number=function(o){return o},Ue.boolean=function(o){return o},Ue.null=function(o){return o},Ue[void 0]=function(o){return It("undefined",o)},Ue),wh={},Fe,Eh=((Fe={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},Fe.error=function(o){var h=o.stack,c=o.code,p=o.data,$=new Error(o.message);return $.code=c,p&&($.data=p),$.stack=h+`

`+$.stack,$},Fe.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},Fe.regex=function(o){return new RegExp(o)},Fe.date=function(o){return new Date(o)},Fe.array=function(o){return o},Fe.object=function(o){return o},Fe.string=function(o){return o},Fe.number=function(o){return o},Fe.boolean=function(o){return o},Fe.null=function(o){return o},Fe[void 0]=function(){},Fe),_h={};new W(function(o){if(window.document&&window.document.body)return o(window.document.body);var h=setInterval(function(){if(window.document&&window.document.body)return clearInterval(h),o(window.document.body)},10)});function ws(){for(var o=we("idToProxyWindow"),h=0,c=o.keys();h<c.length;h++){var p=c[h];o.get(p).shouldClean()&&o.del(p)}}function Ai(o,h){var c=h.send,p=h.id,$=p===void 0?l():p,O=o.then(function(A){if(E(A))return S(A).name}),T=o.then(function(A){if(F(A))throw new Error("Window is closed, can not determine type");return g(A)?"popup":"iframe"});O.catch(Ve),T.catch(Ve);var D=function(){return o.then(function(A){if(!F(A))return E(A)?S(A).name:O})};return{id:$,getType:function(){return T},getInstanceID:be(function(){return o.then(function(A){return ji(A,{send:c})})}),close:function(){return o.then(Qe)},getName:D,focus:function(){return o.then(function(A){A.focus()})},isClosed:function(){return o.then(function(A){return F(A)})},setLocation:function(A,C){return C===void 0&&(C={}),o.then(function(H){var z=window.location.protocol+"//"+window.location.host,V=C.method,q=V===void 0?"get":V,ne=C.body;if(A.indexOf("/")===0)A=""+z+A;else if(!A.match(/^https?:\/\//)&&A.indexOf(z)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(A));if(q==="post")return D().then(function(te){if(!te)throw new Error("Can not post to window without target name");(function(re){var pe=re.url,Re=re.target,$e=re.body,me=re.method,Oe=me===void 0?"post":me,ce=document.createElement("form");if(ce.setAttribute("target",Re),ce.setAttribute("method",Oe),ce.setAttribute("action",pe),ce.style.display="none",$e)for(var ge=0,Ke=Object.keys($e);ge<Ke.length;ge++){var Se,pr=Ke[ge],Ss=document.createElement("input");Ss.setAttribute("name",pr),Ss.setAttribute("value",(Se=$e[pr])==null?void 0:Se.toString()),ce.appendChild(Ss)}Gt().appendChild(ce),ce.submit(),Gt().removeChild(ce)})({url:A,target:te,method:q,body:ne})});if(q!=="get")throw new Error("Unsupported method: "+q);if(E(H))try{if(H.location&&typeof H.location.replace=="function"){H.location.replace(A);return}}catch{}H.location=A})},setName:function(A){return o.then(function(C){var H=E(C),z=He(C);if(!H)throw new Error("Can not set name for cross-domain window: "+A);S(C).name=A,z&&z.setAttribute("name",A),O=W.resolve(A)})}}}var qe=function(){function o(c){var p=c.send,$=c.win,O=c.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new W,this.serializedWindow=O||Ai(this.actualWindowPromise,{send:p}),we("idToProxyWindow").set(this.getID(),this),$&&this.setWindow($,{send:p})}var h=o.prototype;return h.getID=function(){return this.serializedWindow.id},h.getType=function(){return this.serializedWindow.getType()},h.isPopup=function(){return this.getType().then(function(c){return c==="popup"})},h.setLocation=function(c,p){var $=this;return this.serializedWindow.setLocation(c,p).then(function(){return $})},h.getName=function(){return this.serializedWindow.getName()},h.setName=function(c){var p=this;return this.serializedWindow.setName(c).then(function(){return p})},h.close=function(){var c=this;return this.serializedWindow.close().then(function(){return c})},h.focus=function(){var c=this,p=this.isPopup(),$=this.getName(),O=W.hash({isPopup:p,name:$}).then(function(D){var A=D.name;D.isPopup&&A&&window.open("",A,"noopener")}),T=this.serializedWindow.focus();return W.all([O,T]).then(function(){return c})},h.isClosed=function(){return this.serializedWindow.isClosed()},h.getWindow=function(){return this.actualWindow},h.setWindow=function(c,p){var $=p.send;this.actualWindow=c,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=Ai(this.actualWindowPromise,{send:$,id:this.getID()}),je("winToProxyWindow").set(c,this)},h.awaitWindow=function(){return this.actualWindowPromise},h.matchWindow=function(c,p){var $=this,O=p.send;return W.try(function(){return $.actualWindow?c===$.actualWindow:W.hash({proxyInstanceID:$.getInstanceID(),knownWindowInstanceID:ji(c,{send:O})}).then(function(T){var D=T.proxyInstanceID===T.knownWindowInstanceID;return D&&$.setWindow(c,{send:O}),D})})},h.unwrap=function(){return this.actualWindow||this},h.getInstanceID=function(){return this.serializedWindow.getInstanceID()},h.shouldClean=function(){return!!(this.actualWindow&&F(this.actualWindow))},h.serialize=function(){return this.serializedWindow},o.unwrap=function(c){return o.isProxyWindow(c)?c.unwrap():c},o.serialize=function(c,p){var $=p.send;return ws(),o.toProxyWindow(c,{send:$}).serialize()},o.deserialize=function(c,p){var $=p.send;return ws(),we("idToProxyWindow").get(c.id)||new o({serializedWindow:c,send:$})},o.isProxyWindow=function(c){return!!(c&&!Ce(c)&&c.isProxyWindow)},o.toProxyWindow=function(c,p){var $=p.send;if(ws(),o.isProxyWindow(c))return c;var O=c;return je("winToProxyWindow").get(O)||new o({win:O,send:$})},o}();function Es(o,h,c,p,$){var O=je("methodStore"),T=we("proxyWindowMethods");qe.isProxyWindow(p)?T.set(o,{val:h,name:c,domain:$,source:p}):(T.del(o),O.getOrSet(p,function(){return{}})[o]={domain:$,name:c,val:h,source:p})}function ki(o,h){var c=je("methodStore"),p=we("proxyWindowMethods");return c.getOrSet(o,function(){return{}})[h]||p.get(h)}function Di(o,h,c,p,$){T=(O={on:$.on,send:$.send}).on,D=O.send,we("builtinListeners").getOrSet("functionCalls",function(){return T("postrobot_method",{domain:"*"},function(H){var z=H.source,V=H.origin,q=H.data,ne=q.id,te=q.name,re=ki(z,ne);if(!re)throw new Error("Could not find method '"+te+"' with id: "+q.id+" in "+P(window));var pe=re.source,Re=re.domain,$e=re.val;return W.try(function(){if(!de(Re,V))throw new Error("Method '"+q.name+"' domain "+JSON.stringify(Rt(re.domain)?re.domain.source:re.domain)+" does not match origin "+V+" in "+P(window));if(qe.isProxyWindow(pe))return pe.matchWindow(z,{send:D}).then(function(me){if(!me)throw new Error("Method call '"+q.name+"' failed - proxy window does not match source in "+P(window))})}).then(function(){return $e.apply({source:z,origin:V},q.args)},function(me){return W.try(function(){if($e.onError)return $e.onError(me)}).then(function(){throw me.stack&&(me.stack="Remote call to "+te+"("+function(Oe){return Oe===void 0&&(Oe=[]),(ce=Oe,[].slice.call(ce)).map(function(ge){return typeof ge=="string"?"'"+ge+"'":ge===void 0?"undefined":ge===null?"null":typeof ge=="boolean"?ge.toString():Array.isArray(ge)?"[ ... ]":typeof ge=="object"?"{ ... }":typeof ge=="function"?"() => { ... }":"<"+typeof ge+">"}).join(", ");var ce}(q.args)+`) failed

`+me.stack),me})}).then(function(me){return{result:me,id:ne,name:te}})})});var O,T,D,A=c.__id__||l();o=qe.unwrap(o);var C=c.__name__||c.name||p;return typeof C=="string"&&typeof C.indexOf=="function"&&C.indexOf("anonymous::")===0&&(C=C.replace("anonymous::",p+"::")),qe.isProxyWindow(o)?(Es(A,c,C,o,h),o.awaitWindow().then(function(H){Es(A,c,C,H,h)})):Es(A,c,C,o,h),It("cross_domain_function",{id:A,name:C})}function Li(o,h,c,p){var $,O=p.on,T=p.send;return function(D,A){A===void 0&&(A=wh);var C=JSON.stringify(D,function(H){var z=this[H];if(vs(this))return z;var V=Ci(z);if(!V)return z;var q=A[V]||vh[V];return q?q(z,H):z});return C===void 0?"undefined":C}(c,(($={}).promise=function(D,A){return function(C,H,z,V,q){return It("cross_domain_zalgo_promise",{then:Di(C,H,function(ne,te){return z.then(ne,te)},V,{on:q.on,send:q.send})})}(o,h,D,A,{on:O,send:T})},$.function=function(D,A){return Di(o,h,D,A,{on:O,send:T})},$.object=function(D){return Ce(D)||qe.isProxyWindow(D)?It("cross_domain_window",qe.serialize(D,{send:T})):D},$))}function Mi(o,h,c,p){var $,O=p.send;return function(T,D){if(D===void 0&&(D=_h),T!=="undefined")return JSON.parse(T,function(A,C){if(vs(this))return C;var H,z;if(vs(C)?(H=C.__type__,z=C.__val__):(H=Ci(C),z=C),!H)return z;var V=D[H]||Eh[H];return V?V(z,A):z})}(c,(($={}).cross_domain_zalgo_promise=function(T){return function(D,A,C){return new W(C.then)}(0,0,T)},$.cross_domain_function=function(T){return function(D,A,C,H){var z=C.id,V=C.name,q=H.send,ne=function(re){re===void 0&&(re={});function pe(){var Re=arguments;return qe.toProxyWindow(D,{send:q}).awaitWindow().then(function($e){var me=ki($e,z);if(me&&me.val!==pe)return me.val.apply({source:window,origin:P()},Re);var Oe=[].slice.call(Re);return re.fireAndForget?q($e,"postrobot_method",{id:z,name:V,args:Oe},{domain:A,fireAndForget:!0}):q($e,"postrobot_method",{id:z,name:V,args:Oe},{domain:A,fireAndForget:!1}).then(function(ce){return ce.data.result})}).catch(function($e){throw $e})}return pe.__name__=V,pe.__origin__=A,pe.__source__=D,pe.__id__=z,pe.origin=A,pe},te=ne();return te.fireAndForget=ne({fireAndForget:!0}),te}(o,h,T,{send:O})},$.cross_domain_window=function(T){return qe.deserialize(T,{send:O})},$))}var _s={};_s.postrobot_post_message=function(o,h,c){c.indexOf("file:")===0&&(c="*"),o.postMessage(h,c)};function bs(o,h,c,p){var $=p.on,O=p.send;return W.try(function(){var T=je().getOrSet(o,function(){return{}});return T.buffer=T.buffer||[],T.buffer.push(c),T.flush=T.flush||W.flush().then(function(){if(F(o))throw new Error("Window is closed");var D=Li(o,h,((A={}).__post_robot_10_0_46__=T.buffer||[],A),{on:$,send:O}),A;delete T.buffer;for(var C=Object.keys(_s),H=[],z=0;z<C.length;z++){var V=C[z];try{_s[V](o,D,h)}catch(q){H.push(q)}}if(H.length===C.length)throw new Error(`All post-robot messaging strategies failed:

`+H.map(function(q,ne){return ne+". "+ut(q)}).join(`

`))}),T.flush.then(function(){delete T.flush})}).then(Ve)}function Wi(o){return we("responseListeners").get(o)}function zi(o){we("responseListeners").del(o)}function Vi(o){return we("erroredResponseListeners").has(o)}function Hi(o){var h=o.name,c=o.win,p=o.domain,$=je("requestListeners");if(c==="*"&&(c=null),p==="*"&&(p=null),!h)throw new Error("Name required to get request listener");for(var O=0,T=[c,gt()];O<T.length;O++){var D=T[O];if(D){var A=$.get(D);if(A){var C=A[h];if(C){if(p&&typeof p=="string"){if(C[p])return C[p];if(C.__domain_regex__)for(var H=0,z=C.__domain_regex__;H<z.length;H++){var V=z[H],q=V.listener;if(de(V.regex,p))return q}}if(C["*"])return C["*"]}}}}}function bh(o,h,c,p){var $=p.on,O=p.send,T=Hi({name:c.name,win:o,domain:h}),D=c.name==="postrobot_method"&&c.data&&typeof c.data.name=="string"?c.data.name+"()":c.name;function A(C,H,z){return W.flush().then(function(){if(!c.fireAndForget&&!F(o))try{return bs(o,h,{id:l(),origin:P(window),type:"postrobot_message_response",hash:c.hash,name:c.name,ack:C,data:H,error:z},{on:$,send:O})}catch(V){throw new Error("Send response message failed for "+D+" in "+P()+`

`+ut(V))}})}return W.all([W.flush().then(function(){if(!c.fireAndForget&&!F(o))try{return bs(o,h,{id:l(),origin:P(window),type:"postrobot_message_ack",hash:c.hash,name:c.name},{on:$,send:O})}catch(C){throw new Error("Send ack message failed for "+D+" in "+P()+`

`+ut(C))}}),W.try(function(){if(!T)throw new Error("No handler found for post message: "+c.name+" from "+h+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return T.handler({source:o,origin:h,data:c.data})}).then(function(C){return A("success",C)},function(C){return A("error",null,C)})]).then(Ve).catch(function(C){if(T&&T.handleError)return T.handleError(C);throw C})}function Sh(o,h,c){if(!Vi(c.hash)){var p=Wi(c.hash);if(!p)throw new Error("No handler found for post message ack for message: "+c.name+" from "+h+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!de(p.domain,h))throw new Error("Ack origin "+h+" does not match domain "+p.domain.toString());if(o!==p.win)throw new Error("Ack source does not match registered window")}catch($){p.promise.reject($)}p.ack=!0}}function Ph(o,h,c){if(!Vi(c.hash)){var p=Wi(c.hash);if(!p)throw new Error("No handler found for post message response for message: "+c.name+" from "+h+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!de(p.domain,h))throw new Error("Response origin "+h+" does not match domain "+($=p.domain,Array.isArray($)?"("+$.join(" | ")+")":i($)?"RegExp("+$.toString()+")":$.toString()));var $;if(o!==p.win)throw new Error("Response source does not match registered window");zi(c.hash),c.ack==="error"?p.promise.reject(c.error):c.ack==="success"&&p.promise.resolve({source:o,origin:h,data:c.data})}}function Ui(o,h){var c=h.on,p=h.send,$=we("receivedMessages");try{if(!window||window.closed||!o.source)return}catch{return}var O=o.source,T=o.origin,D=function(H,z,V,q){var ne=q.on,te=q.send,re;try{re=Mi(z,V,H,{on:ne,send:te})}catch{return}if(re&&typeof re=="object"&&re!==null){var pe=re.__post_robot_10_0_46__;if(Array.isArray(pe))return pe}}(o.data,O,T,{on:c,send:p});if(D){Ti(O);for(var A=0;A<D.length;A++){var C=D[A];if($.has(C.id)||($.set(C.id,!0),F(O)&&!C.fireAndForget))return;C.origin.indexOf("file:")===0&&(T="file://");try{C.type==="postrobot_message_request"?bh(O,T,C,{on:c,send:p}):C.type==="postrobot_message_response"?Ph(O,T,C):C.type==="postrobot_message_ack"&&Sh(O,T,C)}catch(H){setTimeout(function(){throw H},0)}}}}function Nt(o,h,c){if(!o)throw new Error("Expected name");if(typeof(h=h||{})=="function"&&(c=h,h={}),!c)throw new Error("Expected handler");var p=function $(O,T){var D=O.name,A=O.win,C=O.domain,H=je("requestListeners");if(!D||typeof D!="string")throw new Error("Name required to add request listener");if(A&&A!=="*"&&qe.isProxyWindow(A)){var z=A.awaitWindow().then(function(Se){return $({name:D,win:Se,domain:C},T)});return{cancel:function(){z.then(function(Se){return Se.cancel()},Ve)}}}var V=A;if(Array.isArray(V)){for(var q=[],ne=0,te=V;ne<te.length;ne++)q.push($({name:D,domain:C,win:te[ne]},T));return{cancel:function(){for(var Se=0;Se<q.length;Se++)q[Se].cancel()}}}if(Array.isArray(C)){for(var re=[],pe=0,Re=C;pe<Re.length;pe++)re.push($({name:D,win:V,domain:Re[pe]},T));return{cancel:function(){for(var Se=0;Se<re.length;Se++)re[Se].cancel()}}}var $e=Hi({name:D,win:V,domain:C});V&&V!=="*"||(V=gt());var me=(C=C||"*").toString();if($e)throw V&&C?new Error("Request listener already exists for "+D+" on domain "+C.toString()+" for "+(V===gt()?"wildcard":"specified")+" window"):V?new Error("Request listener already exists for "+D+" for "+(V===gt()?"wildcard":"specified")+" window"):C?new Error("Request listener already exists for "+D+" on domain "+C.toString()):new Error("Request listener already exists for "+D);var Oe=H.getOrSet(V,function(){return{}}),ce=lt(Oe,D,function(){return{}}),ge,Ke;return Rt(C)?(ge=lt(ce,"__domain_regex__",function(){return[]})).push(Ke={regex:C,listener:T}):ce[me]=T,{cancel:function(){delete ce[me],Ke&&(ge.splice(ge.indexOf(Ke,1)),ge.length||delete ce.__domain_regex__),Object.keys(ce).length||delete Oe[D],V&&!Object.keys(Oe).length&&H.del(V)}}}({name:o,win:h.window,domain:h.domain||"*"},{handler:c||h.handler,handleError:h.errorHandler||function($){throw $}});return{cancel:function(){p.cancel()}}}function Rh(o,h,c){typeof(h=h||{})=="function"&&(c=h,h={});var p=new W,$;return h.errorHandler=function(O){$.cancel(),p.reject(O)},$=Nt(o,h,function(O){if($.cancel(),p.resolve(O),c)return c(O)}),p.cancel=$.cancel,p}var vt=function o(h,c,p,$){var O=($=$||{}).domain||"*",T=$.timeout||-1,D=$.timeout||5e3,A=$.fireAndForget||!1;return qe.toProxyWindow(h,{send:o}).awaitWindow().then(function(C){return W.try(function(){if(function(H,z,V){if(!H)throw new Error("Expected name");if(typeof V!="string"&&!Array.isArray(V)&&!Rt(V))throw new TypeError("Can not send "+H+". Expected domain "+JSON.stringify(V)+" to be a string, array, or regex");if(F(z))throw new Error("Can not send "+H+". Target window is closed")}(c,C,O),function(H,z){var V=ue(z);if(V)return V===H;if(z===H||function(te){te===void 0&&(te=window);try{if(te.top)return te.top}catch{}if(u(te)===te)return te;try{if(v(window,te)&&window.top)return window.top}catch{}try{if(v(te,window)&&window.top)return window.top}catch{}for(var re=0,pe=function $e(me){for(var Oe=[],ce=0,ge=R(me);ce<ge.length;ce++){var Ke=ge[ce];Oe.push(Ke);for(var Se=0,pr=$e(Ke);Se<pr.length;Se++)Oe.push(pr[Se])}return Oe}(te);re<pe.length;re++){var Re=pe[re];try{if(Re.top)return Re.top}catch{}if(u(Re)===Re)return Re}}(z)===z)return!1;for(var q=0,ne=R(H);q<ne.length;q++)if(ne[q]===z)return!0;return!1}(window,C))return function(H,z,V){z===void 0&&(z=5e3),V===void 0&&(V="Window");var q=function(ne){return je("helloPromises").getOrSet(ne,function(){return new W})}(H);return z!==-1&&(q=q.timeout(z,new Error(V+" did not load after "+z+"ms"))),q}(C,D)}).then(function(H){return function(z,V,q,ne){var te=ne.send;return W.try(function(){return typeof V=="string"?V:W.try(function(){return q||gs(z,{send:te}).then(function(re){return re.domain})}).then(function(re){if(!de(V,V))throw new Error("Domain "+qt(V)+" does not match "+qt(V));return re})})}(C,O,(H===void 0?{}:H).domain,{send:o})}).then(function(H){var z=H,V=c==="postrobot_method"&&p&&typeof p.name=="string"?p.name+"()":c,q=new W,ne=c+"_"+l();if(!A){var te={name:c,win:C,domain:z,promise:q};(function(ce,ge){we("responseListeners").set(ce,ge)})(ne,te);var re=je("requestPromises").getOrSet(C,function(){return[]});re.push(q),q.catch(function(){(function(ce){we("erroredResponseListeners").set(ce,!0)})(ne),zi(ne)});var pe=function(ce){return je("knownWindows").get(ce,!1)}(C)?1e4:2e3,Re=T,$e=pe,me=Re,Oe=function(ce,ge){var Ke;return function Se(){Ke=setTimeout(function(){(function(){if(F(C))return q.reject(new Error("Window closed for "+c+" before "+(te.ack?"response":"ack")));if(te.cancelled)return q.reject(new Error("Response listener was cancelled for "+c));$e=Math.max($e-500,0),me!==-1&&(me=Math.max(me-500,0)),te.ack||$e!==0?me===0&&q.reject(new Error("No response for postMessage "+V+" in "+P()+" in "+Re+"ms")):q.reject(new Error("No ack for postMessage "+V+" in "+P()+" in "+pe+"ms"))})(),Se()},500)}(),{cancel:function(){clearTimeout(Ke)}}}();q.finally(function(){Oe.cancel(),re.splice(re.indexOf(q,1))}).catch(Ve)}return bs(C,z,{id:l(),origin:P(window),type:"postrobot_message_request",hash:ne,name:c,data:p,fireAndForget:A},{on:Nt,send:o}).then(function(){return A?q.resolve():q},function(ce){throw new Error("Send request message failed for "+V+" in "+P()+`

`+ut(ce))})})})};function Oh(o,h,c){return Li(o,h,c,{on:Nt,send:vt})}function Ih(o,h,c){return Mi(o,h,c,{send:vt})}function Nh(o){return new qe({send:vt,win:o})}function jh(o){return qe.toProxyWindow(o,{send:vt})}function Fi(){dt().initialized||(dt().initialized=!0,h=(o={on:Nt,send:vt}).on,c=o.send,(p=dt()).receiveMessage=p.receiveMessage||function($){return Ui($,{on:h,send:c})},function($){var O=$.on,T=$.send;we().getOrSet("postMessageListener",function(){return function(D,A,C){return D.addEventListener("message",C),{cancel:function(){D.removeEventListener("message",C)}}}(window,0,function(D){(function(A,C){var H=C.on,z=C.send;W.try(function(){var V=A.source||A.sourceElement,q=A.origin||A.originalEvent&&A.originalEvent.origin,ne=A.data;if(q==="null"&&(q="file://"),V){if(!q)throw new Error("Post message did not have origin domain");Ui({source:V,origin:q,data:ne},{on:H,send:z})}})})(D,{on:O,send:T})})})}({on:Nt,send:vt}),function($){var O=$.on,T=$.send;we("builtinListeners").getOrSet("helloListener",function(){var D=O("postrobot_hello",{domain:"*"},function(C){return Xr(C.source,{domain:C.origin}),{instanceID:hr()}}),A=ue();return A&&gs(A,{send:T}).catch(function(C){}),D})}({on:Nt,send:vt}));var o,h,c,p}function Th(){(function(){for(var h=we("responseListeners"),c=0,p=h.keys();c<p.length;c++){var $=p[c],O=h.get($);O&&(O.cancelled=!0),h.del($)}})(),(o=we().get("postMessageListener"))&&o.cancel();var o;delete window.__post_robot_10_0_46__}var Ch=!0;function Ah(o){for(var h=0,c=je("requestPromises").get(o,[]);h<c.length;h++)c[h].reject(new Error("Window "+(F(o)?"closed":"cleaned up")+" before response")).catch(Ve)}Fi()}])})})(ti);var ud=ti.exports;(function(e){e.exports=ud,e.exports.default=e.exports})(ei);var ld=ei.exports;const yt=_e(ld);class ct{constructor(t,r){ve(this,"configuration");ve(this,"wpWindow");this.configuration=t,this.wpWindow=r}async handle(t){return!1}}class dd extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;const{recordId:r,recordType:n}=t;try{this.wpWindow.contentWindow.postMessage({action:"changeContactAssignment",data:{recordType:n,recordId:r}},this.wpWindow.src)}catch{return!1}return!0}}class fd extends ct{async handle(){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;const{token:t,domain:r}=this.configuration.authData,n=this.configuration.mode==="dev"?localStorage.getItem("communicationWpUrl")||"https://dev-webphone.fcc-offline.v":null;try{this.wpWindow.contentWindow.postMessage({action:"open",data:{token:t,domain:r,communicationUrl:n}},this.wpWindow.src)}catch{return!1}return!0}}class hd extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;try{this.wpWindow.contentWindow.postMessage({action:"changeUserStatus",data:{statusId:t.statusId}},this.wpWindow.src)}catch{return!1}return!0}}class pd extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;try{this.wpWindow.contentWindow.postMessage({action:"addStyles",data:t},this.wpWindow.src)}catch{return!1}return!0}}class md extends ct{async handle(){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;try{this.wpWindow.contentWindow.postMessage({action:"webphone-force-logout"},this.wpWindow.src)}catch{return!1}return!0}}class yd extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;const{phoneNumber:r,vid:n,ticket:s}=t;try{this.wpWindow.contentWindow.postMessage({action:"call",data:{phoneNumber:r,extraParams:{vid:n,ticket:s}}},this.wpWindow.src)}catch{return!1}return!0}}class $d extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;const{ticketId:r,ticketNumber:n,subject:s}=t;try{this.wpWindow.contentWindow.postMessage({action:"setRelatedTo",data:{ticketId:r,ticketNumber:n,subject:s}},this.wpWindow.src)}catch{return!1}return!0}}class gd extends ct{constructor(r,n,s,i,a,f){super(r,n);ve(this,"setIsLoaded");ve(this,"authorizeWp");ve(this,"logoutWp");ve(this,"setCss");Jr(this,Ft,!1);Jr(this,xr,!1);this.setIsLoaded=s,this.authorizeWp=i,this.logoutWp=a,this.setCss=f}async authorizeWebphone(){if(!Br(this,Ft)){Yr(this,Ft,!0);let r=setTimeout(()=>{Br(this,xr)||(this.configuration.adapter.loader.prompt(""),Yr(this,Ft,!1)),clearTimeout(r)},15*1e3);this.authorizeWp().then(()=>clearTimeout(r))}}async handle(r){var n,s,i,a;if((s=(n=this.wpWindow)==null?void 0:n.getAttribute("src"))!=null&&s.includes(r.origin)){const{action:f=null,data:d=null}=r.data;try{let m=!1;switch(this.configuration.mode==="dev"&&f&&console.log(`[SDK][WebphoneEventHandler] received message from ${f}:`,d),f){case"userStatusChanged":case"phoneStatusChanged":if(["ready","busy","suspend","away","wrap","pause","in_campaign"].includes(d.status)&&((a=(i=this.configuration.adapter).onUserStatusChanged)==null||a.call(i,d.id,d.status)),["ready","idle","notready","busy"].includes(d.status)){const u=d.status,g=["ready","idle"].includes(u);m=u==="busy",this.configuration.adapter.onToggleClick2Dial(g,u)}break;case"showObject":if(!d.id)throw new Error("showObject event must have id");this.configuration.adapter.navigateToObjectHandler&&this.configuration.adapter.navigateToObjectHandler(d.id),this.configuration.adapter.popSoftphoneHandler&&this.configuration.adapter.popSoftphoneHandler(!m);break;case"navigateToObject":this.configuration.adapter.navigateToObjectHandler&&this.configuration.adapter.navigateToObjectHandler(d.id);break;case"create":await this.configuration.adapter.createEntityHandler(d);break;case"linkToCurrent":this.configuration.adapter.linkToCurrentHandler&&this.configuration.adapter.linkToCurrentHandler(d.id);break;case"webphone-login-ready":this.authorizeWebphone();break;case"webphone-ready":this.setIsLoaded(!0),this.authorizeWebphone(),this.configuration.adapter.loader.finish();break;case"webphone-loaded":this.configuration.adapter.popSoftphoneHandler&&this.configuration.adapter.popSoftphoneHandler(!0),this.configuration.adapter.loader.finish();break;case"webphone-ready-to-call":break;case"webphone-auth-error":this.setCss("body { display: none !important; }"),this.configuration.adapter.loader.error(d.error??"AUTH_ERROR",d.message??"");break;default:return!1}}catch(m){return this.configuration.mode==="dev"&&console.error(`[SDK][WebphoneEventHandler] error in action ${f}:`,m.message),!1}return!0}return!1}}Ft=new WeakMap,xr=new WeakMap;var ns={exports:{}};const vd="2.0.0",ri=256,wd=Number.MAX_SAFE_INTEGER||9007199254740991,Ed=16,_d=ri-6;var Mr={MAX_LENGTH:ri,MAX_SAFE_COMPONENT_LENGTH:Ed,MAX_SAFE_BUILD_LENGTH:_d,MAX_SAFE_INTEGER:wd,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:vd,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Wr=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=Mr,i=Wr;t=e.exports={};const a=t.re=[],f=t.safeRe=[],d=t.src=[],m=t.safeSrc=[],u=t.t={};let g=0;const N="[a-zA-Z0-9-]",b=[["\\s",1],["\\d",s],[N,n]],P=S=>{for(const[v,R]of b)S=S.split(`${v}*`).join(`${v}{0,${R}}`).split(`${v}+`).join(`${v}{1,${R}}`);return S},E=(S,v,R)=>{const L=P(v),G=g++;i(S,G,v),u[S]=G,d[G]=v,m[G]=L,a[G]=new RegExp(v,R?"g":void 0),f[G]=new RegExp(L,R?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${N}*`),E("MAINVERSION",`(${d[u.NUMERICIDENTIFIER]})\\.(${d[u.NUMERICIDENTIFIER]})\\.(${d[u.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${d[u.NUMERICIDENTIFIERLOOSE]})\\.(${d[u.NUMERICIDENTIFIERLOOSE]})\\.(${d[u.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${d[u.NUMERICIDENTIFIER]}|${d[u.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${d[u.NUMERICIDENTIFIERLOOSE]}|${d[u.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${d[u.PRERELEASEIDENTIFIER]}(?:\\.${d[u.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${d[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[u.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${N}+`),E("BUILD",`(?:\\+(${d[u.BUILDIDENTIFIER]}(?:\\.${d[u.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${d[u.MAINVERSION]}${d[u.PRERELEASE]}?${d[u.BUILD]}?`),E("FULL",`^${d[u.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${d[u.MAINVERSIONLOOSE]}${d[u.PRERELEASELOOSE]}?${d[u.BUILD]}?`),E("LOOSE",`^${d[u.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${d[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${d[u.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${d[u.XRANGEIDENTIFIER]})(?:\\.(${d[u.XRANGEIDENTIFIER]})(?:\\.(${d[u.XRANGEIDENTIFIER]})(?:${d[u.PRERELEASE]})?${d[u.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${d[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[u.XRANGEIDENTIFIERLOOSE]})(?:${d[u.PRERELEASELOOSE]})?${d[u.BUILD]}?)?)?`),E("XRANGE",`^${d[u.GTLT]}\\s*${d[u.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${d[u.GTLT]}\\s*${d[u.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),E("COERCE",`${d[u.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",d[u.COERCEPLAIN]+`(?:${d[u.PRERELEASE]})?(?:${d[u.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",d[u.COERCE],!0),E("COERCERTLFULL",d[u.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${d[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",E("TILDE",`^${d[u.LONETILDE]}${d[u.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${d[u.LONETILDE]}${d[u.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${d[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",E("CARET",`^${d[u.LONECARET]}${d[u.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${d[u.LONECARET]}${d[u.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${d[u.GTLT]}\\s*(${d[u.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${d[u.GTLT]}\\s*(${d[u.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${d[u.GTLT]}\\s*(${d[u.LOOSEPLAIN]}|${d[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${d[u.XRANGEPLAIN]})\\s+-\\s+(${d[u.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${d[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[u.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ns,ns.exports);var cr=ns.exports;const bd=Object.freeze({loose:!0}),Sd=Object.freeze({});var ss=e=>e?typeof e!="object"?bd:e:Sd;const ni=/^[0-9]+$/,si=(e,t)=>{const r=ni.test(e),n=ni.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var oi={compareIdentifiers:si,rcompareIdentifiers:(e,t)=>si(t,e)};const zr=Wr,{MAX_LENGTH:ii,MAX_SAFE_INTEGER:Vr}=Mr,{safeRe:ai,safeSrc:ci,t:Hr}=cr,Pd=ss,{compareIdentifiers:Ht}=oi;var ke=class st{constructor(t,r){if(r=Pd(r),t instanceof st){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>ii)throw new TypeError(`version is longer than ${ii} characters`);zr("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?ai[Hr.LOOSE]:ai[Hr.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Vr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vr||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<Vr)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(zr("SemVer.compare",this.version,this.options,t),!(t instanceof st)){if(typeof t=="string"&&t===this.version)return 0;t=new st(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof st||(t=new st(t,this.options)),Ht(this.major,t.major)||Ht(this.minor,t.minor)||Ht(this.patch,t.patch)}comparePre(t){if(t instanceof st||(t=new st(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],s=t.prerelease[r];if(zr("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Ht(n,s)}while(++r)}compareBuild(t){t instanceof st||(t=new st(t,this.options));let r=0;do{const n=this.build[r],s=t.build[r];if(zr("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Ht(n,s)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const s=new RegExp(`^${this.options.loose?ci[Hr.PRERELEASELOOSE]:ci[Hr.PRERELEASE]}$`),i=`-${r}`.match(s);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),Ht(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const ui=ke;var Ut=(e,t,r=!1)=>{if(e instanceof ui)return e;try{return new ui(e,t)}catch(n){if(!r)return null;throw n}};const Rd=Ut;var Od=(e,t)=>{const r=Rd(e,t);return r?r.version:null};const Id=Ut;var Nd=(e,t)=>{const r=Id(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};const li=ke;var jd=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new li(e instanceof li?e.version:e,r).inc(t,n,s).version}catch{return null}};const di=Ut;var Td=(e,t)=>{const r=di(e,null,!0),n=di(t,null,!0),s=r.compare(n);if(s===0)return null;const i=s>0,a=i?r:n,f=i?n:r,d=!!a.prerelease.length;if(!!f.prerelease.length&&!d){if(!f.patch&&!f.minor)return"major";if(f.compareMain(a)===0)return f.minor&&!f.patch?"minor":"patch"}const u=d?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};const Cd=ke;var Ad=(e,t)=>new Cd(e,t).major;const kd=ke;var Dd=(e,t)=>new kd(e,t).minor;const Ld=ke;var Md=(e,t)=>new Ld(e,t).patch;const Wd=Ut;var zd=(e,t)=>{const r=Wd(e,t);return r&&r.prerelease.length?r.prerelease:null};const fi=ke;var Ye=(e,t,r)=>new fi(e,r).compare(new fi(t,r));const Vd=Ye;var Hd=(e,t,r)=>Vd(t,e,r);const Ud=Ye;var Fd=(e,t)=>Ud(e,t,!0);const hi=ke;var os=(e,t,r)=>{const n=new hi(e,r),s=new hi(t,r);return n.compare(s)||n.compareBuild(s)};const qd=os;var Gd=(e,t)=>e.sort((r,n)=>qd(r,n,t));const Kd=os;var xd=(e,t)=>e.sort((r,n)=>Kd(n,r,t));const Xd=Ye;var Ur=(e,t,r)=>Xd(e,t,r)>0;const Bd=Ye;var is=(e,t,r)=>Bd(e,t,r)<0;const Jd=Ye;var pi=(e,t,r)=>Jd(e,t,r)===0;const Yd=Ye;var mi=(e,t,r)=>Yd(e,t,r)!==0;const Zd=Ye;var as=(e,t,r)=>Zd(e,t,r)>=0;const Qd=Ye;var cs=(e,t,r)=>Qd(e,t,r)<=0;const ef=pi,tf=mi,rf=Ur,nf=as,sf=is,of=cs;var yi=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return ef(e,r,n);case"!=":return tf(e,r,n);case">":return rf(e,r,n);case">=":return nf(e,r,n);case"<":return sf(e,r,n);case"<=":return of(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};const af=ke,cf=Ut,{safeRe:Fr,t:qr}=cr;var uf=(e,t)=>{if(e instanceof af)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Fr[qr.COERCEFULL]:Fr[qr.COERCE]);else{const d=t.includePrerelease?Fr[qr.COERCERTLFULL]:Fr[qr.COERCERTL];let m;for(;(m=d.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||m.index+m[0].length!==r.index+r[0].length)&&(r=m),d.lastIndex=m.index+m[1].length+m[2].length;d.lastIndex=-1}if(r===null)return null;const n=r[2],s=r[3]||"0",i=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",f=t.includePrerelease&&r[6]?`+${r[6]}`:"";return cf(`${n}.${s}.${i}${a}${f}`,t)};class lf{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}}var df=lf,us,$i;function Ze(){if($i)return us;$i=1;const e=/\s+/g;class t{constructor(M,Z){if(Z=s(Z),M instanceof t)return M.loose===!!Z.loose&&M.includePrerelease===!!Z.includePrerelease?M:new t(M.raw,Z);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.formatted=void 0,this;if(this.options=Z,this.loose=!!Z.loose,this.includePrerelease=!!Z.includePrerelease,this.raw=M.trim().replace(e," "),this.set=this.raw.split("||").map(x=>this.parseRange(x.trim())).filter(x=>x.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const x=this.set[0];if(this.set=this.set.filter(Y=>!E(Y[0])),this.set.length===0)this.set=[x];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&S(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let M=0;M<this.set.length;M++){M>0&&(this.formatted+="||");const Z=this.set[M];for(let x=0;x<Z.length;x++)x>0&&(this.formatted+=" "),this.formatted+=Z[x].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(M){const x=((this.options.includePrerelease&&b)|(this.options.loose&&P))+":"+M,Y=n.get(x);if(Y)return Y;const W=this.options.loose,k=W?d[m.HYPHENRANGELOOSE]:d[m.HYPHENRANGE];M=M.replace(k,We(this.options.includePrerelease)),a("hyphen replace",M),M=M.replace(d[m.COMPARATORTRIM],u),a("comparator trim",M),M=M.replace(d[m.TILDETRIM],g),a("tilde trim",M),M=M.replace(d[m.CARETTRIM],N),a("caret trim",M);let w=M.split(" ").map(y=>R(y,this.options)).join(" ").split(/\s+/).map(y=>De(y,this.options));W&&(w=w.filter(y=>(a("loose invalid filter",y,this.options),!!y.match(d[m.COMPARATORLOOSE])))),a("range list",w);const I=new Map,_=w.map(y=>new i(y,this.options));for(const y of _){if(E(y))return[y];I.set(y.value,y)}I.size>1&&I.has("")&&I.delete("");const l=[...I.values()];return n.set(x,l),l}intersects(M,Z){if(!(M instanceof t))throw new TypeError("a Range is required");return this.set.some(x=>v(x,Z)&&M.set.some(Y=>v(Y,Z)&&x.every(W=>Y.every(k=>W.intersects(k,Z)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new f(M,this.options)}catch{return!1}for(let Z=0;Z<this.set.length;Z++)if(ze(this.set[Z],M,this.options))return!0;return!1}}us=t;const r=df,n=new r,s=ss,i=Gr(),a=Wr,f=ke,{safeRe:d,t:m,comparatorTrimReplace:u,tildeTrimReplace:g,caretTrimReplace:N}=cr,{FLAG_INCLUDE_PRERELEASE:b,FLAG_LOOSE:P}=Mr,E=U=>U.value==="<0.0.0-0",S=U=>U.value==="",v=(U,M)=>{let Z=!0;const x=U.slice();let Y=x.pop();for(;Z&&x.length;)Z=x.every(W=>Y.intersects(W,M)),Y=x.pop();return Z},R=(U,M)=>(a("comp",U,M),U=ue(U,M),a("caret",U),U=G(U,M),a("tildes",U),U=Ce(U,M),a("xrange",U),U=Qe(U,M),a("stars",U),U),L=U=>!U||U.toLowerCase()==="x"||U==="*",G=(U,M)=>U.trim().split(/\s+/).map(Z=>F(Z,M)).join(" "),F=(U,M)=>{const Z=M.loose?d[m.TILDELOOSE]:d[m.TILDE];return U.replace(Z,(x,Y,W,k,w)=>{a("tilde",U,x,Y,W,k,w);let I;return L(Y)?I="":L(W)?I=`>=${Y}.0.0 <${+Y+1}.0.0-0`:L(k)?I=`>=${Y}.${W}.0 <${Y}.${+W+1}.0-0`:w?(a("replaceTilde pr",w),I=`>=${Y}.${W}.${k}-${w} <${Y}.${+W+1}.0-0`):I=`>=${Y}.${W}.${k} <${Y}.${+W+1}.0-0`,a("tilde return",I),I})},ue=(U,M)=>U.trim().split(/\s+/).map(Z=>de(Z,M)).join(" "),de=(U,M)=>{a("caret",U,M);const Z=M.loose?d[m.CARETLOOSE]:d[m.CARET],x=M.includePrerelease?"-0":"";return U.replace(Z,(Y,W,k,w,I)=>{a("caret",U,Y,W,k,w,I);let _;return L(W)?_="":L(k)?_=`>=${W}.0.0${x} <${+W+1}.0.0-0`:L(w)?W==="0"?_=`>=${W}.${k}.0${x} <${W}.${+k+1}.0-0`:_=`>=${W}.${k}.0${x} <${+W+1}.0.0-0`:I?(a("replaceCaret pr",I),W==="0"?k==="0"?_=`>=${W}.${k}.${w}-${I} <${W}.${k}.${+w+1}-0`:_=`>=${W}.${k}.${w}-${I} <${W}.${+k+1}.0-0`:_=`>=${W}.${k}.${w}-${I} <${+W+1}.0.0-0`):(a("no pr"),W==="0"?k==="0"?_=`>=${W}.${k}.${w}${x} <${W}.${k}.${+w+1}-0`:_=`>=${W}.${k}.${w}${x} <${W}.${+k+1}.0-0`:_=`>=${W}.${k}.${w} <${+W+1}.0.0-0`),a("caret return",_),_})},Ce=(U,M)=>(a("replaceXRanges",U,M),U.split(/\s+/).map(Z=>He(Z,M)).join(" ")),He=(U,M)=>{U=U.trim();const Z=M.loose?d[m.XRANGELOOSE]:d[m.XRANGE];return U.replace(Z,(x,Y,W,k,w,I)=>{a("xRange",U,x,Y,W,k,w,I);const _=L(W),l=_||L(k),y=l||L(w),j=y;return Y==="="&&j&&(Y=""),I=M.includePrerelease?"-0":"",_?Y===">"||Y==="<"?x="<0.0.0-0":x="*":Y&&j?(l&&(k=0),w=0,Y===">"?(Y=">=",l?(W=+W+1,k=0,w=0):(k=+k+1,w=0)):Y==="<="&&(Y="<",l?W=+W+1:k=+k+1),Y==="<"&&(I="-0"),x=`${Y+W}.${k}.${w}${I}`):l?x=`>=${W}.0.0${I} <${+W+1}.0.0-0`:y&&(x=`>=${W}.${k}.0${I} <${W}.${+k+1}.0-0`),a("xRange return",x),x})},Qe=(U,M)=>(a("replaceStars",U,M),U.trim().replace(d[m.STAR],"")),De=(U,M)=>(a("replaceGTE0",U,M),U.trim().replace(d[M.includePrerelease?m.GTE0PRE:m.GTE0],"")),We=U=>(M,Z,x,Y,W,k,w,I,_,l,y,j)=>(L(x)?Z="":L(Y)?Z=`>=${x}.0.0${U?"-0":""}`:L(W)?Z=`>=${x}.${Y}.0${U?"-0":""}`:k?Z=`>=${Z}`:Z=`>=${Z}${U?"-0":""}`,L(_)?I="":L(l)?I=`<${+_+1}.0.0-0`:L(y)?I=`<${_}.${+l+1}.0-0`:j?I=`<=${_}.${l}.${y}-${j}`:U?I=`<${_}.${l}.${+y+1}-0`:I=`<=${I}`,`${Z} ${I}`.trim()),ze=(U,M,Z)=>{for(let x=0;x<U.length;x++)if(!U[x].test(M))return!1;if(M.prerelease.length&&!Z.includePrerelease){for(let x=0;x<U.length;x++)if(a(U[x].semver),U[x].semver!==i.ANY&&U[x].semver.prerelease.length>0){const Y=U[x].semver;if(Y.major===M.major&&Y.minor===M.minor&&Y.patch===M.patch)return!0}return!1}return!0};return us}var ls,gi;function Gr(){if(gi)return ls;gi=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,g){if(g=r(g),u instanceof t){if(u.loose===!!g.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,g),this.options=g,this.loose=!!g.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const g=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],N=u.match(g);if(!N)throw new TypeError(`Invalid comparator: ${u}`);this.operator=N[1]!==void 0?N[1]:"",this.operator==="="&&(this.operator=""),N[2]?this.semver=new f(N[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new f(u,this.options)}catch{return!1}return i(u,this.operator,this.semver,this.options)}intersects(u,g){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(u.value,g).test(this.value):u.operator===""?u.value===""?!0:new d(this.value,g).test(u.semver):(g=r(g),g.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||i(this.semver,"<",u.semver,g)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||i(this.semver,">",u.semver,g)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}ls=t;const r=ss,{safeRe:n,t:s}=cr,i=yi,a=Wr,f=ke,d=Ze();return ls}const ff=Ze();var Kr=(e,t,r)=>{try{t=new ff(t,r)}catch{return!1}return t.test(e)};const hf=Ze();var pf=(e,t)=>new hf(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));const mf=ke,yf=Ze();var $f=(e,t,r)=>{let n=null,s=null,i=null;try{i=new yf(t,r)}catch{return null}return e.forEach(a=>{i.test(a)&&(!n||s.compare(a)===-1)&&(n=a,s=new mf(n,r))}),n};const gf=ke,vf=Ze();var wf=(e,t,r)=>{let n=null,s=null,i=null;try{i=new vf(t,r)}catch{return null}return e.forEach(a=>{i.test(a)&&(!n||s.compare(a)===1)&&(n=a,s=new gf(n,r))}),n};const ds=ke,Ef=Ze(),vi=Ur;var _f=(e,t)=>{e=new Ef(e,t);let r=new ds("0.0.0");if(e.test(r)||(r=new ds("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const s=e.set[n];let i=null;s.forEach(a=>{const f=new ds(a.semver.version);switch(a.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!i||vi(f,i))&&(i=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!r||vi(r,i))&&(r=i)}return r&&e.test(r)?r:null};const bf=Ze();var Sf=(e,t)=>{try{return new bf(e,t).range||"*"}catch{return null}};const Pf=ke,wi=Gr(),{ANY:Rf}=wi,Of=Ze(),If=Kr,Ei=Ur,_i=is,Nf=cs,jf=as;var fs=(e,t,r,n)=>{e=new Pf(e,n),t=new Of(t,n);let s,i,a,f,d;switch(r){case">":s=Ei,i=Nf,a=_i,f=">",d=">=";break;case"<":s=_i,i=jf,a=Ei,f="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(If(e,t,n))return!1;for(let m=0;m<t.set.length;++m){const u=t.set[m];let g=null,N=null;if(u.forEach(b=>{b.semver===Rf&&(b=new wi(">=0.0.0")),g=g||b,N=N||b,s(b.semver,g.semver,n)?g=b:a(b.semver,N.semver,n)&&(N=b)}),g.operator===f||g.operator===d||(!N.operator||N.operator===f)&&i(e,N.semver))return!1;if(N.operator===d&&a(e,N.semver))return!1}return!0};const Tf=fs;var Cf=(e,t,r)=>Tf(e,t,">",r);const Af=fs;var kf=(e,t,r)=>Af(e,t,"<",r);const bi=Ze();var Df=(e,t,r)=>(e=new bi(e,r),t=new bi(t,r),e.intersects(t,r));const Lf=Kr,Mf=Ye;var Wf=(e,t,r)=>{const n=[];let s=null,i=null;const a=e.sort((u,g)=>Mf(u,g,r));for(const u of a)Lf(u,t,r)?(i=u,s||(s=u)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const f=[];for(const[u,g]of n)u===g?f.push(u):!g&&u===a[0]?f.push("*"):g?u===a[0]?f.push(`<=${g}`):f.push(`${u} - ${g}`):f.push(`>=${u}`);const d=f.join(" || "),m=typeof t.raw=="string"?t.raw:String(t);return d.length<m.length?d:t};const Si=Ze(),hs=Gr(),{ANY:ps}=hs,ur=Kr,ms=Ye,zf=(e,t,r={})=>{if(e===t)return!0;e=new Si(e,r),t=new Si(t,r);let n=!1;e:for(const s of e.set){for(const i of t.set){const a=Hf(s,i,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},Vf=[new hs(">=0.0.0-0")],Pi=[new hs(">=0.0.0")],Hf=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===ps){if(t.length===1&&t[0].semver===ps)return!0;r.includePrerelease?e=Vf:e=Pi}if(t.length===1&&t[0].semver===ps){if(r.includePrerelease)return!0;t=Pi}const n=new Set;let s,i;for(const b of e)b.operator===">"||b.operator===">="?s=Ri(s,b,r):b.operator==="<"||b.operator==="<="?i=Oi(i,b,r):n.add(b.semver);if(n.size>1)return null;let a;if(s&&i){if(a=ms(s.semver,i.semver,r),a>0)return null;if(a===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const b of n){if(s&&!ur(b,String(s),r)||i&&!ur(b,String(i),r))return null;for(const P of t)if(!ur(b,String(P),r))return!1;return!0}let f,d,m,u,g=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,N=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;g&&g.prerelease.length===1&&i.operator==="<"&&g.prerelease[0]===0&&(g=!1);for(const b of t){if(u=u||b.operator===">"||b.operator===">=",m=m||b.operator==="<"||b.operator==="<=",s){if(N&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===N.major&&b.semver.minor===N.minor&&b.semver.patch===N.patch&&(N=!1),b.operator===">"||b.operator===">="){if(f=Ri(s,b,r),f===b&&f!==s)return!1}else if(s.operator===">="&&!ur(s.semver,String(b),r))return!1}if(i){if(g&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===g.major&&b.semver.minor===g.minor&&b.semver.patch===g.patch&&(g=!1),b.operator==="<"||b.operator==="<="){if(d=Oi(i,b,r),d===b&&d!==i)return!1}else if(i.operator==="<="&&!ur(i.semver,String(b),r))return!1}if(!b.operator&&(i||s)&&a!==0)return!1}return!(s&&m&&!i&&a!==0||i&&u&&!s&&a!==0||N||g)},Ri=(e,t,r)=>{if(!e)return t;const n=ms(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Oi=(e,t,r)=>{if(!e)return t;const n=ms(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var Uf=zf;const ys=cr,Ii=Mr,Ff=ke,Ni=oi,qf=Ut,Gf=Od,Kf=Nd,xf=jd,Xf=Td,Bf=Ad,Jf=Dd,Yf=Md,Zf=zd,Qf=Ye,eh=Hd,th=Fd,rh=os,nh=Gd,sh=xd,oh=Ur,ih=is,ah=pi,ch=mi,uh=as,lh=cs,dh=yi,fh=uf,hh=Gr(),ph=Ze();var mh={parse:qf,valid:Gf,clean:Kf,inc:xf,diff:Xf,major:Bf,minor:Jf,patch:Yf,prerelease:Zf,compare:Qf,rcompare:eh,compareLoose:th,compareBuild:rh,sort:nh,rsort:sh,gt:oh,lt:ih,eq:ah,neq:ch,gte:uh,lte:lh,cmp:dh,coerce:fh,Comparator:hh,Range:ph,satisfies:Kr,toComparators:pf,maxSatisfying:$f,minSatisfying:wf,minVersion:_f,validRange:Sf,outside:fs,gtr:Cf,ltr:kf,intersects:Df,simplifyRange:Wf,subset:Uf,SemVer:Ff,re:ys.re,src:ys.src,tokens:ys.t,SEMVER_SPEC_VERSION:Ii.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ii.RELEASE_TYPES,compareIdentifiers:Ni.compareIdentifiers,rcompareIdentifiers:Ni.rcompareIdentifiers};const yh=_e(mh);class $s extends ct{constructor(r,n,s){super(r,n);ve(this,"validatePayloadUsingSchema");this.validatePayloadUsingSchema=s}async handle(r){var i,a,f,d,m,u;const{action:n=null,data:s=null}=r.data;this.configuration.mode==="dev"&&n&&console.log(`[SDK] WebphonePostRobotHandler receiver message for ${n}:`,s);try{switch(n){case"getCallObject":const{callId:g=null}=s||{};if(!g)throw new Error("Missing callId");return await this.configuration.adapter.getCallObject(g);case"getUserStatus":return await((a=(i=this.configuration.adapter).getUserStatus)==null?void 0:a.call(i))||null;case"supportMatrix":return await this.configuration.adapter.supportMatrixHandler();case"searchObjects":return await((d=(f=this.configuration.adapter)==null?void 0:f.searchHandler)==null?void 0:d.call(f,s));case"upsertCallRecord":this.validatePayloadUsingSchema(Ns,s);const S=await this.configuration.adapter.upsertCallRecordHandler(s);if(typeof S=="object"&&!S.id)try{return{id:$s.parseSalesforceResponse(S,["recordId"]).recordId}}catch{}return S;case"linkToCurrent":return this.configuration.adapter.linkToCurrentHandler&&await this.configuration.adapter.linkToCurrentHandler(s.id),!0;case"connectorDetails":const v=((u=(m=this.wpWindow)==null?void 0:m.dataset)==null?void 0:u.packageVersion)??null;return{type:this.configuration.type,version:yh.coerce(v)};case"getIconUrl":const{type:R=null}=s||{};if(!R)throw new Error("[SDK][WebphonePostRobotHandler] Missing type");return await this.configuration.adapter.iconHandler(R);default:return null}}catch(g){return this.configuration.mode==="dev"&&n&&console.error(g.message),null}}static parseSalesforceResponse(r,n=[]){if(typeof r=="object"&&r!==null){const{errors:s=null,returnValue:i=null,success:a=!1}=r;if(a&&i&&n.every(f=>Object.keys(i).includes(f)))return i;if(s)throw s}throw new Error("Invalid Salesforce response format")}}class $h{constructor(t){ve(this,"wpWindow");ve(this,"destinationHost","*");this.wpWindow=t}sendMessage(t,r){this.wpWindow.postMessage({action:t,...r&&{data:r}},this.destinationHost)}async sendAsyncMessage(t,r){const{data:n}=await yt.send(this.wpWindow,t,{action:t,...r&&{data:r}});return n}showObject(t){this.sendMessage("showObject",{id:t})}navigateToObject(t){this.sendMessage("navigateToObject",{id:t})}createEntity(t){this.sendMessage("create",{...t})}async getConnectorDetails(){return await this.sendAsyncMessage("connectorDetails")}async linkToCurrent(t){return await this.sendAsyncMessage("linkToCurrent",{id:t})}async getCallObject(t){return await this.sendAsyncMessage("getCallObject",{callId:t})}async getUserStatus(){return await this.sendAsyncMessage("getUserStatus")}async getIconUrl(t){return await this.sendAsyncMessage("getIconUrl",{type:t})}async getSupportMatrix(){return await this.sendAsyncMessage("supportMatrix")}async searchObjects({phoneNumber:t,vid:r}){return await this.sendAsyncMessage("searchObjects",{phoneNumber:t,vid:r})}async upsertTask(t){return await this.sendAsyncMessage("upsertCallRecord",{...t})}}class gh{constructor(t,r){ve(this,"authorizeHandler");ve(this,"placeCallHandler");ve(this,"assignCallHandler");ve(this,"setTicketHandler");ve(this,"changeUserStatusHandler");ve(this,"setCssApplierHandler");ve(this,"logoutHandler");ve(this,"webphonePostRobotHandler");ve(this,"webphoneEventHandler");ve(this,"ajv");ve(this,"configuration");ve(this,"phoneWindow");ve(this,"wpWindow");Jr(this,lr,!1);this.ajv=new cd({schemas:{"callAssigments.schema.json":Ps,"callTicket.schema.json":Rs,"connectorConfig.schema.json":Is,"createcallRecord.schema.json":Ns,"createEntity.schema.json":Xi,"changeUserStatusSchema.schema.json":Os,"objectDetails.schema.json":Bi,"placeCall.schema.json":js,"searchObjectList.schema.json":Ji,"webphoneAdapter.schema.json":Yi},keywords:[xi()]}),this.phoneWindow=r,this.configuration=this.validConfiguration(t),this.wpWindow=this.validAndPrepareWpWindow(document.querySelector(this.configuration.container))}boot(){this.initHandlers(),this.initListeners()}isLoaded(){return Br(this,lr)}validConfiguration(t){return this.validatePayloadUsingSchema(Is,t),"mode"in t||(t={...t,mode:"prod"}),t}validAndPrepareWpWindow(t){if(t instanceof HTMLIFrameElement){const{WEBPHONE_EMBEDDED_URL:r="https://webphone-connector.fcc-online.pl/",DEV_WEBPHONE_EMBEDDED_URL:n="https://dev-webphone.fcc-offline.v/"}=typeof process<"u"?process.env:{},s=this.configuration.mode==="dev"?localStorage.getItem("wpUrl")||n:r;return t.src.includes(s)||(t.src=s),t}throw new Error("[SDK] Validation error - wpWindow must be IFrame")}validatePayloadUsingSchema(t,r){var s,i;const n=this.ajv.compile(t);if(!n(r))throw new Error(`[SDK] Validation error ${((i=(s=n.errors)==null?void 0:s.at(0))==null?void 0:i.message)||""}`.trim())}initHandlers(){this.authorizeHandler=new fd(this.configuration,this.wpWindow),this.placeCallHandler=new yd(this.configuration,this.wpWindow),this.assignCallHandler=new dd(this.configuration,this.wpWindow),this.setTicketHandler=new $d(this.configuration,this.wpWindow),this.changeUserStatusHandler=new hd(this.configuration,this.wpWindow),this.setCssApplierHandler=new pd(this.configuration,this.wpWindow),this.logoutHandler=new md(this.configuration,this.wpWindow),this.webphonePostRobotHandler=new $s(this.configuration,this.wpWindow,this.validatePayloadUsingSchema),this.webphoneEventHandler=new gd(this.configuration,this.wpWindow,t=>Yr(this,lr,t),this.authorizeWp.bind(this),this.logoutWp.bind(this),this.setCss.bind(this))}initListeners(){if(!this.webphoneEventHandler)throw new Error("[SDK] Handler not initialized");if(this.phoneWindow.addEventListener("message",this.webphoneEventHandler.handle.bind(this.webphoneEventHandler)),!this.webphonePostRobotHandler)throw new Error("[SDK] Handler not initialized");try{yt.on("getCallObject",this.webphonePostRobotHandler.handle.bind(this)),yt.on("supportMatrix",this.webphonePostRobotHandler.handle.bind(this)),yt.on("searchObjects",this.webphonePostRobotHandler.handle.bind(this)),yt.on("upsertCallRecord",this.webphonePostRobotHandler.handle.bind(this)),yt.on("connectorDetails",this.webphonePostRobotHandler.handle.bind(this)),yt.on("linkToCurrent",this.webphonePostRobotHandler.handle.bind(this)),yt.on("getIconUrl",this.webphonePostRobotHandler.handle.bind(this))}catch{}}async placeCall(t){if(!this.placeCallHandler)throw new Error("[SDK] Handler not initialized");return this.validatePayloadUsingSchema(js,t),this.placeCallHandler.handle(t)}async changeContactAssigments(t){if(!this.assignCallHandler)throw new Error("[SDK] Handler not initialized");return this.validatePayloadUsingSchema(Ps,t),this.assignCallHandler.handle(t)}async changeUserStatus(t){if(!this.changeUserStatusHandler)throw new Error("[SDK] Handler not initialized");return this.validatePayloadUsingSchema(Os,t),this.changeUserStatusHandler.handle(t)}async setTicket(t){if(!this.setTicketHandler)throw new Error("[SDK] Handler not initialized");return this.validatePayloadUsingSchema(Rs,t),this.setTicketHandler.handle(t)}async setCss(t){if(!this.setCssApplierHandler)throw new Error("[SDK] Handler not initialized");return this.setCssApplierHandler.handle(t)}async authorizeWp(){if(!this.authorizeHandler)throw new Error("[SDK] Handler not initialized");return this.authorizeHandler.handle()}async logoutWp(){if(!this.logoutHandler)throw new Error("[SDK] Handler not initialized");return this.logoutHandler.handle()}}lr=new WeakMap,le.ConnectorBridge=$h,le.default=gh,Object.defineProperties(le,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});typeof window<"u"&&(window.WebphoneConnectorSDK=WebphoneConnectorSdkExports.default,window.WebphoneConnectorSDKVersion="1.0.13");
