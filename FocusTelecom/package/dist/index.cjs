"use strict";var oa=Object.defineProperty;var Ms=e=>{throw TypeError(e)};var ia=(e,t,r)=>t in e?oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ge=(e,t,r)=>ia(e,typeof t!="symbol"?t+"":t,r),Ws=(e,t,r)=>t.has(e)||Ms("Cannot "+r);var fr=(e,t,r)=>(Ws(e,t,"read from private field"),r?r.call(e):t.get(e)),hr=(e,t,r)=>t.has(e)?Ms("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),pr=(e,t,r,n)=>(Ws(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hn={exports:{}},se={},or={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(R){if(super(),!e.IDENTIFIER.test(R))throw new Error("CodeGen: name must be a valid identifier");this.str=R}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(R){super(),this._items=typeof R=="string"?[R]:R}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const R=this._items[0];return R===""||R==='""'}get str(){var R;return(R=this._str)!==null&&R!==void 0?R:this._str=this._items.reduce((L,G)=>`${L}${G}`,"")}get names(){var R;return(R=this._names)!==null&&R!==void 0?R:this._names=this._items.reduce((L,G)=>(G instanceof r&&(L[G.str]=(L[G.str]||0)+1),L),{})}}e._Code=n,e.nil=new n("");function s($,...R){const L=[$[0]];let G=0;for(;G<R.length;)f(L,R[G]),L.push($[++G]);return new n(L)}e._=s;const i=new n("+");function a($,...R){const L=[b($[0])];let G=0;for(;G<R.length;)L.push(i),f(L,R[G]),L.push(i,b($[++G]));return d(L),new n(L)}e.str=a;function f($,R){R instanceof n?$.push(...R._items):R instanceof r?$.push(R):$.push(v(R))}e.addCodeArg=f;function d($){let R=1;for(;R<$.length-1;){if($[R]===i){const L=m($[R-1],$[R+1]);if(L!==void 0){$.splice(R-1,3,L);continue}$[R++]="+"}R++}}function m($,R){if(R==='""')return $;if($==='""')return R;if(typeof $=="string")return R instanceof r||$[$.length-1]!=='"'?void 0:typeof R!="string"?`${$.slice(0,-1)}${R}"`:R[0]==='"'?$.slice(0,-1)+R.slice(1):void 0;if(typeof R=="string"&&R[0]==='"'&&!($ instanceof r))return`"${$}${R.slice(1)}`}function u($,R){return R.emptyStr()?$:$.emptyStr()?R:a`${$}${R}`}e.strConcat=u;function v($){return typeof $=="number"||typeof $=="boolean"||$===null?$:b(Array.isArray($)?$.join(","):$)}function N($){return new n(b($))}e.stringify=N;function b($){return JSON.stringify($).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=b;function P($){return typeof $=="string"&&e.IDENTIFIER.test($)?new n(`.${$}`):s`[${$}]`}e.getProperty=P;function E($){if(typeof $=="string"&&e.IDENTIFIER.test($))return new n(`${$}`);throw new Error(`CodeGen: invalid export name: ${$}, use explicit $id name mapping`)}e.getEsmExportName=E;function S($){return new n($.toString())}e.regexpCode=S})(or);var pn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=or;class r extends Error{constructor(m){super(`CodeGen: "code" for ${m} not defined`),this.value=m.value}}var n;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:m,parent:u}={}){this._names={},this._prefixes=m,this._parent=u}toName(m){return m instanceof t.Name?m:this.name(m)}name(m){return new t.Name(this._newName(m))}_newName(m){const u=this._names[m]||this._nameGroup(m);return`${m}${u.index++}`}_nameGroup(m){var u,v;if(!((v=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||v===void 0)&&v.has(m)||this._prefixes&&!this._prefixes.has(m))throw new Error(`CodeGen: prefix "${m}" is not allowed in this scope`);return this._names[m]={prefix:m,index:0}}}e.Scope=s;class i extends t.Name{constructor(m,u){super(u),this.prefix=m}setValue(m,{property:u,itemIndex:v}){this.value=m,this.scopePath=(0,t._)`.${new t.Name(u)}[${v}]`}}e.ValueScopeName=i;const a=(0,t._)`\n`;class f extends s{constructor(m){super(m),this._values={},this._scope=m.scope,this.opts={...m,_n:m.lines?a:t.nil}}get(){return this._scope}name(m){return new i(m,this._newName(m))}value(m,u){var v;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(m),{prefix:b}=N,P=(v=u.key)!==null&&v!==void 0?v:u.ref;let E=this._values[b];if(E){const R=E.get(P);if(R)return R}else E=this._values[b]=new Map;E.set(P,N);const S=this._scope[b]||(this._scope[b]=[]),$=S.length;return S[$]=u.ref,N.setValue(u,{property:b,itemIndex:$}),N}getValue(m,u){const v=this._values[m];if(v)return v.get(u)}scopeRefs(m,u=this._values){return this._reduceValues(u,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${m}${v.scopePath}`})}scopeCode(m=this._values,u,v){return this._reduceValues(m,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},u,v)}_reduceValues(m,u,v={},N){let b=t.nil;for(const P in m){const E=m[P];if(!E)continue;const S=v[P]=v[P]||new Map;E.forEach($=>{if(S.has($))return;S.set($,n.Started);let R=u($);if(R){const L=this.opts.es5?e.varKinds.var:e.varKinds.const;b=(0,t._)`${b}${L} ${$} = ${R};${this.opts._n}`}else if(R=N==null?void 0:N($))b=(0,t._)`${b}${R}${this.opts._n}`;else throw new r($);S.set($,n.Completed)})}return b}}e.ValueScope=f})(pn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=or,r=pn;var n=or;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=pn;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(l,y){return this}}class a extends i{constructor(l,y,j){super(),this.varKind=l,this.name=y,this.rhs=j}render({es5:l,_n:y}){const j=l?r.varKinds.var:this.varKind,B=this.rhs===void 0?"":` = ${this.rhs}`;return`${j} ${this.name}${B};`+y}optimizeNames(l,y){if(l[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,l,y)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class f extends i{constructor(l,y,j){super(),this.lhs=l,this.rhs=y,this.sideEffects=j}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,y){if(!(this.lhs instanceof t.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,l,y),this}get names(){const l=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ke(l,this.rhs)}}class d extends f{constructor(l,y,j,B){super(l,j,B),this.op=y}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class m extends i{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class u extends i{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class v extends i{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class N extends i{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,y){return this.code=U(this.code,l,y),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class b extends i{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((y,j)=>y+j.render(l),"")}optimizeNodes(){const{nodes:l}=this;let y=l.length;for(;y--;){const j=l[y].optimizeNodes();Array.isArray(j)?l.splice(y,1,...j):j?l[y]=j:l.splice(y,1)}return l.length>0?this:void 0}optimizeNames(l,y){const{nodes:j}=this;let B=j.length;for(;B--;){const X=j[B];X.optimizeNames(l,y)||(M(l,X.names),j.splice(B,1))}return j.length>0?this:void 0}get names(){return this.nodes.reduce((l,y)=>Ae(l,y.names),{})}}class P extends b{render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class E extends b{}class S extends P{}S.kind="else";class $ extends P{constructor(l,y){super(y),this.condition=l}render(l){let y=`if(${this.condition})`+super.render(l);return this.else&&(y+="else "+this.else.render(l)),y}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let y=this.else;if(y){const j=y.optimizeNodes();y=this.else=Array.isArray(j)?new S(j):j}if(y)return l===!1?y instanceof $?y:y.nodes:this.nodes.length?this:new $(Z(l),y instanceof $?[y]:y.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,y){var j;if(this.else=(j=this.else)===null||j===void 0?void 0:j.optimizeNames(l,y),!!(super.optimizeNames(l,y)||this.else))return this.condition=U(this.condition,l,y),this}get names(){const l=super.names;return ke(l,this.condition),this.else&&Ae(l,this.else.names),l}}$.kind="if";class R extends P{}R.kind="for";class L extends R{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,y){if(super.optimizeNames(l,y))return this.iteration=U(this.iteration,l,y),this}get names(){return Ae(super.names,this.iteration.names)}}class G extends R{constructor(l,y,j,B){super(),this.varKind=l,this.name=y,this.from=j,this.to=B}render(l){const y=l.es5?r.varKinds.var:this.varKind,{name:j,from:B,to:X}=this;return`for(${y} ${j}=${B}; ${j}<${X}; ${j}++)`+super.render(l)}get names(){const l=ke(super.names,this.from);return ke(l,this.to)}}class F extends R{constructor(l,y,j,B){super(),this.loop=l,this.varKind=y,this.name=j,this.iterable=B}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,y){if(super.optimizeNames(l,y))return this.iterable=U(this.iterable,l,y),this}get names(){return Ae(super.names,this.iterable.names)}}class ue extends P{constructor(l,y,j){super(),this.name=l,this.args=y,this.async=j}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}ue.kind="func";class le extends b{render(l){return"return "+super.render(l)}}le.kind="return";class Ie extends P{render(l){let y="try"+super.render(l);return this.catch&&(y+=this.catch.render(l)),this.finally&&(y+=this.finally.render(l)),y}optimizeNodes(){var l,y;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(y=this.finally)===null||y===void 0||y.optimizeNodes(),this}optimizeNames(l,y){var j,B;return super.optimizeNames(l,y),(j=this.catch)===null||j===void 0||j.optimizeNames(l,y),(B=this.finally)===null||B===void 0||B.optimizeNames(l,y),this}get names(){const l=super.names;return this.catch&&Ae(l,this.catch.names),this.finally&&Ae(l,this.finally.names),l}}class We extends P{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}We.kind="catch";class qe extends P{render(l){return"finally"+super.render(l)}}qe.kind="finally";class je{constructor(l,y={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...y,_n:y.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,y){const j=this._extScope.value(l,y);return(this._values[j.prefix]||(this._values[j.prefix]=new Set)).add(j),j}getScopeValue(l,y){return this._extScope.getValue(l,y)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,y,j,B){const X=this._scope.toName(y);return j!==void 0&&B&&(this._constants[X.str]=j),this._leafNode(new a(l,X,j)),X}const(l,y,j){return this._def(r.varKinds.const,l,y,j)}let(l,y,j){return this._def(r.varKinds.let,l,y,j)}var(l,y,j){return this._def(r.varKinds.var,l,y,j)}assign(l,y,j){return this._leafNode(new f(l,y,j))}add(l,y){return this._leafNode(new d(l,e.operators.ADD,y))}code(l){return typeof l=="function"?l():l!==t.nil&&this._leafNode(new N(l)),this}object(...l){const y=["{"];for(const[j,B]of l)y.length>1&&y.push(","),y.push(j),(j!==B||this.opts.es5)&&(y.push(":"),(0,t.addCodeArg)(y,B));return y.push("}"),new t._Code(y)}if(l,y,j){if(this._blockNode(new $(l)),y&&j)this.code(y).else().code(j).endIf();else if(y)this.code(y).endIf();else if(j)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new $(l))}else(){return this._elseNode(new S)}endIf(){return this._endBlockNode($,S)}_for(l,y){return this._blockNode(l),y&&this.code(y).endFor(),this}for(l,y){return this._for(new L(l),y)}forRange(l,y,j,B,X=this.opts.es5?r.varKinds.var:r.varKinds.let){const ae=this._scope.toName(l);return this._for(new G(X,ae,y,j),()=>B(ae))}forOf(l,y,j,B=r.varKinds.const){const X=this._scope.toName(l);if(this.opts.es5){const ae=y instanceof t.Name?y:this.var("_arr",y);return this.forRange("_i",0,(0,t._)`${ae}.length`,ie=>{this.var(X,(0,t._)`${ae}[${ie}]`),j(X)})}return this._for(new F("of",B,X,y),()=>j(X))}forIn(l,y,j,B=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,t._)`Object.keys(${y})`,j);const X=this._scope.toName(l);return this._for(new F("in",B,X,y),()=>j(X))}endFor(){return this._endBlockNode(R)}label(l){return this._leafNode(new m(l))}break(l){return this._leafNode(new u(l))}return(l){const y=new le;if(this._blockNode(y),this.code(l),y.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(le)}try(l,y,j){if(!y&&!j)throw new Error('CodeGen: "try" without "catch" and "finally"');const B=new Ie;if(this._blockNode(B),this.code(l),y){const X=this.name("e");this._currNode=B.catch=new We(X),y(X)}return j&&(this._currNode=B.finally=new qe,this.code(j)),this._endBlockNode(We,qe)}throw(l){return this._leafNode(new v(l))}block(l,y){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(y),this}endBlock(l){const y=this._blockStarts.pop();if(y===void 0)throw new Error("CodeGen: not in self-balancing block");const j=this._nodes.length-y;if(j<0||l!==void 0&&j!==l)throw new Error(`CodeGen: wrong number of nodes: ${j} vs ${l} expected`);return this._nodes.length=y,this}func(l,y=t.nil,j,B){return this._blockNode(new ue(l,y,j)),B&&this.code(B).endFunc(),this}endFunc(){return this._endBlockNode(ue)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,y){const j=this._currNode;if(j instanceof l||y&&j instanceof y)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${y?`${l.kind}/${y.kind}`:l.kind}"`)}_elseNode(l){const y=this._currNode;if(!(y instanceof $))throw new Error('CodeGen: "else" without "if"');return this._currNode=y.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const y=this._nodes;y[y.length-1]=l}}e.CodeGen=je;function Ae(_,l){for(const y in l)_[y]=(_[y]||0)+(l[y]||0);return _}function ke(_,l){return l instanceof t._CodeOrName?Ae(_,l.names):_}function U(_,l,y){if(_ instanceof t.Name)return j(_);if(!B(_))return _;return new t._Code(_._items.reduce((X,ae)=>(ae instanceof t.Name&&(ae=j(ae)),ae instanceof t._Code?X.push(...ae._items):X.push(ae),X),[]));function j(X){const ae=y[X.str];return ae===void 0||l[X.str]!==1?X:(delete l[X.str],ae)}function B(X){return X instanceof t._Code&&X._items.some(ae=>ae instanceof t.Name&&l[ae.str]===1&&y[ae.str]!==void 0)}}function M(_,l){for(const y in l)_[y]=(_[y]||0)-(l[y]||0)}function Z(_){return typeof _=="boolean"||typeof _=="number"||_===null?!_:(0,t._)`!${I(_)}`}e.not=Z;const x=w(e.operators.AND);function Y(..._){return _.reduce(x)}e.and=Y;const W=w(e.operators.OR);function k(..._){return _.reduce(W)}e.or=k;function w(_){return(l,y)=>l===t.nil?y:y===t.nil?l:(0,t._)`${I(l)} ${_} ${I(y)}`}function I(_){return _ instanceof t.Name?_:(0,t._)`(${_})`}})(se);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=se,n=["undefined","string","number","object","function","boolean","symbol"];function s(){return{keyword:"typeof",schemaType:["string","array"],code(i){const{data:a,schema:f,schemaValue:d}=i;i.fail(typeof f=="string"?(0,r._)`typeof ${a} != ${f}`:(0,r._)`${d}.indexOf(typeof ${a}) < 0`)},metaSchema:{anyOf:[{type:"string",enum:n},{type:"array",items:{type:"string",enum:n}}]}}}t.default=s,e.exports=s})(hn,hn.exports);var ca=hn.exports;const ua=Mr(ca),la="#/definitions/CallAssignments",da={CallAssignments:{description:"Structure describies payload used to change call assignments in FCC.",type:"object",properties:{recordId:{description:"Identifier of the object representing the company associated with the call.",type:"string"},recordType:{description:"Identifier of the object representing the individual associated with the call.",type:"string"}},required:["recordId","recordType"]}},fa="http://json-schema.org/draft-07/schema#",ha="https://webphone-connector.fcc-online.pl/src/schema/callAssignments.schema.json",zs={$ref:la,definitions:da,$schema:fa,$id:ha},pa="#/definitions/CallTicket",ma={CallTicket:{type:"object",properties:{ticketNumber:{description:"Thing number that is used in CRM for display entity.",type:"string"},ticketId:{description:"Thing Id in crm system.",type:"string"},subject:{description:"Thing subject/topic a brief description.",type:"string"}}}},ya="http://json-schema.org/draft-07/schema#",ga="https://webphone-connector.fcc-online.pl/src/schema/callTicket.schema.json",Vs={$ref:pa,definitions:ma,$schema:ya,$id:ga},va="#/definitions/ChangeUserStatus",$a={ChangeUserStatus:{type:"object",properties:{statusId:{type:"string"}},required:["statusId"]}},wa="http://json-schema.org/draft-07/schema#",Ea="https://webphone-connector.fcc-online.pl/src/schema/changeUserStatus.schema.json",Hs={$ref:va,definitions:$a,$schema:wa,$id:Ea},_a="#/definitions/WebphoneConnectorConfig",ba={WebphoneConnectorConfig:{description:"Structure of Webphone Connector Configuration",type:"object",properties:{type:{description:"Integration type supported by FCC backend. Contact CC for get integration name.",type:"string"},container:{description:'Selector for html object, phone iframe will be placed in it. If object is iframe, ensure it\'s not visible by default `style="visibility:hidden"`.',type:"string"},userId:{description:"Current logged in user Id in your system.",type:"string"},mode:{description:"Connector mode.",enum:["dev","prod"],type:"string"},adapter:{$ref:"webphoneAdapter.schema.json",description:"Webphone adapter in your system."},authData:{$ref:"#/definitions/AuthData",description:"Authorization Data for current user."}},required:["adapter","authData","container","type","userId"]},AuthData:{type:"object",properties:{domain:{description:"Fcc tenant domain.",type:"string"},token:{description:"Token retrived from external-api for authorizating connector instance.",type:"string"}},required:["domain","token"]}},Sa="http://json-schema.org/draft-07/schema#",Pa="https://webphone-connector.fcc-online.pl/src/schema/connectorConfig.schema.json",Us={$ref:_a,definitions:ba,$schema:Sa,$id:Pa},Ra="#/definitions/CallRecordData",Oa={CallRecordData:{description:"Create call record representing call in your system.",type:"object",properties:{callId:{description:"Call Id.",type:"number"},phoneNumber:{description:"Phone number.",anyOf:[{type:"string",pattern:"^[0-9]*$"},{type:"string",pattern:"^\\+[0-9]*$"}]},direction:{description:"Call direction from CallCenter perspective.",enum:["inbound","outbound"],type:"string"},subject:{description:"Call record subject ex. Inbound Call (Answered) from: +48XXXXXXX.",type:"string"}}}},Ia="http://json-schema.org/draft-07/schema#",Na="https://webphone-connector.fcc-online.pl/src/schema/createCallRecord.schema.json",Wo={$ref:Ra,definitions:Oa,$schema:Ia,$id:Na},ja="#/definitions/CreateEntity",Ta={CreateEntity:{type:"object",properties:{entity:{description:"Entity type to create.",type:"string"},phoneNumber:{description:"Phone number.",anyOf:[{type:"string",pattern:"^[0-9]*$"},{type:"string",pattern:"^\\+[0-9]*$"}]},vid:{description:"Id from crm system.",type:"string"},callId:{description:"Call id from FCC",type:"string"}}}},Ca="http://json-schema.org/draft-07/schema#",Aa="https://webphone-connector.fcc-online.pl/src/schema/createEntity.schema.json",ka={$ref:ja,definitions:Ta,$schema:Ca,$id:Aa},Da="#/definitions/CallObjectDetails",La={CallObjectDetails:{description:"Structure describies given call object from your system. Used to retrive data for both ended and active calls.",type:"object",properties:{accountId:{description:"Identifier of the object representing the company associated with the call.",type:"string"},whoId:{description:"Identifier of the object representing the individual associated with the call.",type:"string"},whatId:{description:"The identifier of the object representing the Ticket (case) associated with the call. This should be something that can be done.",type:"string"},id:{description:"System identifier for the connection provided.",type:"string"}}}},Ma="http://json-schema.org/draft-07/schema#",Wa="https://webphone-connector.fcc-online.pl/src/schema/objectDetails.schema.json",za={$ref:Da,definitions:La,$schema:Ma,$id:Wa},Va="#/definitions/PlaceCall",Ha={PlaceCall:{type:"object",properties:{phoneNumber:{$ref:"#/definitions/PhoneNumber"},vid:{description:"ID of object that we will call.",type:"string"},ticket:{description:"Thing releated to called vid",type:["null","string"]}},required:["phoneNumber","vid"]},PhoneNumber:{anyOf:[{type:"string",pattern:"^[0-9]*$"},{type:"string",pattern:"^\\+[0-9]*$"}]}},Ua="http://json-schema.org/draft-07/schema#",Fa="https://webphone-connector.fcc-online.pl/src/schema/placeCall.schema.json",Fs={$ref:Va,definitions:Ha,$schema:Ua,$id:Fa},qa="#/definitions/SearchObjectList",Ga={SearchObjectList:{description:"Structure describing given object from your system. Used to retrive data for ended and active calls.",type:"object",properties:{id:{description:"System ID of object.",type:"string"},vid:{description:"Object ID for external systems.",type:"string"},ownerId:{description:"Object owner id.",type:"string"},type:{description:"Entity type.",type:"string"},phone:{$ref:"#/definitions/PhoneNumber",description:"Phone number"},email:{description:"Email",type:"string",pattern:"^.*@.*\\\\\\..*$"},displayName:{description:"Name in format for displaying in phone.",type:"string"},profileUrl:{description:"Absolute url to object.",type:"string"},company:{description:"Company name.",type:"string"},firstname:{description:"Firstname.",type:"string"},lastname:{description:"LastName.",type:"string"},portalId:{description:"Object id for accessing using URI's, null otherwise.",type:"string"}},required:["displayName","id","ownerId","phone","type","vid"]},PhoneNumber:{anyOf:[{type:"string",pattern:"^[0-9]*$"},{type:"string",pattern:"^\\+[0-9]*$"}]}},Ka="http://json-schema.org/draft-07/schema#",xa="https://webphone-connector.fcc-online.pl/src/schema/searchObjectList.schema.json",Xa={$ref:qa,definitions:Ga,$schema:Ka,$id:xa},Ba="#/definitions/WebphoneAdapter",Ja={WebphoneAdapter:{description:"Structure of Webphone Adapter",type:"object",properties:{loader:{$ref:"#/definitions/AdapterLoader"},createEntityHandler:{typeof:"function"},onToggleClick2Dial:{typeof:"function"},onUserStatusChanged:{typeof:"function"},getCallObject:{typeof:"function"},getUserStatus:{typeof:"function"},linkToCurrentHandler:{typeof:"function"},supportMatrixHandler:{typeof:"function"},searchHandler:{typeof:"function"},popSoftphoneHandler:{typeof:"function"},navigateToObjectHandler:{typeof:"function"},upsertCallRecordHandler:{typeof:"function"},iconHandler:{typeof:"function"}},required:["createEntityHandler","getCallObject","iconHandler","loader","onToggleClick2Dial","supportMatrixHandler","upsertCallRecordHandler"]},AdapterLoader:{type:"object",properties:{prompt:{typeof:"function"},finish:{typeof:"function"},error:{typeof:"function"}},required:["error","finish","prompt"]}},Ya="http://json-schema.org/draft-07/schema#",Za="https://webphone-connector.fcc-online.pl/src/schema/webphoneAdapter.schema.json",Qa={$ref:Ba,definitions:Ja,$schema:Ya,$id:Za};var mn={exports:{}},zo={},Xe={},zt={},ar={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.checkStrictMode=K.getErrorPath=K.Type=K.useFunc=K.setEvaluated=K.evaluatedPropsToName=K.mergeEvaluated=K.eachItem=K.unescapeJsonPointer=K.escapeJsonPointer=K.escapeFragment=K.unescapeFragment=K.schemaRefOrVal=K.schemaHasRulesButRef=K.schemaHasRules=K.checkUnknownRules=K.alwaysValidSchema=K.toHash=void 0;const de=se,ec=or;function tc(e){const t={};for(const r of e)t[r]=!0;return t}K.toHash=tc;function rc(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Vo(e,t),!Ho(t,e.self.RULES.all))}K.alwaysValidSchema=rc;function Vo(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const i in t)s[i]||qo(e,`unknown keyword: "${i}"`)}K.checkUnknownRules=Vo;function Ho(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}K.schemaHasRules=Ho;function nc(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}K.schemaHasRulesButRef=nc;function sc({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,de._)`${r}`}return(0,de._)`${e}${t}${(0,de.getProperty)(n)}`}K.schemaRefOrVal=sc;function oc(e){return Uo(decodeURIComponent(e))}K.unescapeFragment=oc;function ic(e){return encodeURIComponent(bn(e))}K.escapeFragment=ic;function bn(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}K.escapeJsonPointer=bn;function Uo(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}K.unescapeJsonPointer=Uo;function ac(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}K.eachItem=ac;function qs({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,i,a,f)=>{const d=a===void 0?i:a instanceof de.Name?(i instanceof de.Name?e(s,i,a):t(s,i,a),a):i instanceof de.Name?(t(s,a,i),i):r(i,a);return f===de.Name&&!(d instanceof de.Name)?n(s,d):d}}K.mergeEvaluated={props:qs({mergeNames:(e,t,r)=>e.if((0,de._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,de._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,de._)`${r} || {}`).code((0,de._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,de._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,de._)`${r} || {}`),Sn(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Fo}),items:qs({mergeNames:(e,t,r)=>e.if((0,de._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,de._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,de._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,de._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Fo(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,de._)`{}`);return t!==void 0&&Sn(e,r,t),r}K.evaluatedPropsToName=Fo;function Sn(e,t,r){Object.keys(r).forEach(n=>e.assign((0,de._)`${t}${(0,de.getProperty)(n)}`,!0))}K.setEvaluated=Sn;const Gs={};function cc(e,t){return e.scopeValue("func",{ref:t,code:Gs[t.code]||(Gs[t.code]=new ec._Code(t.code))})}K.useFunc=cc;var yn;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(yn||(K.Type=yn={}));function uc(e,t,r){if(e instanceof de.Name){const n=t===yn.Num;return r?n?(0,de._)`"[" + ${e} + "]"`:(0,de._)`"['" + ${e} + "']"`:n?(0,de._)`"/" + ${e}`:(0,de._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,de.getProperty)(e).toString():"/"+bn(e)}K.getErrorPath=uc;function qo(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}K.checkStrictMode=qo;var tt={};Object.defineProperty(tt,"__esModule",{value:!0});const Ne=se,lc={data:new Ne.Name("data"),valCxt:new Ne.Name("valCxt"),instancePath:new Ne.Name("instancePath"),parentData:new Ne.Name("parentData"),parentDataProperty:new Ne.Name("parentDataProperty"),rootData:new Ne.Name("rootData"),dynamicAnchors:new Ne.Name("dynamicAnchors"),vErrors:new Ne.Name("vErrors"),errors:new Ne.Name("errors"),this:new Ne.Name("this"),self:new Ne.Name("self"),scope:new Ne.Name("scope"),json:new Ne.Name("json"),jsonPos:new Ne.Name("jsonPos"),jsonLen:new Ne.Name("jsonLen"),jsonPart:new Ne.Name("jsonPart")};tt.default=lc;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=se,r=K,n=tt;e.keywordError={message:({keyword:S})=>(0,t.str)`must pass "${S}" keyword validation`},e.keyword$DataError={message:({keyword:S,schemaType:$})=>$?(0,t.str)`"${S}" keyword must be ${$} ($data)`:(0,t.str)`"${S}" keyword is invalid ($data)`};function s(S,$=e.keywordError,R,L){const{it:G}=S,{gen:F,compositeRule:ue,allErrors:le}=G,Ie=v(S,$,R);L??(ue||le)?d(F,Ie):m(G,(0,t._)`[${Ie}]`)}e.reportError=s;function i(S,$=e.keywordError,R){const{it:L}=S,{gen:G,compositeRule:F,allErrors:ue}=L,le=v(S,$,R);d(G,le),F||ue||m(L,n.default.vErrors)}e.reportExtraError=i;function a(S,$){S.assign(n.default.errors,$),S.if((0,t._)`${n.default.vErrors} !== null`,()=>S.if($,()=>S.assign((0,t._)`${n.default.vErrors}.length`,$),()=>S.assign(n.default.vErrors,null)))}e.resetErrorsCount=a;function f({gen:S,keyword:$,schemaValue:R,data:L,errsCount:G,it:F}){if(G===void 0)throw new Error("ajv implementation error");const ue=S.name("err");S.forRange("i",G,n.default.errors,le=>{S.const(ue,(0,t._)`${n.default.vErrors}[${le}]`),S.if((0,t._)`${ue}.instancePath === undefined`,()=>S.assign((0,t._)`${ue}.instancePath`,(0,t.strConcat)(n.default.instancePath,F.errorPath))),S.assign((0,t._)`${ue}.schemaPath`,(0,t.str)`${F.errSchemaPath}/${$}`),F.opts.verbose&&(S.assign((0,t._)`${ue}.schema`,R),S.assign((0,t._)`${ue}.data`,L))})}e.extendErrors=f;function d(S,$){const R=S.const("err",$);S.if((0,t._)`${n.default.vErrors} === null`,()=>S.assign(n.default.vErrors,(0,t._)`[${R}]`),(0,t._)`${n.default.vErrors}.push(${R})`),S.code((0,t._)`${n.default.errors}++`)}function m(S,$){const{gen:R,validateName:L,schemaEnv:G}=S;G.$async?R.throw((0,t._)`new ${S.ValidationError}(${$})`):(R.assign((0,t._)`${L}.errors`,$),R.return(!1))}const u={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function v(S,$,R){const{createErrors:L}=S.it;return L===!1?(0,t._)`{}`:N(S,$,R)}function N(S,$,R={}){const{gen:L,it:G}=S,F=[b(G,R),P(S,R)];return E(S,$,F),L.object(...F)}function b({errorPath:S},{instancePath:$}){const R=$?(0,t.str)`${S}${(0,r.getErrorPath)($,r.Type.Str)}`:S;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,R)]}function P({keyword:S,it:{errSchemaPath:$}},{schemaPath:R,parentSchema:L}){let G=L?$:(0,t.str)`${$}/${S}`;return R&&(G=(0,t.str)`${G}${(0,r.getErrorPath)(R,r.Type.Str)}`),[u.schemaPath,G]}function E(S,{params:$,message:R},L){const{keyword:G,data:F,schemaValue:ue,it:le}=S,{opts:Ie,propertyName:We,topSchemaRef:qe,schemaPath:je}=le;L.push([u.keyword,G],[u.params,typeof $=="function"?$(S):$||(0,t._)`{}`]),Ie.messages&&L.push([u.message,typeof R=="function"?R(S):R]),Ie.verbose&&L.push([u.schema,ue],[u.parentSchema,(0,t._)`${qe}${je}`],[n.default.data,F]),We&&L.push([u.propertyName,We])}})(ar);Object.defineProperty(zt,"__esModule",{value:!0});zt.boolOrEmptySchema=zt.topBoolOrEmptySchema=void 0;const dc=ar,fc=se,hc=tt,pc={message:"boolean schema is false"};function mc(e){const{gen:t,schema:r,validateName:n}=e;r===!1?Go(e,!1):typeof r=="object"&&r.$async===!0?t.return(hc.default.data):(t.assign((0,fc._)`${n}.errors`,null),t.return(!0))}zt.topBoolOrEmptySchema=mc;function yc(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),Go(e)):r.var(t,!0)}zt.boolOrEmptySchema=yc;function Go(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,dc.reportError)(s,pc,void 0,t)}var be={},Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.getRules=Pt.isJSONType=void 0;const gc=["string","number","integer","boolean","null","object","array"],vc=new Set(gc);function $c(e){return typeof e=="string"&&vc.has(e)}Pt.isJSONType=$c;function wc(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Pt.getRules=wc;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.shouldUseRule=ot.shouldUseGroup=ot.schemaHasRulesForType=void 0;function Ec({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Ko(e,n)}ot.schemaHasRulesForType=Ec;function Ko(e,t){return t.rules.some(r=>xo(e,r))}ot.shouldUseGroup=Ko;function xo(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}ot.shouldUseRule=xo;Object.defineProperty(be,"__esModule",{value:!0});be.reportTypeError=be.checkDataTypes=be.checkDataType=be.coerceAndCheckDataType=be.getJSONTypes=be.getSchemaTypes=be.DataType=void 0;const _c=Pt,bc=ot,Sc=ar,re=se,Xo=K;var Lt;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Lt||(be.DataType=Lt={}));function Pc(e){const t=Bo(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}be.getSchemaTypes=Pc;function Bo(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(_c.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}be.getJSONTypes=Bo;function Rc(e,t){const{gen:r,data:n,opts:s}=e,i=Oc(t,s.coerceTypes),a=t.length>0&&!(i.length===0&&t.length===1&&(0,bc.schemaHasRulesForType)(e,t[0]));if(a){const f=Pn(t,n,s.strictNumbers,Lt.Wrong);r.if(f,()=>{i.length?Ic(e,t,i):Rn(e)})}return a}be.coerceAndCheckDataType=Rc;const Jo=new Set(["string","number","integer","boolean","null"]);function Oc(e,t){return t?e.filter(r=>Jo.has(r)||t==="array"&&r==="array"):[]}function Ic(e,t,r){const{gen:n,data:s,opts:i}=e,a=n.let("dataType",(0,re._)`typeof ${s}`),f=n.let("coerced",(0,re._)`undefined`);i.coerceTypes==="array"&&n.if((0,re._)`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,re._)`${s}[0]`).assign(a,(0,re._)`typeof ${s}`).if(Pn(t,s,i.strictNumbers),()=>n.assign(f,s))),n.if((0,re._)`${f} !== undefined`);for(const m of r)(Jo.has(m)||m==="array"&&i.coerceTypes==="array")&&d(m);n.else(),Rn(e),n.endIf(),n.if((0,re._)`${f} !== undefined`,()=>{n.assign(s,f),Nc(e,f)});function d(m){switch(m){case"string":n.elseIf((0,re._)`${a} == "number" || ${a} == "boolean"`).assign(f,(0,re._)`"" + ${s}`).elseIf((0,re._)`${s} === null`).assign(f,(0,re._)`""`);return;case"number":n.elseIf((0,re._)`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(f,(0,re._)`+${s}`);return;case"integer":n.elseIf((0,re._)`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(f,(0,re._)`+${s}`);return;case"boolean":n.elseIf((0,re._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(f,!1).elseIf((0,re._)`${s} === "true" || ${s} === 1`).assign(f,!0);return;case"null":n.elseIf((0,re._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(f,null);return;case"array":n.elseIf((0,re._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(f,(0,re._)`[${s}]`)}}}function Nc({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,re._)`${t} !== undefined`,()=>e.assign((0,re._)`${t}[${r}]`,n))}function gn(e,t,r,n=Lt.Correct){const s=n===Lt.Correct?re.operators.EQ:re.operators.NEQ;let i;switch(e){case"null":return(0,re._)`${t} ${s} null`;case"array":i=(0,re._)`Array.isArray(${t})`;break;case"object":i=(0,re._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a((0,re._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return(0,re._)`typeof ${t} ${s} ${e}`}return n===Lt.Correct?i:(0,re.not)(i);function a(f=re.nil){return(0,re.and)((0,re._)`typeof ${t} == "number"`,f,r?(0,re._)`isFinite(${t})`:re.nil)}}be.checkDataType=gn;function Pn(e,t,r,n){if(e.length===1)return gn(e[0],t,r,n);let s;const i=(0,Xo.toHash)(e);if(i.array&&i.object){const a=(0,re._)`typeof ${t} != "object"`;s=i.null?a:(0,re._)`!${t} || ${a}`,delete i.null,delete i.array,delete i.object}else s=re.nil;i.number&&delete i.integer;for(const a in i)s=(0,re.and)(s,gn(a,t,r,n));return s}be.checkDataTypes=Pn;const jc={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,re._)`{type: ${e}}`:(0,re._)`{type: ${t}}`};function Rn(e){const t=Tc(e);(0,Sc.reportError)(t,jc)}be.reportTypeError=Rn;function Tc(e){const{gen:t,data:r,schema:n}=e,s=(0,Xo.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.assignDefaults=void 0;const Ct=se,Cc=K;function Ac(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)Ks(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>Ks(e,i,s.default))}Wr.assignDefaults=Ac;function Ks(e,t,r){const{gen:n,compositeRule:s,data:i,opts:a}=e;if(r===void 0)return;const f=(0,Ct._)`${i}${(0,Ct.getProperty)(t)}`;if(s){(0,Cc.checkStrictMode)(e,`default is ignored for: ${f}`);return}let d=(0,Ct._)`${f} === undefined`;a.useDefaults==="empty"&&(d=(0,Ct._)`${d} || ${f} === null || ${f} === ""`),n.if(d,(0,Ct._)`${f} = ${(0,Ct.stringify)(r)}`)}var Qe={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.validateUnion=oe.validateArray=oe.usePattern=oe.callValidateCode=oe.schemaProperties=oe.allSchemaProperties=oe.noPropertyInData=oe.propertyInData=oe.isOwnProperty=oe.hasPropFunc=oe.reportMissingProp=oe.checkMissingProp=oe.checkReportMissingProp=void 0;const ye=se,On=K,ft=tt,kc=K;function Dc(e,t){const{gen:r,data:n,it:s}=e;r.if(Nn(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ye._)`${t}`},!0),e.error()})}oe.checkReportMissingProp=Dc;function Lc({gen:e,data:t,it:{opts:r}},n,s){return(0,ye.or)(...n.map(i=>(0,ye.and)(Nn(e,t,i,r.ownProperties),(0,ye._)`${s} = ${i}`)))}oe.checkMissingProp=Lc;function Mc(e,t){e.setParams({missingProperty:t},!0),e.error()}oe.reportMissingProp=Mc;function Yo(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ye._)`Object.prototype.hasOwnProperty`})}oe.hasPropFunc=Yo;function In(e,t,r){return(0,ye._)`${Yo(e)}.call(${t}, ${r})`}oe.isOwnProperty=In;function Wc(e,t,r,n){const s=(0,ye._)`${t}${(0,ye.getProperty)(r)} !== undefined`;return n?(0,ye._)`${s} && ${In(e,t,r)}`:s}oe.propertyInData=Wc;function Nn(e,t,r,n){const s=(0,ye._)`${t}${(0,ye.getProperty)(r)} === undefined`;return n?(0,ye.or)(s,(0,ye.not)(In(e,t,r))):s}oe.noPropertyInData=Nn;function Zo(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}oe.allSchemaProperties=Zo;function zc(e,t){return Zo(t).filter(r=>!(0,On.alwaysValidSchema)(e,t[r]))}oe.schemaProperties=zc;function Vc({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:a},f,d,m){const u=m?(0,ye._)`${e}, ${t}, ${n}${s}`:t,v=[[ft.default.instancePath,(0,ye.strConcat)(ft.default.instancePath,i)],[ft.default.parentData,a.parentData],[ft.default.parentDataProperty,a.parentDataProperty],[ft.default.rootData,ft.default.rootData]];a.opts.dynamicRef&&v.push([ft.default.dynamicAnchors,ft.default.dynamicAnchors]);const N=(0,ye._)`${u}, ${r.object(...v)}`;return d!==ye.nil?(0,ye._)`${f}.call(${d}, ${N})`:(0,ye._)`${f}(${N})`}oe.callValidateCode=Vc;const Hc=(0,ye._)`new RegExp`;function Uc({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,ye._)`${s.code==="new RegExp"?Hc:(0,kc.useFunc)(e,s)}(${r}, ${n})`})}oe.usePattern=Uc;function Fc(e){const{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){const f=t.let("valid",!0);return a(()=>t.assign(f,!1)),f}return t.var(i,!0),a(()=>t.break()),i;function a(f){const d=t.const("len",(0,ye._)`${r}.length`);t.forRange("i",0,d,m=>{e.subschema({keyword:n,dataProp:m,dataPropType:On.Type.Num},i),t.if((0,ye.not)(i),f)})}}oe.validateArray=Fc;function qc(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(d=>(0,On.alwaysValidSchema)(s,d))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),f=t.name("_valid");t.block(()=>r.forEach((d,m)=>{const u=e.subschema({keyword:n,schemaProp:m,compositeRule:!0},f);t.assign(a,(0,ye._)`${a} || ${f}`),e.mergeValidEvaluated(u,f)||t.if((0,ye.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}oe.validateUnion=qc;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.validateKeywordUsage=Qe.validSchemaType=Qe.funcKeywordCode=Qe.macroKeywordCode=void 0;const Te=se,_t=tt,Gc=oe,Kc=ar;function xc(e,t){const{gen:r,keyword:n,schema:s,parentSchema:i,it:a}=e,f=t.macro.call(a.self,s,i,a),d=Qo(r,n,f);a.opts.validateSchema!==!1&&a.self.validateSchema(f,!0);const m=r.name("valid");e.subschema({schema:f,schemaPath:Te.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:d,compositeRule:!0},m),e.pass(m,()=>e.error(!0))}Qe.macroKeywordCode=xc;function Xc(e,t){var r;const{gen:n,keyword:s,schema:i,parentSchema:a,$data:f,it:d}=e;Jc(d,t);const m=!f&&t.compile?t.compile.call(d.self,i,a,d):t.validate,u=Qo(n,s,m),v=n.let("valid");e.block$data(v,N),e.ok((r=t.valid)!==null&&r!==void 0?r:v);function N(){if(t.errors===!1)E(),t.modifying&&xs(e),S(()=>e.error());else{const $=t.async?b():P();t.modifying&&xs(e),S(()=>Bc(e,$))}}function b(){const $=n.let("ruleErrs",null);return n.try(()=>E((0,Te._)`await `),R=>n.assign(v,!1).if((0,Te._)`${R} instanceof ${d.ValidationError}`,()=>n.assign($,(0,Te._)`${R}.errors`),()=>n.throw(R))),$}function P(){const $=(0,Te._)`${u}.errors`;return n.assign($,null),E(Te.nil),$}function E($=t.async?(0,Te._)`await `:Te.nil){const R=d.opts.passContext?_t.default.this:_t.default.self,L=!("compile"in t&&!f||t.schema===!1);n.assign(v,(0,Te._)`${$}${(0,Gc.callValidateCode)(e,u,R,L)}`,t.modifying)}function S($){var R;n.if((0,Te.not)((R=t.valid)!==null&&R!==void 0?R:v),$)}}Qe.funcKeywordCode=Xc;function xs(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Te._)`${n.parentData}[${n.parentDataProperty}]`))}function Bc(e,t){const{gen:r}=e;r.if((0,Te._)`Array.isArray(${t})`,()=>{r.assign(_t.default.vErrors,(0,Te._)`${_t.default.vErrors} === null ? ${t} : ${_t.default.vErrors}.concat(${t})`).assign(_t.default.errors,(0,Te._)`${_t.default.vErrors}.length`),(0,Kc.extendErrors)(e)},()=>e.error())}function Jc({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Qo(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Te.stringify)(r)})}function Yc(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Qe.validSchemaType=Yc;function Zc({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const a=s.dependencies;if(a!=null&&a.some(f=>!Object.prototype.hasOwnProperty.call(e,f)))throw new Error(`parent schema must have dependencies of ${i}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const d=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(d);else throw new Error(d)}}Qe.validateKeywordUsage=Zc;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.extendSubschemaMode=yt.extendSubschemaData=yt.getSubschema=void 0;const Ze=se,ei=K;function Qc(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:a}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const f=e.schema[t];return r===void 0?{schema:f,schemaPath:(0,Ze._)`${e.schemaPath}${(0,Ze.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:f[r],schemaPath:(0,Ze._)`${e.schemaPath}${(0,Ze.getProperty)(t)}${(0,Ze.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ei.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:a,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}yt.getSubschema=Qc;function eu(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:a}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=t;if(r!==void 0){const{errorPath:m,dataPathArr:u,opts:v}=t,N=f.let("data",(0,Ze._)`${t.data}${(0,Ze.getProperty)(r)}`,!0);d(N),e.errorPath=(0,Ze.str)`${m}${(0,ei.getErrorPath)(r,n,v.jsPropertySyntax)}`,e.parentDataProperty=(0,Ze._)`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(s!==void 0){const m=s instanceof Ze.Name?s:f.let("data",s,!0);d(m),a!==void 0&&(e.propertyName=a)}i&&(e.dataTypes=i);function d(m){e.data=m,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,m]}}yt.extendSubschemaData=eu;function tu(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}yt.extendSubschemaMode=tu;var Oe={},ti=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var a=i[s];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r},ri={exports:{}},mt=ri.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Rr(t,n,s,e,"",e)};mt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};mt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};mt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};mt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Rr(e,t,r,n,s,i,a,f,d,m){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,i,a,f,d,m);for(var u in n){var v=n[u];if(Array.isArray(v)){if(u in mt.arrayKeywords)for(var N=0;N<v.length;N++)Rr(e,t,r,v[N],s+"/"+u+"/"+N,i,s,u,n,N)}else if(u in mt.propsKeywords){if(v&&typeof v=="object")for(var b in v)Rr(e,t,r,v[b],s+"/"+u+"/"+ru(b),i,s,u,n,b)}else(u in mt.keywords||e.allKeys&&!(u in mt.skipKeywords))&&Rr(e,t,r,v,s+"/"+u,i,s,u,n)}r(n,s,i,a,f,d,m)}}function ru(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var nu=ri.exports;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.getSchemaRefs=Oe.resolveUrl=Oe.normalizeId=Oe._getFullPath=Oe.getFullPath=Oe.inlineRef=void 0;const su=K,ou=ti,iu=nu,au=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function cu(e,t=!0){return typeof e=="boolean"?!0:t===!0?!vn(e):t?ni(e)<=t:!1}Oe.inlineRef=cu;const uu=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function vn(e){for(const t in e){if(uu.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(vn)||typeof r=="object"&&vn(r))return!0}return!1}function ni(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!au.has(r)&&(typeof e[r]=="object"&&(0,su.eachItem)(e[r],n=>t+=ni(n)),t===1/0))return 1/0}return t}function si(e,t="",r){r!==!1&&(t=Mt(t));const n=e.parse(t);return oi(e,n)}Oe.getFullPath=si;function oi(e,t){return e.serialize(t).split("#")[0]+"#"}Oe._getFullPath=oi;const lu=/#\/?$/;function Mt(e){return e?e.replace(lu,""):""}Oe.normalizeId=Mt;function du(e,t,r){return r=Mt(r),e.resolve(t,r)}Oe.resolveUrl=du;const fu=/^[a-z_][-a-z0-9._]*$/i;function hu(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=Mt(e[r]||t),i={"":s},a=si(n,s,!1),f={},d=new Set;return iu(e,{allKeys:!0},(v,N,b,P)=>{if(P===void 0)return;const E=a+N;let S=i[P];typeof v[r]=="string"&&(S=$.call(this,v[r])),R.call(this,v.$anchor),R.call(this,v.$dynamicAnchor),i[N]=S;function $(L){const G=this.opts.uriResolver.resolve;if(L=Mt(S?G(S,L):L),d.has(L))throw u(L);d.add(L);let F=this.refs[L];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?m(v,F.schema,L):L!==Mt(E)&&(L[0]==="#"?(m(v,f[L],L),f[L]=v):this.refs[L]=E),L}function R(L){if(typeof L=="string"){if(!fu.test(L))throw new Error(`invalid anchor "${L}"`);$.call(this,`#${L}`)}}}),f;function m(v,N,b){if(N!==void 0&&!ou(v,N))throw u(b)}function u(v){return new Error(`reference "${v}" resolves to more than one schema`)}}Oe.getSchemaRefs=hu;Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getData=Xe.KeywordCxt=Xe.validateFunctionCode=void 0;const ii=zt,Xs=be,jn=ot,Tr=be,pu=Wr,er=Qe,rn=yt,J=se,Q=tt,mu=Oe,it=K,Bt=ar;function yu(e){if(ui(e)&&(li(e),ci(e))){$u(e);return}ai(e,()=>(0,ii.topBoolOrEmptySchema)(e))}Xe.validateFunctionCode=yu;function ai({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,J._)`${Q.default.data}, ${Q.default.valCxt}`,n.$async,()=>{e.code((0,J._)`"use strict"; ${Bs(r,s)}`),vu(e,s),e.code(i)}):e.func(t,(0,J._)`${Q.default.data}, ${gu(s)}`,n.$async,()=>e.code(Bs(r,s)).code(i))}function gu(e){return(0,J._)`{${Q.default.instancePath}="", ${Q.default.parentData}, ${Q.default.parentDataProperty}, ${Q.default.rootData}=${Q.default.data}${e.dynamicRef?(0,J._)`, ${Q.default.dynamicAnchors}={}`:J.nil}}={}`}function vu(e,t){e.if(Q.default.valCxt,()=>{e.var(Q.default.instancePath,(0,J._)`${Q.default.valCxt}.${Q.default.instancePath}`),e.var(Q.default.parentData,(0,J._)`${Q.default.valCxt}.${Q.default.parentData}`),e.var(Q.default.parentDataProperty,(0,J._)`${Q.default.valCxt}.${Q.default.parentDataProperty}`),e.var(Q.default.rootData,(0,J._)`${Q.default.valCxt}.${Q.default.rootData}`),t.dynamicRef&&e.var(Q.default.dynamicAnchors,(0,J._)`${Q.default.valCxt}.${Q.default.dynamicAnchors}`)},()=>{e.var(Q.default.instancePath,(0,J._)`""`),e.var(Q.default.parentData,(0,J._)`undefined`),e.var(Q.default.parentDataProperty,(0,J._)`undefined`),e.var(Q.default.rootData,Q.default.data),t.dynamicRef&&e.var(Q.default.dynamicAnchors,(0,J._)`{}`)})}function $u(e){const{schema:t,opts:r,gen:n}=e;ai(e,()=>{r.$comment&&t.$comment&&fi(e),Su(e),n.let(Q.default.vErrors,null),n.let(Q.default.errors,0),r.unevaluated&&wu(e),di(e),Ou(e)})}function wu(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,J._)`${r}.evaluated`),t.if((0,J._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,J._)`${e.evaluated}.props`,(0,J._)`undefined`)),t.if((0,J._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,J._)`${e.evaluated}.items`,(0,J._)`undefined`))}function Bs(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,J._)`/*# sourceURL=${r} */`:J.nil}function Eu(e,t){if(ui(e)&&(li(e),ci(e))){_u(e,t);return}(0,ii.boolOrEmptySchema)(e,t)}function ci({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function ui(e){return typeof e.schema!="boolean"}function _u(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&fi(e),Pu(e),Ru(e);const i=n.const("_errs",Q.default.errors);di(e,i),n.var(t,(0,J._)`${i} === ${Q.default.errors}`)}function li(e){(0,it.checkUnknownRules)(e),bu(e)}function di(e,t){if(e.opts.jtd)return Js(e,[],!1,t);const r=(0,Xs.getSchemaTypes)(e.schema),n=(0,Xs.coerceAndCheckDataType)(e,r);Js(e,r,!n,t)}function bu(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,it.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Su(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,it.checkStrictMode)(e,"default is ignored in the schema root")}function Pu(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,mu.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Ru(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function fi({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(s.$comment===!0)e.code((0,J._)`${Q.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const a=(0,J.str)`${n}/$comment`,f=e.scopeValue("root",{ref:t.root});e.code((0,J._)`${Q.default.self}.opts.$comment(${i}, ${a}, ${f}.schema)`)}}function Ou(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,J._)`${Q.default.errors} === 0`,()=>t.return(Q.default.data),()=>t.throw((0,J._)`new ${s}(${Q.default.vErrors})`)):(t.assign((0,J._)`${n}.errors`,Q.default.vErrors),i.unevaluated&&Iu(e),t.return((0,J._)`${Q.default.errors} === 0`))}function Iu({gen:e,evaluated:t,props:r,items:n}){r instanceof J.Name&&e.assign((0,J._)`${t}.props`,r),n instanceof J.Name&&e.assign((0,J._)`${t}.items`,n)}function Js(e,t,r,n){const{gen:s,schema:i,data:a,allErrors:f,opts:d,self:m}=e,{RULES:u}=m;if(i.$ref&&(d.ignoreKeywordsWithRef||!(0,it.schemaHasRulesButRef)(i,u))){s.block(()=>mi(e,"$ref",u.all.$ref.definition));return}d.jtd||Nu(e,t),s.block(()=>{for(const N of u.rules)v(N);v(u.post)});function v(N){(0,jn.shouldUseGroup)(i,N)&&(N.type?(s.if((0,Tr.checkDataType)(N.type,a,d.strictNumbers)),Ys(e,N),t.length===1&&t[0]===N.type&&r&&(s.else(),(0,Tr.reportTypeError)(e)),s.endIf()):Ys(e,N),f||s.if((0,J._)`${Q.default.errors} === ${n||0}`))}}function Ys(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,pu.assignDefaults)(e,t.type),r.block(()=>{for(const i of t.rules)(0,jn.shouldUseRule)(n,i)&&mi(e,i.keyword,i.definition,t.type)})}function Nu(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(ju(e,t),e.opts.allowUnionTypes||Tu(e,t),Cu(e,e.dataTypes))}function ju(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{hi(e.dataTypes,r)||Tn(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),ku(e,t)}}function Tu(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Tn(e,"use allowUnionTypes to allow union type keyword")}function Cu(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,jn.shouldUseRule)(e.schema,s)){const{type:i}=s.definition;i.length&&!i.some(a=>Au(t,a))&&Tn(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Au(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function hi(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function ku(e,t){const r=[];for(const n of e.dataTypes)hi(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function Tn(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,it.checkStrictMode)(e,t,e.opts.strictTypes)}class pi{constructor(t,r,n){if((0,er.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,it.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",yi(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,er.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Q.default.errors))}result(t,r,n){this.failResult((0,J.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,J.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,J._)`${r} !== undefined && (${(0,J.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Bt.reportExtraError:Bt.reportError)(this,this.def.error,r)}$dataError(){(0,Bt.reportError)(this,this.def.$dataError||Bt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Bt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=J.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=J.nil,r=J.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:i,def:a}=this;n.if((0,J.or)((0,J._)`${s} === undefined`,r)),t!==J.nil&&n.assign(t,!0),(i.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==J.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,J.or)(a(),f());function a(){if(n.length){if(!(r instanceof J.Name))throw new Error("ajv implementation error");const d=Array.isArray(n)?n:[n];return(0,J._)`${(0,Tr.checkDataTypes)(d,r,i.opts.strictNumbers,Tr.DataType.Wrong)}`}return J.nil}function f(){if(s.validateSchema){const d=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,J._)`!${d}(${r})`}return J.nil}}subschema(t,r){const n=(0,rn.getSubschema)(this.it,t);(0,rn.extendSubschemaData)(n,this.it,t),(0,rn.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return Eu(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=it.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=it.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,J.Name)),!0}}Xe.KeywordCxt=pi;function mi(e,t,r,n){const s=new pi(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,er.funcKeywordCode)(s,r):"macro"in r?(0,er.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,er.funcKeywordCode)(s,r)}const Du=/^\/(?:[^~]|~0|~1)*$/,Lu=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function yi(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return Q.default.rootData;if(e[0]==="/"){if(!Du.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=Q.default.rootData}else{const m=Lu.exec(e);if(!m)throw new Error(`Invalid JSON-pointer: ${e}`);const u=+m[1];if(s=m[2],s==="#"){if(u>=t)throw new Error(d("property/index",u));return n[t-u]}if(u>t)throw new Error(d("data",u));if(i=r[t-u],!s)return i}let a=i;const f=s.split("/");for(const m of f)m&&(i=(0,J._)`${i}${(0,J.getProperty)((0,it.unescapeJsonPointer)(m))}`,a=(0,J._)`${a} && ${i}`);return a;function d(m,u){return`Cannot access ${m} ${u} levels up, current level is ${t}`}}Xe.getData=yi;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});class Mu extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}cr.default=Mu;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});const nn=Oe;class Wu extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,nn.resolveUrl)(t,r,n),this.missingSchema=(0,nn.normalizeId)((0,nn.getFullPath)(t,this.missingRef))}}Ht.default=Wu;var Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.resolveSchema=Me.getCompilingSchema=Me.resolveRef=Me.compileSchema=Me.SchemaEnv=void 0;const Ge=se,zu=cr,Et=tt,xe=Oe,Zs=K,Vu=Xe;class zr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,xe.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}Me.SchemaEnv=zr;function Cn(e){const t=gi.call(this,e);if(t)return t;const r=(0,xe.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,a=new Ge.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i});let f;e.$async&&(f=a.scopeValue("Error",{ref:zu.default,code:(0,Ge._)`require("ajv/dist/runtime/validation_error").default`}));const d=a.scopeName("validate");e.validateName=d;const m={gen:a,allErrors:this.opts.allErrors,data:Et.default.data,parentData:Et.default.parentData,parentDataProperty:Et.default.parentDataProperty,dataNames:[Et.default.data],dataPathArr:[Ge.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Ge.stringify)(e.schema)}:{ref:e.schema}),validateName:d,ValidationError:f,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Ge.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ge._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),(0,Vu.validateFunctionCode)(m),a.optimize(this.opts.code.optimize);const v=a.toString();u=`${a.scopeRefs(Et.default.scope)}return ${v}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const b=new Function(`${Et.default.self}`,`${Et.default.scope}`,u)(this,this.scope.get());if(this.scope.value(d,{ref:b}),b.errors=null,b.schema=e.schema,b.schemaEnv=e,e.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:d,validateCode:v,scopeValues:a._values}),this.opts.unevaluated){const{props:P,items:E}=m;b.evaluated={props:P instanceof Ge.Name?void 0:P,items:E instanceof Ge.Name?void 0:E,dynamicProps:P instanceof Ge.Name,dynamicItems:E instanceof Ge.Name},b.source&&(b.source.evaluated=(0,Ge.stringify)(b.evaluated))}return e.validate=b,e}catch(v){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),v}finally{this._compilations.delete(e)}}Me.compileSchema=Cn;function Hu(e,t,r){var n;r=(0,xe.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let i=qu.call(this,e,r);if(i===void 0){const a=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:f}=this.opts;a&&(i=new zr({schema:a,schemaId:f,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=Uu.call(this,i)}Me.resolveRef=Hu;function Uu(e){return(0,xe.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Cn.call(this,e)}function gi(e){for(const t of this._compilations)if(Fu(t,e))return t}Me.getCompilingSchema=gi;function Fu(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function qu(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Vr.call(this,e,t)}function Vr(e,t){const r=this.opts.uriResolver.parse(t),n=(0,xe._getFullPath)(this.opts.uriResolver,r);let s=(0,xe.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return sn.call(this,r,e);const i=(0,xe.normalizeId)(n),a=this.refs[i]||this.schemas[i];if(typeof a=="string"){const f=Vr.call(this,e,a);return typeof(f==null?void 0:f.schema)!="object"?void 0:sn.call(this,r,f)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||Cn.call(this,a),i===(0,xe.normalizeId)(t)){const{schema:f}=a,{schemaId:d}=this.opts,m=f[d];return m&&(s=(0,xe.resolveUrl)(this.opts.uriResolver,s,m)),new zr({schema:f,schemaId:d,root:e,baseId:s})}return sn.call(this,r,a)}}Me.resolveSchema=Vr;const Gu=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function sn(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const f of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const d=r[(0,Zs.unescapeFragment)(f)];if(d===void 0)return;r=d;const m=typeof r=="object"&&r[this.opts.schemaId];!Gu.has(f)&&m&&(t=(0,xe.resolveUrl)(this.opts.uriResolver,t,m))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Zs.schemaHasRulesButRef)(r,this.RULES)){const f=(0,xe.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=Vr.call(this,n,f)}const{schemaId:a}=this.opts;if(i=i||new zr({schema:r,schemaId:a,root:n,baseId:t}),i.schema!==i.root.schema)return i}const Ku="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",xu="Meta-schema for $data reference (JSON AnySchema extension proposal)",Xu="object",Bu=["$data"],Ju={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Yu=!1,Zu={$id:Ku,description:xu,type:Xu,required:Bu,properties:Ju,additionalProperties:Yu};var An={},Hr={exports:{}};const Qu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var el={HEX:Qu};const{HEX:tl}=el,rl=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function vi(e){if(wi(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(rl)||[],[r]=t;return r?{host:sl(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Qs(e,t=!1){let r="",n=!0;for(const s of e){if(tl[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return t&&r.length===0&&(r="0"),r}function nl(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let i=!1,a=!1,f=!1;function d(){if(s.length){if(i===!1){const m=Qs(s);if(m!==void 0)n.push(m);else return r.error=!0,!1}s.length=0}return!0}for(let m=0;m<e.length;m++){const u=e[m];if(!(u==="["||u==="]"))if(u===":"){if(a===!0&&(f=!0),!d())break;if(t++,n.push(":"),t>7){r.error=!0;break}m-1>=0&&e[m-1]===":"&&(a=!0);continue}else if(u==="%"){if(!d())break;i=!0}else{s.push(u);continue}}return s.length&&(i?r.zone=s.join(""):f?n.push(s.join("")):n.push(Qs(s))),r.address=n.join(""),r}function $i(e){if(wi(e,":")<2)return{host:e,isIPV6:!1};const t=nl(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,escapedHost:n,isIPV6:!0}}}function sl(e,t){let r="",n=!0;const s=e.length;for(let i=0;i<s;i++){const a=e[i];a==="0"&&n?(i+1<=s&&e[i+1]===t||i+1===s)&&(r+=a,n=!1):(a===t?n=!0:n=!1,r+=a)}return r}function wi(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}const eo=/^\.\.?\//u,to=/^\/\.(?:\/|$)/u,ro=/^\/\.\.(?:\/|$)/u,ol=/^\/?(?:.|\n)*?(?=\/|$)/u;function il(e){const t=[];for(;e.length;)if(e.match(eo))e=e.replace(eo,"");else if(e.match(to))e=e.replace(to,"/");else if(e.match(ro))e=e.replace(ro,"/"),t.pop();else if(e==="."||e==="..")e="";else{const r=e.match(ol);if(r){const n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function al(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function cl(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);const n=vi(r);if(n.isIPV4)r=n.host;else{const s=$i(n.host);s.isIPV6===!0?r=`[${s.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var ul={recomposeAuthority:cl,normalizeComponentEncoding:al,removeDotSegments:il,normalizeIPv4:vi,normalizeIPv6:$i};const ll=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,dl=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Ei(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function _i(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function bi(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function fl(e){return e.secure=Ei(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function hl(e){if((e.port===(Ei(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function pl(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(dl);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${n}:${t.nid||e.nid}`,i=kn[s];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function ml(e,t){const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,i=kn[s];i&&(e=i.serialize(e,t));const a=e,f=e.nss;return a.path=`${n||t.nid}:${f}`,t.skipEscape=!0,a}function yl(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!ll.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function gl(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const Si={scheme:"http",domainHost:!0,parse:_i,serialize:bi},vl={scheme:"https",domainHost:Si.domainHost,parse:_i,serialize:bi},Or={scheme:"ws",domainHost:!0,parse:fl,serialize:hl},$l={scheme:"wss",domainHost:Or.domainHost,parse:Or.parse,serialize:Or.serialize},wl={scheme:"urn",parse:pl,serialize:ml,skipNormalize:!0},El={scheme:"urn:uuid",parse:yl,serialize:gl,skipNormalize:!0},kn={http:Si,https:vl,ws:Or,wss:$l,urn:wl,"urn:uuid":El};var _l=kn;const{normalizeIPv6:bl,normalizeIPv4:Sl,removeDotSegments:Zt,recomposeAuthority:Pl,normalizeComponentEncoding:mr}=ul,Dn=_l;function Rl(e,t){return typeof e=="string"?e=et(at(e,t),t):typeof e=="object"&&(e=at(et(e,t),t)),e}function Ol(e,t,r){const n=Object.assign({scheme:"null"},r),s=Pi(at(e,n),at(t,n),n,!0);return et(s,{...n,skipEscape:!0})}function Pi(e,t,r,n){const s={};return n||(e=at(et(e,r),r),t=at(et(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Zt(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Zt(t.path||""),s.query=t.query):(t.path?(t.path.charAt(0)==="/"?s.path=Zt(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=Zt(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function Il(e,t,r){return typeof e=="string"?(e=unescape(e),e=et(mr(at(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=et(mr(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=et(mr(at(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=et(mr(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function et(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],i=Dn[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");const a=Pl(r);if(a!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(a),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let f=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(f=Zt(f)),a===void 0&&(f=f.replace(/^\/\//u,"/%2F")),s.push(f)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}const Nl=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function jl(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||Nl[t])return!0;return!1}const Tl=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function at(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=e.indexOf("%")!==-1;let i=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const a=e.match(Tl);if(a){if(n.scheme=a[1],n.userinfo=a[3],n.host=a[4],n.port=parseInt(a[5],10),n.path=a[6]||"",n.query=a[7],n.fragment=a[8],isNaN(n.port)&&(n.port=a[5]),n.host){const d=Sl(n.host);if(d.isIPV4===!1){const m=bl(d.host);n.host=m.host.toLowerCase(),i=m.isIPV6}else n.host=d.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const f=Dn[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!f||!f.unicodeSupport)&&n.host&&(r.domainHost||f&&f.domainHost)&&i===!1&&jl(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(d){n.error=n.error||"Host's domain name can not be converted to ASCII: "+d}(!f||f&&!f.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),f&&f.parse&&f.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const Ln={SCHEMES:Dn,normalize:Rl,resolve:Ol,resolveComponents:Pi,equal:Il,serialize:et,parse:at};Hr.exports=Ln;Hr.exports.default=Ln;Hr.exports.fastUri=Ln;var Cl=Hr.exports;Object.defineProperty(An,"__esModule",{value:!0});const Ri=Cl;Ri.code='require("ajv/dist/runtime/uri").default';An.default=Ri;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Xe;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=se;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=cr,s=Ht,i=Pt,a=Me,f=se,d=Oe,m=be,u=K,v=Zu,N=An,b=(k,w)=>new RegExp(k,w);b.code="new RegExp";const P=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),S={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},$={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},R=200;function L(k){var w,I,_,l,y,j,B,X,ae,ie,we,De,rt,Ot,gt,nt,It,Nt,jt,ut,Gt,Kt,st,Tt,ve;const vt=k.strict,lt=(w=k.code)===null||w===void 0?void 0:w.optimize,Pe=lt===!0||lt===void 0?1:lt||0,xt=(_=(I=k.code)===null||I===void 0?void 0:I.regExp)!==null&&_!==void 0?_:b,dr=(l=k.uriResolver)!==null&&l!==void 0?l:N.default;return{strictSchema:(j=(y=k.strictSchema)!==null&&y!==void 0?y:vt)!==null&&j!==void 0?j:!0,strictNumbers:(X=(B=k.strictNumbers)!==null&&B!==void 0?B:vt)!==null&&X!==void 0?X:!0,strictTypes:(ie=(ae=k.strictTypes)!==null&&ae!==void 0?ae:vt)!==null&&ie!==void 0?ie:"log",strictTuples:(De=(we=k.strictTuples)!==null&&we!==void 0?we:vt)!==null&&De!==void 0?De:"log",strictRequired:(Ot=(rt=k.strictRequired)!==null&&rt!==void 0?rt:vt)!==null&&Ot!==void 0?Ot:!1,code:k.code?{...k.code,optimize:Pe,regExp:xt}:{optimize:Pe,regExp:xt},loopRequired:(gt=k.loopRequired)!==null&&gt!==void 0?gt:R,loopEnum:(nt=k.loopEnum)!==null&&nt!==void 0?nt:R,meta:(It=k.meta)!==null&&It!==void 0?It:!0,messages:(Nt=k.messages)!==null&&Nt!==void 0?Nt:!0,inlineRefs:(jt=k.inlineRefs)!==null&&jt!==void 0?jt:!0,schemaId:(ut=k.schemaId)!==null&&ut!==void 0?ut:"$id",addUsedSchema:(Gt=k.addUsedSchema)!==null&&Gt!==void 0?Gt:!0,validateSchema:(Kt=k.validateSchema)!==null&&Kt!==void 0?Kt:!0,validateFormats:(st=k.validateFormats)!==null&&st!==void 0?st:!0,unicodeRegExp:(Tt=k.unicodeRegExp)!==null&&Tt!==void 0?Tt:!0,int32range:(ve=k.int32range)!==null&&ve!==void 0?ve:!0,uriResolver:dr}}class G{constructor(w={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,w=this.opts={...w,...L(w)};const{es5:I,lines:_}=this.opts.code;this.scope=new f.ValueScope({scope:{},prefixes:E,es5:I,lines:_}),this.logger=Ae(w.logger);const l=w.validateFormats;w.validateFormats=!1,this.RULES=(0,i.getRules)(),F.call(this,S,w,"NOT SUPPORTED"),F.call(this,$,w,"DEPRECATED","warn"),this._metaOpts=qe.call(this),w.formats&&Ie.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),w.keywords&&We.call(this,w.keywords),typeof w.meta=="object"&&this.addMetaSchema(w.meta),le.call(this),w.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:w,meta:I,schemaId:_}=this.opts;let l=v;_==="id"&&(l={...v},l.id=l.$id,delete l.$id),I&&w&&this.addMetaSchema(l,l[_],!1)}defaultMeta(){const{meta:w,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof w=="object"?w[I]||w:void 0}validate(w,I){let _;if(typeof w=="string"){if(_=this.getSchema(w),!_)throw new Error(`no schema with key or ref "${w}"`)}else _=this.compile(w);const l=_(I);return"$async"in _||(this.errors=_.errors),l}compile(w,I){const _=this._addSchema(w,I);return _.validate||this._compileSchemaEnv(_)}compileAsync(w,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:_}=this.opts;return l.call(this,w,I);async function l(ie,we){await y.call(this,ie.$schema);const De=this._addSchema(ie,we);return De.validate||j.call(this,De)}async function y(ie){ie&&!this.getSchema(ie)&&await l.call(this,{$ref:ie},!0)}async function j(ie){try{return this._compileSchemaEnv(ie)}catch(we){if(!(we instanceof s.default))throw we;return B.call(this,we),await X.call(this,we.missingSchema),j.call(this,ie)}}function B({missingSchema:ie,missingRef:we}){if(this.refs[ie])throw new Error(`AnySchema ${ie} is loaded but ${we} cannot be resolved`)}async function X(ie){const we=await ae.call(this,ie);this.refs[ie]||await y.call(this,we.$schema),this.refs[ie]||this.addSchema(we,ie,I)}async function ae(ie){const we=this._loading[ie];if(we)return we;try{return await(this._loading[ie]=_(ie))}finally{delete this._loading[ie]}}}addSchema(w,I,_,l=this.opts.validateSchema){if(Array.isArray(w)){for(const j of w)this.addSchema(j,void 0,_,l);return this}let y;if(typeof w=="object"){const{schemaId:j}=this.opts;if(y=w[j],y!==void 0&&typeof y!="string")throw new Error(`schema ${j} must be string`)}return I=(0,d.normalizeId)(I||y),this._checkUnique(I),this.schemas[I]=this._addSchema(w,_,I,l,!0),this}addMetaSchema(w,I,_=this.opts.validateSchema){return this.addSchema(w,I,!0,_),this}validateSchema(w,I){if(typeof w=="boolean")return!0;let _;if(_=w.$schema,_!==void 0&&typeof _!="string")throw new Error("$schema must be a string");if(_=_||this.opts.defaultMeta||this.defaultMeta(),!_)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(_,w);if(!l&&I){const y="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(y);else throw new Error(y)}return l}getSchema(w){let I;for(;typeof(I=ue.call(this,w))=="string";)w=I;if(I===void 0){const{schemaId:_}=this.opts,l=new a.SchemaEnv({schema:{},schemaId:_});if(I=a.resolveSchema.call(this,l,w),!I)return;this.refs[w]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(w){if(w instanceof RegExp)return this._removeAllSchemas(this.schemas,w),this._removeAllSchemas(this.refs,w),this;switch(typeof w){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const I=ue.call(this,w);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[w],delete this.refs[w],this}case"object":{const I=w;this._cache.delete(I);let _=w[this.opts.schemaId];return _&&(_=(0,d.normalizeId)(_),delete this.schemas[_],delete this.refs[_]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(w){for(const I of w)this.addKeyword(I);return this}addKeyword(w,I){let _;if(typeof w=="string")_=w,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=_);else if(typeof w=="object"&&I===void 0){if(I=w,_=I.keyword,Array.isArray(_)&&!_.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,_,I),!I)return(0,u.eachItem)(_,y=>M.call(this,y)),this;x.call(this,I);const l={...I,type:(0,m.getJSONTypes)(I.type),schemaType:(0,m.getJSONTypes)(I.schemaType)};return(0,u.eachItem)(_,l.type.length===0?y=>M.call(this,y,l):y=>l.type.forEach(j=>M.call(this,y,l,j))),this}getKeyword(w){const I=this.RULES.all[w];return typeof I=="object"?I.definition:!!I}removeKeyword(w){const{RULES:I}=this;delete I.keywords[w],delete I.all[w];for(const _ of I.rules){const l=_.rules.findIndex(y=>y.keyword===w);l>=0&&_.rules.splice(l,1)}return this}addFormat(w,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[w]=I,this}errorsText(w=this.errors,{separator:I=", ",dataVar:_="data"}={}){return!w||w.length===0?"No errors":w.map(l=>`${_}${l.instancePath} ${l.message}`).reduce((l,y)=>l+I+y)}$dataMetaSchema(w,I){const _=this.RULES.all;w=JSON.parse(JSON.stringify(w));for(const l of I){const y=l.split("/").slice(1);let j=w;for(const B of y)j=j[B];for(const B in _){const X=_[B];if(typeof X!="object")continue;const{$data:ae}=X.definition,ie=j[B];ae&&ie&&(j[B]=W(ie))}}return w}_removeAllSchemas(w,I){for(const _ in w){const l=w[_];(!I||I.test(_))&&(typeof l=="string"?delete w[_]:l&&!l.meta&&(this._cache.delete(l.schema),delete w[_]))}}_addSchema(w,I,_,l=this.opts.validateSchema,y=this.opts.addUsedSchema){let j;const{schemaId:B}=this.opts;if(typeof w=="object")j=w[B];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof w!="boolean")throw new Error("schema must be object or boolean")}let X=this._cache.get(w);if(X!==void 0)return X;_=(0,d.normalizeId)(j||_);const ae=d.getSchemaRefs.call(this,w,_);return X=new a.SchemaEnv({schema:w,schemaId:B,meta:I,baseId:_,localRefs:ae}),this._cache.set(X.schema,X),y&&!_.startsWith("#")&&(_&&this._checkUnique(_),this.refs[_]=X),l&&this.validateSchema(w,!0),X}_checkUnique(w){if(this.schemas[w]||this.refs[w])throw new Error(`schema with key or id "${w}" already exists`)}_compileSchemaEnv(w){if(w.meta?this._compileMetaSchema(w):a.compileSchema.call(this,w),!w.validate)throw new Error("ajv implementation error");return w.validate}_compileMetaSchema(w){const I=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,w)}finally{this.opts=I}}}G.ValidationError=n.default,G.MissingRefError=s.default,e.default=G;function F(k,w,I,_="error"){for(const l in k){const y=l;y in w&&this.logger[_](`${I}: option ${l}. ${k[y]}`)}}function ue(k){return k=(0,d.normalizeId)(k),this.schemas[k]||this.refs[k]}function le(){const k=this.opts.schemas;if(k)if(Array.isArray(k))this.addSchema(k);else for(const w in k)this.addSchema(k[w],w)}function Ie(){for(const k in this.opts.formats){const w=this.opts.formats[k];w&&this.addFormat(k,w)}}function We(k){if(Array.isArray(k)){this.addVocabulary(k);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const w in k){const I=k[w];I.keyword||(I.keyword=w),this.addKeyword(I)}}function qe(){const k={...this.opts};for(const w of P)delete k[w];return k}const je={log(){},warn(){},error(){}};function Ae(k){if(k===!1)return je;if(k===void 0)return console;if(k.log&&k.warn&&k.error)return k;throw new Error("logger must implement log, warn and error methods")}const ke=/^[a-z_$][a-z0-9_$:-]*$/i;function U(k,w){const{RULES:I}=this;if((0,u.eachItem)(k,_=>{if(I.keywords[_])throw new Error(`Keyword ${_} is already defined`);if(!ke.test(_))throw new Error(`Keyword ${_} has invalid name`)}),!!w&&w.$data&&!("code"in w||"validate"in w))throw new Error('$data keyword must have "code" or "validate" function')}function M(k,w,I){var _;const l=w==null?void 0:w.post;if(I&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:y}=this;let j=l?y.post:y.rules.find(({type:X})=>X===I);if(j||(j={type:I,rules:[]},y.rules.push(j)),y.keywords[k]=!0,!w)return;const B={keyword:k,definition:{...w,type:(0,m.getJSONTypes)(w.type),schemaType:(0,m.getJSONTypes)(w.schemaType)}};w.before?Z.call(this,j,B,w.before):j.rules.push(B),y.all[k]=B,(_=w.implements)===null||_===void 0||_.forEach(X=>this.addKeyword(X))}function Z(k,w,I){const _=k.rules.findIndex(l=>l.keyword===I);_>=0?k.rules.splice(_,0,w):(k.rules.push(w),this.logger.warn(`rule ${I} is not defined`))}function x(k){let{metaSchema:w}=k;w!==void 0&&(k.$data&&this.opts.$data&&(w=W(w)),k.validateSchema=this.compile(w,!0))}const Y={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function W(k){return{anyOf:[k,Y]}}})(zo);var Mn={},Wn={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});const Al={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};zn.default=Al;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.callRef=Rt.getValidate=void 0;const kl=Ht,no=oe,Le=se,At=tt,so=Me,yr=K,Dl={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:i,validateName:a,opts:f,self:d}=n,{root:m}=i;if((r==="#"||r==="#/")&&s===m.baseId)return v();const u=so.resolveRef.call(d,m,s,r);if(u===void 0)throw new kl.default(n.opts.uriResolver,s,r);if(u instanceof so.SchemaEnv)return N(u);return b(u);function v(){if(i===m)return Ir(e,a,i,i.$async);const P=t.scopeValue("root",{ref:m});return Ir(e,(0,Le._)`${P}.validate`,m,m.$async)}function N(P){const E=Oi(e,P);Ir(e,E,P,P.$async)}function b(P){const E=t.scopeValue("schema",f.code.source===!0?{ref:P,code:(0,Le.stringify)(P)}:{ref:P}),S=t.name("valid"),$=e.subschema({schema:P,dataTypes:[],schemaPath:Le.nil,topSchemaRef:E,errSchemaPath:r},S);e.mergeEvaluated($),e.ok(S)}}};function Oi(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Le._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Rt.getValidate=Oi;function Ir(e,t,r,n){const{gen:s,it:i}=e,{allErrors:a,schemaEnv:f,opts:d}=i,m=d.passContext?At.default.this:Le.nil;n?u():v();function u(){if(!f.$async)throw new Error("async schema referenced by sync schema");const P=s.let("valid");s.try(()=>{s.code((0,Le._)`await ${(0,no.callValidateCode)(e,t,m)}`),b(t),a||s.assign(P,!0)},E=>{s.if((0,Le._)`!(${E} instanceof ${i.ValidationError})`,()=>s.throw(E)),N(E),a||s.assign(P,!1)}),e.ok(P)}function v(){e.result((0,no.callValidateCode)(e,t,m),()=>b(t),()=>N(t))}function N(P){const E=(0,Le._)`${P}.errors`;s.assign(At.default.vErrors,(0,Le._)`${At.default.vErrors} === null ? ${E} : ${At.default.vErrors}.concat(${E})`),s.assign(At.default.errors,(0,Le._)`${At.default.vErrors}.length`)}function b(P){var E;if(!i.opts.unevaluated)return;const S=(E=r==null?void 0:r.validate)===null||E===void 0?void 0:E.evaluated;if(i.props!==!0)if(S&&!S.dynamicProps)S.props!==void 0&&(i.props=yr.mergeEvaluated.props(s,S.props,i.props));else{const $=s.var("props",(0,Le._)`${P}.evaluated.props`);i.props=yr.mergeEvaluated.props(s,$,i.props,Le.Name)}if(i.items!==!0)if(S&&!S.dynamicItems)S.items!==void 0&&(i.items=yr.mergeEvaluated.items(s,S.items,i.items));else{const $=s.var("items",(0,Le._)`${P}.evaluated.items`);i.items=yr.mergeEvaluated.items(s,$,i.items,Le.Name)}}}Rt.callRef=Ir;Rt.default=Dl;Object.defineProperty(Wn,"__esModule",{value:!0});const Ll=zn,Ml=Rt,Wl=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Ll.default,Ml.default];Wn.default=Wl;var Vn={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const Cr=se,ht=Cr.operators,Ar={maximum:{okStr:"<=",ok:ht.LTE,fail:ht.GT},minimum:{okStr:">=",ok:ht.GTE,fail:ht.LT},exclusiveMaximum:{okStr:"<",ok:ht.LT,fail:ht.GTE},exclusiveMinimum:{okStr:">",ok:ht.GT,fail:ht.LTE}},zl={message:({keyword:e,schemaCode:t})=>(0,Cr.str)`must be ${Ar[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Cr._)`{comparison: ${Ar[e].okStr}, limit: ${t}}`},Vl={keyword:Object.keys(Ar),type:"number",schemaType:"number",$data:!0,error:zl,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Cr._)`${r} ${Ar[t].fail} ${n} || isNaN(${r})`)}};Hn.default=Vl;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});const tr=se,Hl={message:({schemaCode:e})=>(0,tr.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,tr._)`{multipleOf: ${e}}`},Ul={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Hl,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,i=s.opts.multipleOfPrecision,a=t.let("res"),f=i?(0,tr._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${i}`:(0,tr._)`${a} !== parseInt(${a})`;e.fail$data((0,tr._)`(${n} === 0 || (${a} = ${r}/${n}, ${f}))`)}};Un.default=Ul;var Fn={},qn={};Object.defineProperty(qn,"__esModule",{value:!0});function Ii(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}qn.default=Ii;Ii.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Fn,"__esModule",{value:!0});const bt=se,Fl=K,ql=qn,Gl={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,bt.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,bt._)`{limit: ${e}}`},Kl={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Gl,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,i=t==="maxLength"?bt.operators.GT:bt.operators.LT,a=s.opts.unicode===!1?(0,bt._)`${r}.length`:(0,bt._)`${(0,Fl.useFunc)(e.gen,ql.default)}(${r})`;e.fail$data((0,bt._)`${a} ${i} ${n}`)}};Fn.default=Kl;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});const xl=oe,kr=se,Xl={message:({schemaCode:e})=>(0,kr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,kr._)`{pattern: ${e}}`},Bl={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Xl,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:i}=e,a=i.opts.unicodeRegExp?"u":"",f=r?(0,kr._)`(new RegExp(${s}, ${a}))`:(0,xl.usePattern)(e,n);e.fail$data((0,kr._)`!${f}.test(${t})`)}};Gn.default=Bl;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});const rr=se,Jl={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,rr.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,rr._)`{limit: ${e}}`},Yl={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Jl,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?rr.operators.GT:rr.operators.LT;e.fail$data((0,rr._)`Object.keys(${r}).length ${s} ${n}`)}};Kn.default=Yl;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});const Jt=oe,nr=se,Zl=K,Ql={message:({params:{missingProperty:e}})=>(0,nr.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,nr._)`{missingProperty: ${e}}`},ed={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Ql,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:i,it:a}=e,{opts:f}=a;if(!i&&r.length===0)return;const d=r.length>=f.loopRequired;if(a.allErrors?m():u(),f.strictRequired){const b=e.parentSchema.properties,{definedProperties:P}=e.it;for(const E of r)if((b==null?void 0:b[E])===void 0&&!P.has(E)){const S=a.schemaEnv.baseId+a.errSchemaPath,$=`required property "${E}" is not defined at "${S}" (strictRequired)`;(0,Zl.checkStrictMode)(a,$,a.opts.strictRequired)}}function m(){if(d||i)e.block$data(nr.nil,v);else for(const b of r)(0,Jt.checkReportMissingProp)(e,b)}function u(){const b=t.let("missing");if(d||i){const P=t.let("valid",!0);e.block$data(P,()=>N(b,P)),e.ok(P)}else t.if((0,Jt.checkMissingProp)(e,r,b)),(0,Jt.reportMissingProp)(e,b),t.else()}function v(){t.forOf("prop",n,b=>{e.setParams({missingProperty:b}),t.if((0,Jt.noPropertyInData)(t,s,b,f.ownProperties),()=>e.error())})}function N(b,P){e.setParams({missingProperty:b}),t.forOf(b,n,()=>{t.assign(P,(0,Jt.propertyInData)(t,s,b,f.ownProperties)),t.if((0,nr.not)(P),()=>{e.error(),t.break()})},nr.nil)}}};xn.default=ed;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});const sr=se,td={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,sr.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,sr._)`{limit: ${e}}`},rd={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:td,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?sr.operators.GT:sr.operators.LT;e.fail$data((0,sr._)`${r}.length ${s} ${n}`)}};Xn.default=rd;var Bn={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});const Ni=ti;Ni.code='require("ajv/dist/runtime/equal").default';ur.default=Ni;Object.defineProperty(Bn,"__esModule",{value:!0});const on=be,Re=se,nd=K,sd=ur,od={message:({params:{i:e,j:t}})=>(0,Re.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Re._)`{i: ${e}, j: ${t}}`},id={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:od,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:i,schemaCode:a,it:f}=e;if(!n&&!s)return;const d=t.let("valid"),m=i.items?(0,on.getSchemaTypes)(i.items):[];e.block$data(d,u,(0,Re._)`${a} === false`),e.ok(d);function u(){const P=t.let("i",(0,Re._)`${r}.length`),E=t.let("j");e.setParams({i:P,j:E}),t.assign(d,!0),t.if((0,Re._)`${P} > 1`,()=>(v()?N:b)(P,E))}function v(){return m.length>0&&!m.some(P=>P==="object"||P==="array")}function N(P,E){const S=t.name("item"),$=(0,on.checkDataTypes)(m,S,f.opts.strictNumbers,on.DataType.Wrong),R=t.const("indices",(0,Re._)`{}`);t.for((0,Re._)`;${P}--;`,()=>{t.let(S,(0,Re._)`${r}[${P}]`),t.if($,(0,Re._)`continue`),m.length>1&&t.if((0,Re._)`typeof ${S} == "string"`,(0,Re._)`${S} += "_"`),t.if((0,Re._)`typeof ${R}[${S}] == "number"`,()=>{t.assign(E,(0,Re._)`${R}[${S}]`),e.error(),t.assign(d,!1).break()}).code((0,Re._)`${R}[${S}] = ${P}`)})}function b(P,E){const S=(0,nd.useFunc)(t,sd.default),$=t.name("outer");t.label($).for((0,Re._)`;${P}--;`,()=>t.for((0,Re._)`${E} = ${P}; ${E}--;`,()=>t.if((0,Re._)`${S}(${r}[${P}], ${r}[${E}])`,()=>{e.error(),t.assign(d,!1).break($)})))}}};Bn.default=id;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});const $n=se,ad=K,cd=ur,ud={message:"must be equal to constant",params:({schemaCode:e})=>(0,$n._)`{allowedValue: ${e}}`},ld={keyword:"const",$data:!0,error:ud,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,$n._)`!${(0,ad.useFunc)(t,cd.default)}(${r}, ${s})`):e.fail((0,$n._)`${i} !== ${r}`)}};Jn.default=ld;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});const Qt=se,dd=K,fd=ur,hd={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Qt._)`{allowedValues: ${e}}`},pd={keyword:"enum",schemaType:"array",$data:!0,error:hd,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:i,it:a}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const f=s.length>=a.opts.loopEnum;let d;const m=()=>d??(d=(0,dd.useFunc)(t,fd.default));let u;if(f||n)u=t.let("valid"),e.block$data(u,v);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const b=t.const("vSchema",i);u=(0,Qt.or)(...s.map((P,E)=>N(b,E)))}e.pass(u);function v(){t.assign(u,!1),t.forOf("v",i,b=>t.if((0,Qt._)`${m()}(${r}, ${b})`,()=>t.assign(u,!0).break()))}function N(b,P){const E=s[P];return typeof E=="object"&&E!==null?(0,Qt._)`${m()}(${r}, ${b}[${P}])`:(0,Qt._)`${r} === ${E}`}}};Yn.default=pd;Object.defineProperty(Vn,"__esModule",{value:!0});const md=Hn,yd=Un,gd=Fn,vd=Gn,$d=Kn,wd=xn,Ed=Xn,_d=Bn,bd=Jn,Sd=Yn,Pd=[md.default,yd.default,gd.default,vd.default,$d.default,wd.default,Ed.default,_d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},bd.default,Sd.default];Vn.default=Pd;var Zn={},Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.validateAdditionalItems=void 0;const St=se,wn=K,Rd={message:({params:{len:e}})=>(0,St.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,St._)`{limit: ${e}}`},Od={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Rd,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,wn.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ji(e,n)}};function ji(e,t){const{gen:r,schema:n,data:s,keyword:i,it:a}=e;a.items=!0;const f=r.const("len",(0,St._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,St._)`${f} <= ${t.length}`);else if(typeof n=="object"&&!(0,wn.alwaysValidSchema)(a,n)){const m=r.var("valid",(0,St._)`${f} <= ${t.length}`);r.if((0,St.not)(m),()=>d(m)),e.ok(m)}function d(m){r.forRange("i",t.length,f,u=>{e.subschema({keyword:i,dataProp:u,dataPropType:wn.Type.Num},m),a.allErrors||r.if((0,St.not)(m),()=>r.break())})}}Ut.validateAdditionalItems=ji;Ut.default=Od;var Qn={},Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.validateTuple=void 0;const oo=se,Nr=K,Id=oe,Nd={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Ti(e,"additionalItems",t);r.items=!0,!(0,Nr.alwaysValidSchema)(r,t)&&e.ok((0,Id.validateArray)(e))}};function Ti(e,t,r=e.schema){const{gen:n,parentSchema:s,data:i,keyword:a,it:f}=e;u(s),f.opts.unevaluated&&r.length&&f.items!==!0&&(f.items=Nr.mergeEvaluated.items(n,r.length,f.items));const d=n.name("valid"),m=n.const("len",(0,oo._)`${i}.length`);r.forEach((v,N)=>{(0,Nr.alwaysValidSchema)(f,v)||(n.if((0,oo._)`${m} > ${N}`,()=>e.subschema({keyword:a,schemaProp:N,dataProp:N},d)),e.ok(d))});function u(v){const{opts:N,errSchemaPath:b}=f,P=r.length,E=P===v.minItems&&(P===v.maxItems||v[t]===!1);if(N.strictTuples&&!E){const S=`"${a}" is ${P}-tuple, but minItems or maxItems/${t} are not specified or different at path "${b}"`;(0,Nr.checkStrictMode)(f,S,N.strictTuples)}}}Ft.validateTuple=Ti;Ft.default=Nd;Object.defineProperty(Qn,"__esModule",{value:!0});const jd=Ft,Td={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,jd.validateTuple)(e,"items")};Qn.default=Td;var es={};Object.defineProperty(es,"__esModule",{value:!0});const io=se,Cd=K,Ad=oe,kd=Ut,Dd={message:({params:{len:e}})=>(0,io.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,io._)`{limit: ${e}}`},Ld={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Dd,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,Cd.alwaysValidSchema)(n,t)&&(s?(0,kd.validateAdditionalItems)(e,s):e.ok((0,Ad.validateArray)(e)))}};es.default=Ld;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});const Fe=se,gr=K,Md={message:({params:{min:e,max:t}})=>t===void 0?(0,Fe.str)`must contain at least ${e} valid item(s)`:(0,Fe.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Fe._)`{minContains: ${e}}`:(0,Fe._)`{minContains: ${e}, maxContains: ${t}}`},Wd={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Md,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;let a,f;const{minContains:d,maxContains:m}=n;i.opts.next?(a=d===void 0?1:d,f=m):a=1;const u=t.const("len",(0,Fe._)`${s}.length`);if(e.setParams({min:a,max:f}),f===void 0&&a===0){(0,gr.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&a>f){(0,gr.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,gr.alwaysValidSchema)(i,r)){let E=(0,Fe._)`${u} >= ${a}`;f!==void 0&&(E=(0,Fe._)`${E} && ${u} <= ${f}`),e.pass(E);return}i.items=!0;const v=t.name("valid");f===void 0&&a===1?b(v,()=>t.if(v,()=>t.break())):a===0?(t.let(v,!0),f!==void 0&&t.if((0,Fe._)`${s}.length > 0`,N)):(t.let(v,!1),N()),e.result(v,()=>e.reset());function N(){const E=t.name("_valid"),S=t.let("count",0);b(E,()=>t.if(E,()=>P(S)))}function b(E,S){t.forRange("i",0,u,$=>{e.subschema({keyword:"contains",dataProp:$,dataPropType:gr.Type.Num,compositeRule:!0},E),S()})}function P(E){t.code((0,Fe._)`${E}++`),f===void 0?t.if((0,Fe._)`${E} >= ${a}`,()=>t.assign(v,!0).break()):(t.if((0,Fe._)`${E} > ${f}`,()=>t.assign(v,!1).break()),a===1?t.assign(v,!0):t.if((0,Fe._)`${E} >= ${a}`,()=>t.assign(v,!0)))}}};ts.default=Wd;var Ci={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=se,r=K,n=oe;e.error={message:({params:{property:d,depsCount:m,deps:u}})=>{const v=m===1?"property":"properties";return(0,t.str)`must have ${v} ${u} when property ${d} is present`},params:({params:{property:d,depsCount:m,deps:u,missingProperty:v}})=>(0,t._)`{property: ${d},
    missingProperty: ${v},
    depsCount: ${m},
    deps: ${u}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(d){const[m,u]=i(d);a(d,m),f(d,u)}};function i({schema:d}){const m={},u={};for(const v in d){if(v==="__proto__")continue;const N=Array.isArray(d[v])?m:u;N[v]=d[v]}return[m,u]}function a(d,m=d.schema){const{gen:u,data:v,it:N}=d;if(Object.keys(m).length===0)return;const b=u.let("missing");for(const P in m){const E=m[P];if(E.length===0)continue;const S=(0,n.propertyInData)(u,v,P,N.opts.ownProperties);d.setParams({property:P,depsCount:E.length,deps:E.join(", ")}),N.allErrors?u.if(S,()=>{for(const $ of E)(0,n.checkReportMissingProp)(d,$)}):(u.if((0,t._)`${S} && (${(0,n.checkMissingProp)(d,E,b)})`),(0,n.reportMissingProp)(d,b),u.else())}}e.validatePropertyDeps=a;function f(d,m=d.schema){const{gen:u,data:v,keyword:N,it:b}=d,P=u.name("valid");for(const E in m)(0,r.alwaysValidSchema)(b,m[E])||(u.if((0,n.propertyInData)(u,v,E,b.opts.ownProperties),()=>{const S=d.subschema({keyword:N,schemaProp:E},P);d.mergeValidEvaluated(S,P)},()=>u.var(P,!0)),d.ok(P))}e.validateSchemaDeps=f,e.default=s})(Ci);var rs={};Object.defineProperty(rs,"__esModule",{value:!0});const Ai=se,zd=K,Vd={message:"property name must be valid",params:({params:e})=>(0,Ai._)`{propertyName: ${e.propertyName}}`},Hd={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Vd,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,zd.alwaysValidSchema)(s,r))return;const i=t.name("valid");t.forIn("key",n,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},i),t.if((0,Ai.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};rs.default=Hd;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});const vr=oe,Ke=se,Ud=tt,$r=K,Fd={message:"must NOT have additional properties",params:({params:e})=>(0,Ke._)`{additionalProperty: ${e.additionalProperty}}`},qd={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Fd,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:a}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:f,opts:d}=a;if(a.props=!0,d.removeAdditional!=="all"&&(0,$r.alwaysValidSchema)(a,r))return;const m=(0,vr.allSchemaProperties)(n.properties),u=(0,vr.allSchemaProperties)(n.patternProperties);v(),e.ok((0,Ke._)`${i} === ${Ud.default.errors}`);function v(){t.forIn("key",s,S=>{!m.length&&!u.length?P(S):t.if(N(S),()=>P(S))})}function N(S){let $;if(m.length>8){const R=(0,$r.schemaRefOrVal)(a,n.properties,"properties");$=(0,vr.isOwnProperty)(t,R,S)}else m.length?$=(0,Ke.or)(...m.map(R=>(0,Ke._)`${S} === ${R}`)):$=Ke.nil;return u.length&&($=(0,Ke.or)($,...u.map(R=>(0,Ke._)`${(0,vr.usePattern)(e,R)}.test(${S})`))),(0,Ke.not)($)}function b(S){t.code((0,Ke._)`delete ${s}[${S}]`)}function P(S){if(d.removeAdditional==="all"||d.removeAdditional&&r===!1){b(S);return}if(r===!1){e.setParams({additionalProperty:S}),e.error(),f||t.break();return}if(typeof r=="object"&&!(0,$r.alwaysValidSchema)(a,r)){const $=t.name("valid");d.removeAdditional==="failing"?(E(S,$,!1),t.if((0,Ke.not)($),()=>{e.reset(),b(S)})):(E(S,$),f||t.if((0,Ke.not)($),()=>t.break()))}}function E(S,$,R){const L={keyword:"additionalProperties",dataProp:S,dataPropType:$r.Type.Str};R===!1&&Object.assign(L,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(L,$)}}};Ur.default=qd;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});const Gd=Xe,ao=oe,an=K,co=Ur,Kd={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&co.default.code(new Gd.KeywordCxt(i,co.default,"additionalProperties"));const a=(0,ao.allSchemaProperties)(r);for(const v of a)i.definedProperties.add(v);i.opts.unevaluated&&a.length&&i.props!==!0&&(i.props=an.mergeEvaluated.props(t,(0,an.toHash)(a),i.props));const f=a.filter(v=>!(0,an.alwaysValidSchema)(i,r[v]));if(f.length===0)return;const d=t.name("valid");for(const v of f)m(v)?u(v):(t.if((0,ao.propertyInData)(t,s,v,i.opts.ownProperties)),u(v),i.allErrors||t.else().var(d,!0),t.endIf()),e.it.definedProperties.add(v),e.ok(d);function m(v){return i.opts.useDefaults&&!i.compositeRule&&r[v].default!==void 0}function u(v){e.subschema({keyword:"properties",schemaProp:v,dataProp:v},d)}}};ns.default=Kd;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});const uo=oe,wr=se,lo=K,fo=K,xd={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:i}=e,{opts:a}=i,f=(0,uo.allSchemaProperties)(r),d=f.filter(E=>(0,lo.alwaysValidSchema)(i,r[E]));if(f.length===0||d.length===f.length&&(!i.opts.unevaluated||i.props===!0))return;const m=a.strictSchema&&!a.allowMatchingProperties&&s.properties,u=t.name("valid");i.props!==!0&&!(i.props instanceof wr.Name)&&(i.props=(0,fo.evaluatedPropsToName)(t,i.props));const{props:v}=i;N();function N(){for(const E of f)m&&b(E),i.allErrors?P(E):(t.var(u,!0),P(E),t.if(u))}function b(E){for(const S in m)new RegExp(E).test(S)&&(0,lo.checkStrictMode)(i,`property ${S} matches pattern ${E} (use allowMatchingProperties)`)}function P(E){t.forIn("key",n,S=>{t.if((0,wr._)`${(0,uo.usePattern)(e,E)}.test(${S})`,()=>{const $=d.includes(E);$||e.subschema({keyword:"patternProperties",schemaProp:E,dataProp:S,dataPropType:fo.Type.Str},u),i.opts.unevaluated&&v!==!0?t.assign((0,wr._)`${v}[${S}]`,!0):!$&&!i.allErrors&&t.if((0,wr.not)(u),()=>t.break())})})}}};ss.default=xd;var os={};Object.defineProperty(os,"__esModule",{value:!0});const Xd=K,Bd={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,Xd.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};os.default=Bd;var is={};Object.defineProperty(is,"__esModule",{value:!0});const Jd=oe,Yd={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Jd.validateUnion,error:{message:"must match a schema in anyOf"}};is.default=Yd;var as={};Object.defineProperty(as,"__esModule",{value:!0});const jr=se,Zd=K,Qd={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,jr._)`{passingSchemas: ${e.passing}}`},ef={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Qd,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const i=r,a=t.let("valid",!1),f=t.let("passing",null),d=t.name("_valid");e.setParams({passing:f}),t.block(m),e.result(a,()=>e.reset(),()=>e.error(!0));function m(){i.forEach((u,v)=>{let N;(0,Zd.alwaysValidSchema)(s,u)?t.var(d,!0):N=e.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},d),v>0&&t.if((0,jr._)`${d} && ${a}`).assign(a,!1).assign(f,(0,jr._)`[${f}, ${v}]`).else(),t.if(d,()=>{t.assign(a,!0),t.assign(f,v),N&&e.mergeEvaluated(N,jr.Name)})})}}};as.default=ef;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});const tf=K,rf={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((i,a)=>{if((0,tf.alwaysValidSchema)(n,i))return;const f=e.subschema({keyword:"allOf",schemaProp:a},s);e.ok(s),e.mergeEvaluated(f)})}};cs.default=rf;var us={};Object.defineProperty(us,"__esModule",{value:!0});const Dr=se,ki=K,nf={message:({params:e})=>(0,Dr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Dr._)`{failingKeyword: ${e.ifClause}}`},sf={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:nf,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,ki.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=ho(n,"then"),i=ho(n,"else");if(!s&&!i)return;const a=t.let("valid",!0),f=t.name("_valid");if(d(),e.reset(),s&&i){const u=t.let("ifClause");e.setParams({ifClause:u}),t.if(f,m("then",u),m("else",u))}else s?t.if(f,m("then")):t.if((0,Dr.not)(f),m("else"));e.pass(a,()=>e.error(!0));function d(){const u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},f);e.mergeEvaluated(u)}function m(u,v){return()=>{const N=e.subschema({keyword:u},f);t.assign(a,f),e.mergeValidEvaluated(N,a),v?t.assign(v,(0,Dr._)`${u}`):e.setParams({ifClause:u})}}}};function ho(e,t){const r=e.schema[t];return r!==void 0&&!(0,ki.alwaysValidSchema)(e,r)}us.default=sf;var ls={};Object.defineProperty(ls,"__esModule",{value:!0});const of=K,af={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,of.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};ls.default=af;Object.defineProperty(Zn,"__esModule",{value:!0});const cf=Ut,uf=Qn,lf=Ft,df=es,ff=ts,hf=Ci,pf=rs,mf=Ur,yf=ns,gf=ss,vf=os,$f=is,wf=as,Ef=cs,_f=us,bf=ls;function Sf(e=!1){const t=[vf.default,$f.default,wf.default,Ef.default,_f.default,bf.default,pf.default,mf.default,hf.default,yf.default,gf.default];return e?t.push(uf.default,df.default):t.push(cf.default,lf.default),t.push(ff.default),t}Zn.default=Sf;var ds={},fs={};Object.defineProperty(fs,"__esModule",{value:!0});const $e=se,Pf={message:({schemaCode:e})=>(0,$e.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,$e._)`{format: ${e}}`},Rf={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Pf,code(e,t){const{gen:r,data:n,$data:s,schema:i,schemaCode:a,it:f}=e,{opts:d,errSchemaPath:m,schemaEnv:u,self:v}=f;if(!d.validateFormats)return;s?N():b();function N(){const P=r.scopeValue("formats",{ref:v.formats,code:d.code.formats}),E=r.const("fDef",(0,$e._)`${P}[${a}]`),S=r.let("fType"),$=r.let("format");r.if((0,$e._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>r.assign(S,(0,$e._)`${E}.type || "string"`).assign($,(0,$e._)`${E}.validate`),()=>r.assign(S,(0,$e._)`"string"`).assign($,E)),e.fail$data((0,$e.or)(R(),L()));function R(){return d.strictSchema===!1?$e.nil:(0,$e._)`${a} && !${$}`}function L(){const G=u.$async?(0,$e._)`(${E}.async ? await ${$}(${n}) : ${$}(${n}))`:(0,$e._)`${$}(${n})`,F=(0,$e._)`(typeof ${$} == "function" ? ${G} : ${$}.test(${n}))`;return(0,$e._)`${$} && ${$} !== true && ${S} === ${t} && !${F}`}}function b(){const P=v.formats[i];if(!P){R();return}if(P===!0)return;const[E,S,$]=L(P);E===t&&e.pass(G());function R(){if(d.strictSchema===!1){v.logger.warn(F());return}throw new Error(F());function F(){return`unknown format "${i}" ignored in schema at path "${m}"`}}function L(F){const ue=F instanceof RegExp?(0,$e.regexpCode)(F):d.code.formats?(0,$e._)`${d.code.formats}${(0,$e.getProperty)(i)}`:void 0,le=r.scopeValue("formats",{key:i,ref:F,code:ue});return typeof F=="object"&&!(F instanceof RegExp)?[F.type||"string",F.validate,(0,$e._)`${le}.validate`]:["string",F,le]}function G(){if(typeof P=="object"&&!(P instanceof RegExp)&&P.async){if(!u.$async)throw new Error("async format in sync schema");return(0,$e._)`await ${$}(${n})`}return typeof S=="function"?(0,$e._)`${$}(${n})`:(0,$e._)`${$}.test(${n})`}}}};fs.default=Rf;Object.defineProperty(ds,"__esModule",{value:!0});const Of=fs,If=[Of.default];ds.default=If;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.contentVocabulary=Vt.metadataVocabulary=void 0;Vt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Vt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Mn,"__esModule",{value:!0});const Nf=Wn,jf=Vn,Tf=Zn,Cf=ds,po=Vt,Af=[Nf.default,jf.default,(0,Tf.default)(),Cf.default,po.metadataVocabulary,po.contentVocabulary];Mn.default=Af;var hs={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.DiscrError=void 0;var mo;(function(e){e.Tag="tag",e.Mapping="mapping"})(mo||(Fr.DiscrError=mo={}));Object.defineProperty(hs,"__esModule",{value:!0});const Dt=se,En=Fr,yo=Me,kf=Ht,Df=K,Lf={message:({params:{discrError:e,tagName:t}})=>e===En.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Dt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Mf={keyword:"discriminator",type:"object",schemaType:"object",error:Lf,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{oneOf:a}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const f=n.propertyName;if(typeof f!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const d=t.let("valid",!1),m=t.const("tag",(0,Dt._)`${r}${(0,Dt.getProperty)(f)}`);t.if((0,Dt._)`typeof ${m} == "string"`,()=>u(),()=>e.error(!1,{discrError:En.DiscrError.Tag,tag:m,tagName:f})),e.ok(d);function u(){const b=N();t.if(!1);for(const P in b)t.elseIf((0,Dt._)`${m} === ${P}`),t.assign(d,v(b[P]));t.else(),e.error(!1,{discrError:En.DiscrError.Mapping,tag:m,tagName:f}),t.endIf()}function v(b){const P=t.name("valid"),E=e.subschema({keyword:"oneOf",schemaProp:b},P);return e.mergeEvaluated(E,Dt.Name),P}function N(){var b;const P={},E=$(s);let S=!0;for(let G=0;G<a.length;G++){let F=a[G];if(F!=null&&F.$ref&&!(0,Df.schemaHasRulesButRef)(F,i.self.RULES)){const le=F.$ref;if(F=yo.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,le),F instanceof yo.SchemaEnv&&(F=F.schema),F===void 0)throw new kf.default(i.opts.uriResolver,i.baseId,le)}const ue=(b=F==null?void 0:F.properties)===null||b===void 0?void 0:b[f];if(typeof ue!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${f}"`);S=S&&(E||$(F)),R(ue,G)}if(!S)throw new Error(`discriminator: "${f}" must be required`);return P;function $({required:G}){return Array.isArray(G)&&G.includes(f)}function R(G,F){if(G.const)L(G.const,F);else if(G.enum)for(const ue of G.enum)L(ue,F);else throw new Error(`discriminator: "properties/${f}" must have "const" or "enum"`)}function L(G,F){if(typeof G!="string"||G in P)throw new Error(`discriminator: "${f}" values must be unique strings`);P[G]=F}}}};hs.default=Mf;const Wf="http://json-schema.org/draft-07/schema#",zf="http://json-schema.org/draft-07/schema#",Vf="Core schema meta-schema",Hf={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Uf=["object","boolean"],Ff={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},qf={$schema:Wf,$id:zf,title:Vf,definitions:Hf,type:Uf,properties:Ff,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=zo,n=Mn,s=hs,i=qf,a=["/properties"],f="http://json-schema.org/draft-07/schema";class d extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(P=>this.addVocabulary(P)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const P=this.opts.$data?this.$dataMetaSchema(i,a):i;this.addMetaSchema(P,f,!1),this.refs["http://json-schema.org/schema"]=f}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(f)?f:void 0)}}t.Ajv=d,e.exports=t=d,e.exports.Ajv=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var m=Xe;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return m.KeywordCxt}});var u=se;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var v=cr;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return v.default}});var N=Ht;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return N.default}})})(mn,mn.exports);var Gf=mn.exports;const Kf=Mr(Gf);var Di={exports:{}},Li={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(typeof self<"u"?self:aa,function(){return function(r){var n={};function s(i){if(n[i])return n[i].exports;var a=n[i]={i,l:!1,exports:{}};return r[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=r,s.c=n,s.d=function(i,a,f){s.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:f})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,a){if(1&a&&(i=s(i)),8&a||4&a&&typeof i=="object"&&i&&i.__esModule)return i;var f=Object.create(null);if(s.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:i}),2&a&&typeof i!="string")for(var d in i)s.d(f,d,(function(m){return i[m]}).bind(null,d));return f},s.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(a,"a",a),a},s.o=function(i,a){return{}.hasOwnProperty.call(i,a)},s.p="",s(s.s=0)}([function(r,n,s){s.r(n),s.d(n,"Promise",function(){return W}),s.d(n,"TYPES",function(){return na}),s.d(n,"ProxyWindow",function(){return He}),s.d(n,"setup",function(){return Ls}),s.d(n,"destroy",function(){return ra}),s.d(n,"serializeMessage",function(){return Zi}),s.d(n,"deserializeMessage",function(){return Qi}),s.d(n,"createProxyWindow",function(){return ea}),s.d(n,"toProxyWindow",function(){return ta}),s.d(n,"on",function(){return wt}),s.d(n,"once",function(){return Yi}),s.d(n,"send",function(){return dt}),s.d(n,"markWindowKnown",function(){return Ss}),s.d(n,"cleanUpWindow",function(){return sa}),s.d(n,"bridge",function(){});function i(o){return{}.toString.call(o)==="[object RegExp]"}var a=`Call was rejected by callee.\r
`;function f(o){return o===void 0&&(o=window),o.location.protocol}function d(o){if(o===void 0&&(o=window),o.mockDomain){var h=o.mockDomain.split("//")[0];if(h)return h}return f(o)}function m(o){return o===void 0&&(o=window),d(o)==="about:"}function u(o){if(o===void 0&&(o=window),o)try{if(o.parent&&o.parent!==o)return o.parent}catch{}}function v(o){if(o===void 0&&(o=window),o&&!u(o))try{return o.opener}catch{}}function N(o){try{return!0}catch{}return!1}function b(o){o===void 0&&(o=window);var h=o.location;if(!h)throw new Error("Can not read window location");var c=f(o);if(!c)throw new Error("Can not read window protocol");if(c==="file:")return"file://";if(c==="about:"){var p=u(o);return p&&N()?b(p):"about://"}var g=h.host;if(!g)throw new Error("Can not read window host");return c+"//"+g}function P(o){o===void 0&&(o=window);var h=b(o);return h&&o.mockDomain&&o.mockDomain.indexOf("mock:")===0?o.mockDomain:h}function E(o){if(!function(h){try{if(h===window)return!0}catch{}try{var c=Object.getOwnPropertyDescriptor(h,"location");if(c&&c.enumerable===!1)return!1}catch{}try{if(m(h)&&N())return!0}catch{}try{if(function(p){return p===void 0&&(p=window),d(p)==="mock:"}(h)&&N())return!0}catch{}try{if(b(h)===b(window))return!0}catch{}return!1}(o))return!1;try{if(o===window||m(o)&&N()||P(window)===P(o))return!0}catch{}return!1}function S(o){if(!E(o))throw new Error("Expected window to be same domain");return o}function $(o,h){if(!o||!h)return!1;var c=u(h);return c?c===o:function(p){var g=[];try{for(;p.parent!==p;)g.push(p.parent),p=p.parent}catch{}return g}(h).indexOf(o)!==-1}function R(o){var h=[],c;try{c=o.frames}catch{c=o}var p;try{p=c.length}catch{}if(p===0)return h;if(p){for(var g=0;g<p;g++){var O=void 0;try{O=c[g]}catch{continue}h.push(O)}return h}for(var T=0;T<100;T++){var D=void 0;try{D=c[T]}catch{return h}if(!D)return h;h.push(D)}return h}var L=[],G=[];function F(o,h){h===void 0&&(h=!0);try{if(o===window)return!1}catch{return!0}try{if(!o)return!0}catch{return!0}try{if(o.closed)return!0}catch(g){return!g||g.message!==a}if(h&&E(o))try{if(o.mockclosed)return!0}catch{}try{if(!o.parent||!o.top)return!0}catch{}var c=function(g,O){for(var T=0;T<g.length;T++)try{if(g[T]===O)return T}catch{}return-1}(L,o);if(c!==-1){var p=G[c];if(p&&function(g){if(!g.contentWindow||!g.parentNode)return!0;var O=g.ownerDocument;if(O&&O.documentElement&&!O.documentElement.contains(g)){for(var T=g;T.parentNode&&T.parentNode!==T;)T=T.parentNode;if(!T.host||!O.documentElement.contains(T.host))return!0}return!1}(p))return!0}return!1}function ue(o){return o===void 0&&(o=window),v(o=o||window)||u(o)||void 0}function le(o,h){if(typeof o=="string"){if(typeof h=="string")return o==="*"||h===o;if(i(h)||Array.isArray(h))return!1}return i(o)?i(h)?o.toString()===h.toString():!Array.isArray(h)&&!!h.match(o):!!Array.isArray(o)&&(Array.isArray(h)?JSON.stringify(o)===JSON.stringify(h):!i(h)&&o.some(function(c){return le(c,h)}))}function Ie(o){try{if(o===window)return!0}catch(h){if(h&&h.message===a)return!0}try{if({}.toString.call(o)==="[object Window]")return!0}catch(h){if(h&&h.message===a)return!0}try{if(window.Window&&o instanceof window.Window)return!0}catch(h){if(h&&h.message===a)return!0}try{if(o&&o.self===o)return!0}catch(h){if(h&&h.message===a)return!0}try{if(o&&o.parent===o)return!0}catch(h){if(h&&h.message===a)return!0}try{if(o&&o.top===o)return!0}catch(h){if(h&&h.message===a)return!0}try{if(o&&o.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in o&&"self"in o&&"location"in o)return!0}catch{}return!1}function We(o){if(E(o))return S(o).frameElement;for(var h=0,c=document.querySelectorAll("iframe");h<c.length;h++){var p=c[h];if(p&&p.contentWindow&&p.contentWindow===o)return p}}function qe(o){if(function(c){return c===void 0&&(c=window),!!u(c)}(o)){var h=We(o);if(h&&h.parentElement){h.parentElement.removeChild(h);return}}try{o.close()}catch{}}function je(o){try{if(!o)return!1;if(typeof Promise<"u"&&o instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&o instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&o instanceof window.constructor)return!1;var h={}.toString;if(h){var c=h.call(o);if(c==="[object Window]"||c==="[object global]"||c==="[object DOMWindow]")return!1}if(typeof o.then=="function")return!0}catch{return!1}return!1}var Ae=[],ke=[],U=0,M;function Z(){if(!U&&M){var o=M;M=null,o.resolve()}}function x(){U+=1}function Y(){U-=1,Z()}var W=function(){function o(c){var p=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],c){var g,O,T=!1,D=!1,A=!1;x();try{c(function(C){A?p.resolve(C):(T=!0,g=C)},function(C){A?p.reject(C):(D=!0,O=C)})}catch(C){Y(),this.reject(C);return}Y(),A=!0,T?this.resolve(g):D&&this.reject(O)}}var h=o.prototype;return h.resolve=function(c){if(this.resolved||this.rejected)return this;if(je(c))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=c,this.dispatch(),this},h.reject=function(c){var p=this;if(this.resolved||this.rejected)return this;if(je(c))throw new Error("Can not reject promise with another promise");if(!c){var g=c&&typeof c.toString=="function"?c.toString():{}.toString.call(c);c=new Error("Expected reject to be called with Error, got "+g)}return this.rejected=!0,this.error=c,this.errorHandled||setTimeout(function(){p.errorHandled||function(O,T){if(Ae.indexOf(O)===-1){Ae.push(O),setTimeout(function(){throw O},1);for(var D=0;D<ke.length;D++)ke[D](O,T)}}(c,p)},1),this.dispatch(),this},h.asyncReject=function(c){return this.errorHandled=!0,this.reject(c),this},h.dispatch=function(){var c=this.resolved,p=this.rejected,g=this.handlers;if(!this.dispatching&&(c||p)){this.dispatching=!0,x();for(var O=function(q,ne){return q.then(function(ee){ne.resolve(ee)},function(ee){ne.reject(ee)})},T=0;T<g.length;T++){var D=g[T],A=D.onSuccess,C=D.onError,H=D.promise,z=void 0;if(c)try{z=A?A(this.value):this.value}catch(q){H.reject(q);continue}else if(p){if(!C){H.reject(this.error);continue}try{z=C(this.error)}catch(q){H.reject(q);continue}}if(z instanceof o&&(z.resolved||z.rejected)){var V=z;V.resolved?H.resolve(V.value):H.reject(V.error),V.errorHandled=!0}else je(z)?z instanceof o&&(z.resolved||z.rejected)?z.resolved?H.resolve(z.value):H.reject(z.error):O(z,H):H.resolve(z)}g.length=0,this.dispatching=!1,Y()}},h.then=function(c,p){if(c&&typeof c!="function"&&!c.call)throw new Error("Promise.then expected a function for success handler");if(p&&typeof p!="function"&&!p.call)throw new Error("Promise.then expected a function for error handler");var g=new o;return this.handlers.push({promise:g,onSuccess:c,onError:p}),this.errorHandled=!0,this.dispatch(),g},h.catch=function(c){return this.then(void 0,c)},h.finally=function(c){if(c&&typeof c!="function"&&!c.call)throw new Error("Promise.finally expected a function");return this.then(function(p){return o.try(c).then(function(){return p})},function(p){return o.try(c).then(function(){throw p})})},h.timeout=function(c,p){var g=this;if(this.resolved||this.rejected)return this;var O=setTimeout(function(){g.resolved||g.rejected||g.reject(p||new Error("Promise timed out after "+c+"ms"))},c);return this.then(function(T){return clearTimeout(O),T})},h.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},h.lazy=function(){return this.errorHandled=!0,this},o.resolve=function(c){return c instanceof o?c:je(c)?new o(function(p,g){return c.then(p,g)}):new o().resolve(c)},o.reject=function(c){return new o().reject(c)},o.asyncReject=function(c){return new o().asyncReject(c)},o.all=function(c){var p=new o,g=c.length,O=[].slice();if(!g)return p.resolve(O),p;for(var T=function(C,H,z){return H.then(function(V){O[C]=V,(g-=1)==0&&p.resolve(O)},function(V){z.reject(V)})},D=0;D<c.length;D++){var A=c[D];if(A instanceof o){if(A.resolved){O[D]=A.value,g-=1;continue}}else if(!je(A)){O[D]=A,g-=1;continue}T(D,o.resolve(A),p)}return g===0&&p.resolve(O),p},o.hash=function(c){var p={},g=[],O=function(D){if(c.hasOwnProperty(D)){var A=c[D];je(A)?g.push(A.then(function(C){p[D]=C})):p[D]=A}};for(var T in c)O(T);return o.all(g).then(function(){return p})},o.map=function(c,p){return o.all(c.map(p))},o.onPossiblyUnhandledException=function(c){return function(p){return ke.push(p),{cancel:function(){ke.splice(ke.indexOf(p),1)}}}(c)},o.try=function(c,p,g){if(c&&typeof c!="function"&&!c.call)throw new Error("Promise.try expected a function");var O;x();try{O=c.apply(p,g||[])}catch(T){return Y(),o.reject(T)}return Y(),o.resolve(O)},o.delay=function(c){return new o(function(p){setTimeout(p,c)})},o.isPromise=function(c){return!!(c&&c instanceof o)||je(c)},o.flush=function(){return function(c){var p=M=M||new c;return Z(),p}(o)},o}();function k(o,h){for(var c=0;c<o.length;c++)try{if(o[c]===h)return c}catch{}return-1}var w=function(){function o(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var c=new WeakMap,p={};return Object.freeze(p),c.set(p,"__testvalue__"),c.get(p)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var h=o.prototype;return h._cleanupClosedWindows=function(){for(var c=this.weakmap,p=this.keys,g=0;g<p.length;g++){var O=p[g];if(Ie(O)&&F(O)){if(c)try{c.delete(O)}catch{}p.splice(g,1),this.values.splice(g,1),g-=1}}},h.isSafeToReadWrite=function(c){return!Ie(c)},h.set=function(c,p){if(!c)throw new Error("WeakMap expected key");var g=this.weakmap;if(g)try{g.set(c,p)}catch{delete this.weakmap}if(this.isSafeToReadWrite(c))try{var O=this.name,T=c[O];T&&T[0]===c?T[1]=p:Object.defineProperty(c,O,{value:[c,p],writable:!0});return}catch{}this._cleanupClosedWindows();var D=this.keys,A=this.values,C=k(D,c);C===-1?(D.push(c),A.push(p)):A[C]=p},h.get=function(c){if(!c)throw new Error("WeakMap expected key");var p=this.weakmap;if(p)try{if(p.has(c))return p.get(c)}catch{delete this.weakmap}if(this.isSafeToReadWrite(c))try{var g=c[this.name];return g&&g[0]===c?g[1]:void 0}catch{}this._cleanupClosedWindows();var O=k(this.keys,c);if(O!==-1)return this.values[O]},h.delete=function(c){if(!c)throw new Error("WeakMap expected key");var p=this.weakmap;if(p)try{p.delete(c)}catch{delete this.weakmap}if(this.isSafeToReadWrite(c))try{var g=c[this.name];g&&g[0]===c&&(g[0]=g[1]=void 0)}catch{}this._cleanupClosedWindows();var O=this.keys,T=k(O,c);T!==-1&&(O.splice(T,1),this.values.splice(T,1))},h.has=function(c){if(!c)throw new Error("WeakMap expected key");var p=this.weakmap;if(p)try{if(p.has(c))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(c))try{var g=c[this.name];return!(!g||g[0]!==c)}catch{}return this._cleanupClosedWindows(),k(this.keys,c)!==-1},h.getOrSet=function(c,p){if(this.has(c))return this.get(c);var g=p();return this.set(c,g),g},o}();function I(o){return o.name||o.__name__||o.displayName||"anonymous"}function _(o,h){try{delete o.name,o.name=h}catch{}return o.__name__=o.displayName=h,o}function l(){var o="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return o.charAt(Math.floor(Math.random()*o.length))})+"_"+function(h){if(typeof btoa=="function")return btoa(encodeURIComponent(h).replace(/%([0-9A-F]{2})/g,function(c,p){return String.fromCharCode(parseInt(p,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(h,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var y;function j(o){try{return JSON.stringify([].slice.call(o),function(h,c){return typeof c=="function"?"memoize["+function(p){if(y=y||new w,p==null||typeof p!="object"&&typeof p!="function")throw new Error("Invalid object");var g=y.get(p);return g||(g=typeof p+":"+l(),y.set(p,g)),g}(c)+"]":typeof window<"u"&&c instanceof window.Element||c!==null&&typeof c=="object"&&c.nodeType===1&&typeof c.style=="object"&&typeof c.ownerDocument=="object"?{}:c})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function B(){return{}}var X=0,ae=0;function ie(o,h){h===void 0&&(h={});var c=h.thisNamespace,p=c!==void 0&&c,g=h.time,O,T,D=X;X+=1;var A=function(){for(var C=arguments.length,H=new Array(C),z=0;z<C;z++)H[z]=arguments[z];D<ae&&(O=null,T=null,D=X,X+=1);var V;V=p?(T=T||new w).getOrSet(this,B):O=O||{};var q;try{q=j(H)}catch{return o.apply(this,arguments)}var ne=V[q];if(ne&&g&&Date.now()-ne.time<g&&(delete V[q],ne=null),ne)return ne.value;var ee=Date.now(),te=o.apply(this,arguments);return V[q]={time:ee,value:te},te};return A.reset=function(){O=null,T=null},_(A,(h.name||I(o))+"::memoized")}ie.clear=function(){ae=X};function we(o){var h={};function c(){for(var p=arguments,g=this,O=arguments.length,T=new Array(O),D=0;D<O;D++)T[D]=arguments[D];var A=j(T);return h.hasOwnProperty(A)||(h[A]=W.try(function(){return o.apply(g,p)}).finally(function(){delete h[A]})),h[A]}return c.reset=function(){h={}},_(c,I(o)+"::promiseMemoized")}function De(){}function rt(o,h){if(h===void 0&&(h=1),h>=3)return"stringifyError stack overflow";try{if(!o)return"<unknown error: "+{}.toString.call(o)+">";if(typeof o=="string")return o;if(o instanceof Error){var c=o&&o.stack,p=o&&o.message;if(c&&p)return c.indexOf(p)!==-1?c:p+`
`+c;if(c)return c;if(p)return p}return o&&o.toString&&typeof o.toString=="function"?o.toString():{}.toString.call(o)}catch(g){return"Error while stringifying error: "+rt(g,h+1)}}function Ot(o){return typeof o=="string"?o:o.toString&&typeof o.toString=="function"?o.toString():{}.toString.call(o)}ie(function(o){if(Object.values)return Object.values(o);var h=[];for(var c in o)o.hasOwnProperty(c)&&h.push(o[c]);return h});function gt(o){return{}.toString.call(o)==="[object RegExp]"}function nt(o,h,c){if(o.hasOwnProperty(h))return o[h];var p=c();return o[h]=p,p}function It(){var o=document.body;if(!o)throw new Error("Body element not found");return o}function Nt(){return!!document.body&&document.readyState==="complete"}function jt(){return!!document.body&&document.readyState==="interactive"}ie(function(){return new W(function(o){if(Nt()||jt())return o();var h=setInterval(function(){if(Nt()||jt())return clearInterval(h),o()},10)})});var ut=typeof document<"u"?document.currentScript:null,Gt=ie(function(){if(ut||(ut=function(){try{var o=function(){try{throw new Error("_")}catch(T){return T.stack||""}}(),h=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(o),c=h&&h[1];if(!c)return;for(var p=0,g=[].slice.call(document.getElementsByTagName("script")).reverse();p<g.length;p++){var O=g[p];if(O.src&&O.src===c)return O}}catch{}}()))return ut;throw new Error("Can not determine current script")}),Kt=l();ie(function(){var o;try{o=Gt()}catch{return Kt}var h=o.getAttribute("data-uid");if(h&&typeof h=="string"||(h=o.getAttribute("data-uid-auto"))&&typeof h=="string")return h;if(o.src){var c=function(p){for(var g="",O=0;O<p.length;O++){var T=p[O].charCodeAt(0)*O;p[O+1]&&(T+=p[O+1].charCodeAt(0)*(O-1)),g+=String.fromCharCode(97+Math.abs(T)%26)}return g}(JSON.stringify({src:o.src,dataset:o.dataset}));h="uid_"+c.slice(c.length-30)}else h=l();return o.setAttribute("data-uid-auto",h),h});function st(o){o===void 0&&(o=window);var h="__post_robot_10_0_46__";return o!==window?o[h]:o[h]=o[h]||{}}var Tt=function(){return{}};function ve(o,h){return o===void 0&&(o="store"),h===void 0&&(h=Tt),nt(st(),o,function(){var c=h();return{has:function(p){return c.hasOwnProperty(p)},get:function(p,g){return c.hasOwnProperty(p)?c[p]:g},set:function(p,g){return c[p]=g,g},del:function(p){delete c[p]},getOrSet:function(p,g){return nt(c,p,g)},reset:function(){c=h()},keys:function(){return Object.keys(c)}}})}var vt=function(){};function lt(){var o=st();return o.WINDOW_WILDCARD=o.WINDOW_WILDCARD||new vt,o.WINDOW_WILDCARD}function Pe(o,h){return o===void 0&&(o="store"),h===void 0&&(h=Tt),ve("windowStore").getOrSet(o,function(){var c=new w,p=function(g){return c.getOrSet(g,h)};return{has:function(g){return p(g).hasOwnProperty(o)},get:function(g,O){var T=p(g);return T.hasOwnProperty(o)?T[o]:O},set:function(g,O){return p(g)[o]=O,O},del:function(g){delete p(g)[o]},getOrSet:function(g,O){return nt(p(g),o,O)}}})}function xt(){return ve("instance").getOrSet("instanceID",l)}function dr(o,h){var c=h.domain,p=Pe("helloPromises"),g=p.get(o);g&&g.resolve({domain:c});var O=W.resolve({domain:c});return p.set(o,O),O}function Br(o,h){return(0,h.send)(o,"postrobot_hello",{instanceID:xt()},{domain:"*",timeout:-1}).then(function(c){var p=c.origin,g=c.data.instanceID;return dr(o,{domain:p}),{win:o,domain:p,instanceID:g}})}function bs(o,h){var c=h.send;return Pe("windowInstanceIDPromises").getOrSet(o,function(){return Br(o,{send:c}).then(function(p){return p.instanceID})})}function Ss(o){Pe("knownWindows").set(o,!0)}function Jr(o){return typeof o=="object"&&o!==null&&typeof o.__type__=="string"}function Ps(o){return o===void 0?"undefined":o===null?"null":Array.isArray(o)?"array":typeof o=="function"?"function":typeof o=="object"?o instanceof Error?"error":typeof o.then=="function"?"promise":{}.toString.call(o)==="[object RegExp]"?"regex":{}.toString.call(o)==="[object Date]"?"date":"object":typeof o=="string"?"string":typeof o=="number"?"number":typeof o=="boolean"?"boolean":void 0}function $t(o,h){return{__type__:o,__val__:h}}var ze,qi=((ze={}).function=function(){},ze.error=function(o){return $t("error",{message:o.message,stack:o.stack,code:o.code,data:o.data})},ze.promise=function(){},ze.regex=function(o){return $t("regex",o.source)},ze.date=function(o){return $t("date",o.toJSON())},ze.array=function(o){return o},ze.object=function(o){return o},ze.string=function(o){return o},ze.number=function(o){return o},ze.boolean=function(o){return o},ze.null=function(o){return o},ze[void 0]=function(o){return $t("undefined",o)},ze),Gi={},Ve,Ki=((Ve={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},Ve.error=function(o){var h=o.stack,c=o.code,p=o.data,g=new Error(o.message);return g.code=c,p&&(g.data=p),g.stack=h+`

`+g.stack,g},Ve.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},Ve.regex=function(o){return new RegExp(o)},Ve.date=function(o){return new Date(o)},Ve.array=function(o){return o},Ve.object=function(o){return o},Ve.string=function(o){return o},Ve.number=function(o){return o},Ve.boolean=function(o){return o},Ve.null=function(o){return o},Ve[void 0]=function(){},Ve),xi={};new W(function(o){if(window.document&&window.document.body)return o(window.document.body);var h=setInterval(function(){if(window.document&&window.document.body)return clearInterval(h),o(window.document.body)},10)});function Yr(){for(var o=ve("idToProxyWindow"),h=0,c=o.keys();h<c.length;h++){var p=c[h];o.get(p).shouldClean()&&o.del(p)}}function Rs(o,h){var c=h.send,p=h.id,g=p===void 0?l():p,O=o.then(function(A){if(E(A))return S(A).name}),T=o.then(function(A){if(F(A))throw new Error("Window is closed, can not determine type");return v(A)?"popup":"iframe"});O.catch(De),T.catch(De);var D=function(){return o.then(function(A){if(!F(A))return E(A)?S(A).name:O})};return{id:g,getType:function(){return T},getInstanceID:we(function(){return o.then(function(A){return bs(A,{send:c})})}),close:function(){return o.then(qe)},getName:D,focus:function(){return o.then(function(A){A.focus()})},isClosed:function(){return o.then(function(A){return F(A)})},setLocation:function(A,C){return C===void 0&&(C={}),o.then(function(H){var z=window.location.protocol+"//"+window.location.host,V=C.method,q=V===void 0?"get":V,ne=C.body;if(A.indexOf("/")===0)A=""+z+A;else if(!A.match(/^https?:\/\//)&&A.indexOf(z)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(A));if(q==="post")return D().then(function(ee){if(!ee)throw new Error("Can not post to window without target name");(function(te){var fe=te.url,_e=te.target,pe=te.body,he=te.method,Se=he===void 0?"post":he,ce=document.createElement("form");if(ce.setAttribute("target",_e),ce.setAttribute("method",Se),ce.setAttribute("action",fe),ce.style.display="none",pe)for(var me=0,Ue=Object.keys(pe);me<Ue.length;me++){var Ee,Xt=Ue[me],tn=document.createElement("input");tn.setAttribute("name",Xt),tn.setAttribute("value",(Ee=pe[Xt])==null?void 0:Ee.toString()),ce.appendChild(tn)}It().appendChild(ce),ce.submit(),It().removeChild(ce)})({url:A,target:ee,method:q,body:ne})});if(q!=="get")throw new Error("Unsupported method: "+q);if(E(H))try{if(H.location&&typeof H.location.replace=="function"){H.location.replace(A);return}}catch{}H.location=A})},setName:function(A){return o.then(function(C){var H=E(C),z=We(C);if(!H)throw new Error("Can not set name for cross-domain window: "+A);S(C).name=A,z&&z.setAttribute("name",A),O=W.resolve(A)})}}}var He=function(){function o(c){var p=c.send,g=c.win,O=c.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new W,this.serializedWindow=O||Rs(this.actualWindowPromise,{send:p}),ve("idToProxyWindow").set(this.getID(),this),g&&this.setWindow(g,{send:p})}var h=o.prototype;return h.getID=function(){return this.serializedWindow.id},h.getType=function(){return this.serializedWindow.getType()},h.isPopup=function(){return this.getType().then(function(c){return c==="popup"})},h.setLocation=function(c,p){var g=this;return this.serializedWindow.setLocation(c,p).then(function(){return g})},h.getName=function(){return this.serializedWindow.getName()},h.setName=function(c){var p=this;return this.serializedWindow.setName(c).then(function(){return p})},h.close=function(){var c=this;return this.serializedWindow.close().then(function(){return c})},h.focus=function(){var c=this,p=this.isPopup(),g=this.getName(),O=W.hash({isPopup:p,name:g}).then(function(D){var A=D.name;D.isPopup&&A&&window.open("",A,"noopener")}),T=this.serializedWindow.focus();return W.all([O,T]).then(function(){return c})},h.isClosed=function(){return this.serializedWindow.isClosed()},h.getWindow=function(){return this.actualWindow},h.setWindow=function(c,p){var g=p.send;this.actualWindow=c,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=Rs(this.actualWindowPromise,{send:g,id:this.getID()}),Pe("winToProxyWindow").set(c,this)},h.awaitWindow=function(){return this.actualWindowPromise},h.matchWindow=function(c,p){var g=this,O=p.send;return W.try(function(){return g.actualWindow?c===g.actualWindow:W.hash({proxyInstanceID:g.getInstanceID(),knownWindowInstanceID:bs(c,{send:O})}).then(function(T){var D=T.proxyInstanceID===T.knownWindowInstanceID;return D&&g.setWindow(c,{send:O}),D})})},h.unwrap=function(){return this.actualWindow||this},h.getInstanceID=function(){return this.serializedWindow.getInstanceID()},h.shouldClean=function(){return!!(this.actualWindow&&F(this.actualWindow))},h.serialize=function(){return this.serializedWindow},o.unwrap=function(c){return o.isProxyWindow(c)?c.unwrap():c},o.serialize=function(c,p){var g=p.send;return Yr(),o.toProxyWindow(c,{send:g}).serialize()},o.deserialize=function(c,p){var g=p.send;return Yr(),ve("idToProxyWindow").get(c.id)||new o({serializedWindow:c,send:g})},o.isProxyWindow=function(c){return!!(c&&!Ie(c)&&c.isProxyWindow)},o.toProxyWindow=function(c,p){var g=p.send;if(Yr(),o.isProxyWindow(c))return c;var O=c;return Pe("winToProxyWindow").get(O)||new o({win:O,send:g})},o}();function Zr(o,h,c,p,g){var O=Pe("methodStore"),T=ve("proxyWindowMethods");He.isProxyWindow(p)?T.set(o,{val:h,name:c,domain:g,source:p}):(T.del(o),O.getOrSet(p,function(){return{}})[o]={domain:g,name:c,val:h,source:p})}function Os(o,h){var c=Pe("methodStore"),p=ve("proxyWindowMethods");return c.getOrSet(o,function(){return{}})[h]||p.get(h)}function Is(o,h,c,p,g){T=(O={on:g.on,send:g.send}).on,D=O.send,ve("builtinListeners").getOrSet("functionCalls",function(){return T("postrobot_method",{domain:"*"},function(H){var z=H.source,V=H.origin,q=H.data,ne=q.id,ee=q.name,te=Os(z,ne);if(!te)throw new Error("Could not find method '"+ee+"' with id: "+q.id+" in "+P(window));var fe=te.source,_e=te.domain,pe=te.val;return W.try(function(){if(!le(_e,V))throw new Error("Method '"+q.name+"' domain "+JSON.stringify(gt(te.domain)?te.domain.source:te.domain)+" does not match origin "+V+" in "+P(window));if(He.isProxyWindow(fe))return fe.matchWindow(z,{send:D}).then(function(he){if(!he)throw new Error("Method call '"+q.name+"' failed - proxy window does not match source in "+P(window))})}).then(function(){return pe.apply({source:z,origin:V},q.args)},function(he){return W.try(function(){if(pe.onError)return pe.onError(he)}).then(function(){throw he.stack&&(he.stack="Remote call to "+ee+"("+function(Se){return Se===void 0&&(Se=[]),(ce=Se,[].slice.call(ce)).map(function(me){return typeof me=="string"?"'"+me+"'":me===void 0?"undefined":me===null?"null":typeof me=="boolean"?me.toString():Array.isArray(me)?"[ ... ]":typeof me=="object"?"{ ... }":typeof me=="function"?"() => { ... }":"<"+typeof me+">"}).join(", ");var ce}(q.args)+`) failed

`+he.stack),he})}).then(function(he){return{result:he,id:ne,name:ee}})})});var O,T,D,A=c.__id__||l();o=He.unwrap(o);var C=c.__name__||c.name||p;return typeof C=="string"&&typeof C.indexOf=="function"&&C.indexOf("anonymous::")===0&&(C=C.replace("anonymous::",p+"::")),He.isProxyWindow(o)?(Zr(A,c,C,o,h),o.awaitWindow().then(function(H){Zr(A,c,C,H,h)})):Zr(A,c,C,o,h),$t("cross_domain_function",{id:A,name:C})}function Ns(o,h,c,p){var g,O=p.on,T=p.send;return function(D,A){A===void 0&&(A=Gi);var C=JSON.stringify(D,function(H){var z=this[H];if(Jr(this))return z;var V=Ps(z);if(!V)return z;var q=A[V]||qi[V];return q?q(z,H):z});return C===void 0?"undefined":C}(c,((g={}).promise=function(D,A){return function(C,H,z,V,q){return $t("cross_domain_zalgo_promise",{then:Is(C,H,function(ne,ee){return z.then(ne,ee)},V,{on:q.on,send:q.send})})}(o,h,D,A,{on:O,send:T})},g.function=function(D,A){return Is(o,h,D,A,{on:O,send:T})},g.object=function(D){return Ie(D)||He.isProxyWindow(D)?$t("cross_domain_window",He.serialize(D,{send:T})):D},g))}function js(o,h,c,p){var g,O=p.send;return function(T,D){if(D===void 0&&(D=xi),T!=="undefined")return JSON.parse(T,function(A,C){if(Jr(this))return C;var H,z;if(Jr(C)?(H=C.__type__,z=C.__val__):(H=Ps(C),z=C),!H)return z;var V=D[H]||Ki[H];return V?V(z,A):z})}(c,((g={}).cross_domain_zalgo_promise=function(T){return function(D,A,C){return new W(C.then)}(0,0,T)},g.cross_domain_function=function(T){return function(D,A,C,H){var z=C.id,V=C.name,q=H.send,ne=function(te){te===void 0&&(te={});function fe(){var _e=arguments;return He.toProxyWindow(D,{send:q}).awaitWindow().then(function(pe){var he=Os(pe,z);if(he&&he.val!==fe)return he.val.apply({source:window,origin:P()},_e);var Se=[].slice.call(_e);return te.fireAndForget?q(pe,"postrobot_method",{id:z,name:V,args:Se},{domain:A,fireAndForget:!0}):q(pe,"postrobot_method",{id:z,name:V,args:Se},{domain:A,fireAndForget:!1}).then(function(ce){return ce.data.result})}).catch(function(pe){throw pe})}return fe.__name__=V,fe.__origin__=A,fe.__source__=D,fe.__id__=z,fe.origin=A,fe},ee=ne();return ee.fireAndForget=ne({fireAndForget:!0}),ee}(o,h,T,{send:O})},g.cross_domain_window=function(T){return He.deserialize(T,{send:O})},g))}var Qr={};Qr.postrobot_post_message=function(o,h,c){c.indexOf("file:")===0&&(c="*"),o.postMessage(h,c)};function en(o,h,c,p){var g=p.on,O=p.send;return W.try(function(){var T=Pe().getOrSet(o,function(){return{}});return T.buffer=T.buffer||[],T.buffer.push(c),T.flush=T.flush||W.flush().then(function(){if(F(o))throw new Error("Window is closed");var D=Ns(o,h,((A={}).__post_robot_10_0_46__=T.buffer||[],A),{on:g,send:O}),A;delete T.buffer;for(var C=Object.keys(Qr),H=[],z=0;z<C.length;z++){var V=C[z];try{Qr[V](o,D,h)}catch(q){H.push(q)}}if(H.length===C.length)throw new Error(`All post-robot messaging strategies failed:

`+H.map(function(q,ne){return ne+". "+rt(q)}).join(`

`))}),T.flush.then(function(){delete T.flush})}).then(De)}function Ts(o){return ve("responseListeners").get(o)}function Cs(o){ve("responseListeners").del(o)}function As(o){return ve("erroredResponseListeners").has(o)}function ks(o){var h=o.name,c=o.win,p=o.domain,g=Pe("requestListeners");if(c==="*"&&(c=null),p==="*"&&(p=null),!h)throw new Error("Name required to get request listener");for(var O=0,T=[c,lt()];O<T.length;O++){var D=T[O];if(D){var A=g.get(D);if(A){var C=A[h];if(C){if(p&&typeof p=="string"){if(C[p])return C[p];if(C.__domain_regex__)for(var H=0,z=C.__domain_regex__;H<z.length;H++){var V=z[H],q=V.listener;if(le(V.regex,p))return q}}if(C["*"])return C["*"]}}}}}function Xi(o,h,c,p){var g=p.on,O=p.send,T=ks({name:c.name,win:o,domain:h}),D=c.name==="postrobot_method"&&c.data&&typeof c.data.name=="string"?c.data.name+"()":c.name;function A(C,H,z){return W.flush().then(function(){if(!c.fireAndForget&&!F(o))try{return en(o,h,{id:l(),origin:P(window),type:"postrobot_message_response",hash:c.hash,name:c.name,ack:C,data:H,error:z},{on:g,send:O})}catch(V){throw new Error("Send response message failed for "+D+" in "+P()+`

`+rt(V))}})}return W.all([W.flush().then(function(){if(!c.fireAndForget&&!F(o))try{return en(o,h,{id:l(),origin:P(window),type:"postrobot_message_ack",hash:c.hash,name:c.name},{on:g,send:O})}catch(C){throw new Error("Send ack message failed for "+D+" in "+P()+`

`+rt(C))}}),W.try(function(){if(!T)throw new Error("No handler found for post message: "+c.name+" from "+h+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return T.handler({source:o,origin:h,data:c.data})}).then(function(C){return A("success",C)},function(C){return A("error",null,C)})]).then(De).catch(function(C){if(T&&T.handleError)return T.handleError(C);throw C})}function Bi(o,h,c){if(!As(c.hash)){var p=Ts(c.hash);if(!p)throw new Error("No handler found for post message ack for message: "+c.name+" from "+h+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!le(p.domain,h))throw new Error("Ack origin "+h+" does not match domain "+p.domain.toString());if(o!==p.win)throw new Error("Ack source does not match registered window")}catch(g){p.promise.reject(g)}p.ack=!0}}function Ji(o,h,c){if(!As(c.hash)){var p=Ts(c.hash);if(!p)throw new Error("No handler found for post message response for message: "+c.name+" from "+h+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!le(p.domain,h))throw new Error("Response origin "+h+" does not match domain "+(g=p.domain,Array.isArray(g)?"("+g.join(" | ")+")":i(g)?"RegExp("+g.toString()+")":g.toString()));var g;if(o!==p.win)throw new Error("Response source does not match registered window");Cs(c.hash),c.ack==="error"?p.promise.reject(c.error):c.ack==="success"&&p.promise.resolve({source:o,origin:h,data:c.data})}}function Ds(o,h){var c=h.on,p=h.send,g=ve("receivedMessages");try{if(!window||window.closed||!o.source)return}catch{return}var O=o.source,T=o.origin,D=function(H,z,V,q){var ne=q.on,ee=q.send,te;try{te=js(z,V,H,{on:ne,send:ee})}catch{return}if(te&&typeof te=="object"&&te!==null){var fe=te.__post_robot_10_0_46__;if(Array.isArray(fe))return fe}}(o.data,O,T,{on:c,send:p});if(D){Ss(O);for(var A=0;A<D.length;A++){var C=D[A];if(g.has(C.id)||(g.set(C.id,!0),F(O)&&!C.fireAndForget))return;C.origin.indexOf("file:")===0&&(T="file://");try{C.type==="postrobot_message_request"?Xi(O,T,C,{on:c,send:p}):C.type==="postrobot_message_response"?Ji(O,T,C):C.type==="postrobot_message_ack"&&Bi(O,T,C)}catch(H){setTimeout(function(){throw H},0)}}}}function wt(o,h,c){if(!o)throw new Error("Expected name");if(typeof(h=h||{})=="function"&&(c=h,h={}),!c)throw new Error("Expected handler");var p=function g(O,T){var D=O.name,A=O.win,C=O.domain,H=Pe("requestListeners");if(!D||typeof D!="string")throw new Error("Name required to add request listener");if(A&&A!=="*"&&He.isProxyWindow(A)){var z=A.awaitWindow().then(function(Ee){return g({name:D,win:Ee,domain:C},T)});return{cancel:function(){z.then(function(Ee){return Ee.cancel()},De)}}}var V=A;if(Array.isArray(V)){for(var q=[],ne=0,ee=V;ne<ee.length;ne++)q.push(g({name:D,domain:C,win:ee[ne]},T));return{cancel:function(){for(var Ee=0;Ee<q.length;Ee++)q[Ee].cancel()}}}if(Array.isArray(C)){for(var te=[],fe=0,_e=C;fe<_e.length;fe++)te.push(g({name:D,win:V,domain:_e[fe]},T));return{cancel:function(){for(var Ee=0;Ee<te.length;Ee++)te[Ee].cancel()}}}var pe=ks({name:D,win:V,domain:C});V&&V!=="*"||(V=lt());var he=(C=C||"*").toString();if(pe)throw V&&C?new Error("Request listener already exists for "+D+" on domain "+C.toString()+" for "+(V===lt()?"wildcard":"specified")+" window"):V?new Error("Request listener already exists for "+D+" for "+(V===lt()?"wildcard":"specified")+" window"):C?new Error("Request listener already exists for "+D+" on domain "+C.toString()):new Error("Request listener already exists for "+D);var Se=H.getOrSet(V,function(){return{}}),ce=nt(Se,D,function(){return{}}),me,Ue;return gt(C)?(me=nt(ce,"__domain_regex__",function(){return[]})).push(Ue={regex:C,listener:T}):ce[he]=T,{cancel:function(){delete ce[he],Ue&&(me.splice(me.indexOf(Ue,1)),me.length||delete ce.__domain_regex__),Object.keys(ce).length||delete Se[D],V&&!Object.keys(Se).length&&H.del(V)}}}({name:o,win:h.window,domain:h.domain||"*"},{handler:c||h.handler,handleError:h.errorHandler||function(g){throw g}});return{cancel:function(){p.cancel()}}}function Yi(o,h,c){typeof(h=h||{})=="function"&&(c=h,h={});var p=new W,g;return h.errorHandler=function(O){g.cancel(),p.reject(O)},g=wt(o,h,function(O){if(g.cancel(),p.resolve(O),c)return c(O)}),p.cancel=g.cancel,p}var dt=function o(h,c,p,g){var O=(g=g||{}).domain||"*",T=g.timeout||-1,D=g.timeout||5e3,A=g.fireAndForget||!1;return He.toProxyWindow(h,{send:o}).awaitWindow().then(function(C){return W.try(function(){if(function(H,z,V){if(!H)throw new Error("Expected name");if(typeof V!="string"&&!Array.isArray(V)&&!gt(V))throw new TypeError("Can not send "+H+". Expected domain "+JSON.stringify(V)+" to be a string, array, or regex");if(F(z))throw new Error("Can not send "+H+". Target window is closed")}(c,C,O),function(H,z){var V=ue(z);if(V)return V===H;if(z===H||function(ee){ee===void 0&&(ee=window);try{if(ee.top)return ee.top}catch{}if(u(ee)===ee)return ee;try{if($(window,ee)&&window.top)return window.top}catch{}try{if($(ee,window)&&window.top)return window.top}catch{}for(var te=0,fe=function pe(he){for(var Se=[],ce=0,me=R(he);ce<me.length;ce++){var Ue=me[ce];Se.push(Ue);for(var Ee=0,Xt=pe(Ue);Ee<Xt.length;Ee++)Se.push(Xt[Ee])}return Se}(ee);te<fe.length;te++){var _e=fe[te];try{if(_e.top)return _e.top}catch{}if(u(_e)===_e)return _e}}(z)===z)return!1;for(var q=0,ne=R(H);q<ne.length;q++)if(ne[q]===z)return!0;return!1}(window,C))return function(H,z,V){z===void 0&&(z=5e3),V===void 0&&(V="Window");var q=function(ne){return Pe("helloPromises").getOrSet(ne,function(){return new W})}(H);return z!==-1&&(q=q.timeout(z,new Error(V+" did not load after "+z+"ms"))),q}(C,D)}).then(function(H){return function(z,V,q,ne){var ee=ne.send;return W.try(function(){return typeof V=="string"?V:W.try(function(){return q||Br(z,{send:ee}).then(function(te){return te.domain})}).then(function(te){if(!le(V,V))throw new Error("Domain "+Ot(V)+" does not match "+Ot(V));return te})})}(C,O,(H===void 0?{}:H).domain,{send:o})}).then(function(H){var z=H,V=c==="postrobot_method"&&p&&typeof p.name=="string"?p.name+"()":c,q=new W,ne=c+"_"+l();if(!A){var ee={name:c,win:C,domain:z,promise:q};(function(ce,me){ve("responseListeners").set(ce,me)})(ne,ee);var te=Pe("requestPromises").getOrSet(C,function(){return[]});te.push(q),q.catch(function(){(function(ce){ve("erroredResponseListeners").set(ce,!0)})(ne),Cs(ne)});var fe=function(ce){return Pe("knownWindows").get(ce,!1)}(C)?1e4:2e3,_e=T,pe=fe,he=_e,Se=function(ce,me){var Ue;return function Ee(){Ue=setTimeout(function(){(function(){if(F(C))return q.reject(new Error("Window closed for "+c+" before "+(ee.ack?"response":"ack")));if(ee.cancelled)return q.reject(new Error("Response listener was cancelled for "+c));pe=Math.max(pe-500,0),he!==-1&&(he=Math.max(he-500,0)),ee.ack||pe!==0?he===0&&q.reject(new Error("No response for postMessage "+V+" in "+P()+" in "+_e+"ms")):q.reject(new Error("No ack for postMessage "+V+" in "+P()+" in "+fe+"ms"))})(),Ee()},500)}(),{cancel:function(){clearTimeout(Ue)}}}();q.finally(function(){Se.cancel(),te.splice(te.indexOf(q,1))}).catch(De)}return en(C,z,{id:l(),origin:P(window),type:"postrobot_message_request",hash:ne,name:c,data:p,fireAndForget:A},{on:wt,send:o}).then(function(){return A?q.resolve():q},function(ce){throw new Error("Send request message failed for "+V+" in "+P()+`

`+rt(ce))})})})};function Zi(o,h,c){return Ns(o,h,c,{on:wt,send:dt})}function Qi(o,h,c){return js(o,h,c,{send:dt})}function ea(o){return new He({send:dt,win:o})}function ta(o){return He.toProxyWindow(o,{send:dt})}function Ls(){st().initialized||(st().initialized=!0,h=(o={on:wt,send:dt}).on,c=o.send,(p=st()).receiveMessage=p.receiveMessage||function(g){return Ds(g,{on:h,send:c})},function(g){var O=g.on,T=g.send;ve().getOrSet("postMessageListener",function(){return function(D,A,C){return D.addEventListener("message",C),{cancel:function(){D.removeEventListener("message",C)}}}(window,0,function(D){(function(A,C){var H=C.on,z=C.send;W.try(function(){var V=A.source||A.sourceElement,q=A.origin||A.originalEvent&&A.originalEvent.origin,ne=A.data;if(q==="null"&&(q="file://"),V){if(!q)throw new Error("Post message did not have origin domain");Ds({source:V,origin:q,data:ne},{on:H,send:z})}})})(D,{on:O,send:T})})})}({on:wt,send:dt}),function(g){var O=g.on,T=g.send;ve("builtinListeners").getOrSet("helloListener",function(){var D=O("postrobot_hello",{domain:"*"},function(C){return dr(C.source,{domain:C.origin}),{instanceID:xt()}}),A=ue();return A&&Br(A,{send:T}).catch(function(C){}),D})}({on:wt,send:dt}));var o,h,c,p}function ra(){(function(){for(var h=ve("responseListeners"),c=0,p=h.keys();c<p.length;c++){var g=p[c],O=h.get(g);O&&(O.cancelled=!0),h.del(g)}})(),(o=ve().get("postMessageListener"))&&o.cancel();var o;delete window.__post_robot_10_0_46__}var na=!0;function sa(o){for(var h=0,c=Pe("requestPromises").get(o,[]);h<c.length;h++)c[h].reject(new Error("Window "+(F(o)?"closed":"cleaned up")+" before response")).catch(De)}Ls()}])})})(Li);var xf=Li.exports;(function(e){e.exports=xf,e.exports.default=e.exports})(Di);var Xf=Di.exports;const pt=Mr(Xf);class ct{constructor(t,r){ge(this,"configuration");ge(this,"wpWindow");this.configuration=t,this.wpWindow=r}async handle(t){return!1}}class Bf extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;const{recordId:r,recordType:n}=t;try{this.wpWindow.contentWindow.postMessage({action:"changeContactAssignment",data:{recordType:n,recordId:r}},this.wpWindow.src)}catch{return!1}return!0}}class Jf extends ct{async handle(){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;const{token:t,domain:r}=this.configuration.authData,n=this.configuration.mode==="dev"?localStorage.getItem("communicationWpUrl")||"https://dev-webphone.fcc-offline.v":null;try{this.wpWindow.contentWindow.postMessage({action:"open",data:{token:t,domain:r,communicationUrl:n}},this.wpWindow.src)}catch{return!1}return!0}}class Yf extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;try{this.wpWindow.contentWindow.postMessage({action:"changeUserStatus",data:{statusId:t.statusId}},this.wpWindow.src)}catch{return!1}return!0}}class Zf extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;try{this.wpWindow.contentWindow.postMessage({action:"addStyles",data:t},this.wpWindow.src)}catch{return!1}return!0}}class Qf extends ct{async handle(){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;try{this.wpWindow.contentWindow.postMessage({action:"webphone-force-logout"},this.wpWindow.src)}catch{return!1}return!0}}class eh extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;const{phoneNumber:r,vid:n,ticket:s}=t;try{this.wpWindow.contentWindow.postMessage({action:"call",data:{phoneNumber:r,extraParams:{vid:n,ticket:s}}},this.wpWindow.src)}catch{return!1}return!0}}class th extends ct{async handle(t){if(!this.wpWindow||!this.wpWindow.contentWindow)return!1;const{ticketId:r,ticketNumber:n,subject:s}=t;try{this.wpWindow.contentWindow.postMessage({action:"setRelatedTo",data:{ticketId:r,ticketNumber:n,subject:s}},this.wpWindow.src)}catch{return!1}return!0}}var Wt,Lr;class rh extends ct{constructor(r,n,s,i,a,f){super(r,n);ge(this,"setIsLoaded");ge(this,"authorizeWp");ge(this,"logoutWp");ge(this,"setCss");hr(this,Wt,!1);hr(this,Lr,!1);this.setIsLoaded=s,this.authorizeWp=i,this.logoutWp=a,this.setCss=f}async authorizeWebphone(){if(!fr(this,Wt)){pr(this,Wt,!0);let r=setTimeout(()=>{fr(this,Lr)||(this.configuration.adapter.loader.prompt(""),pr(this,Wt,!1)),clearTimeout(r)},15*1e3);this.authorizeWp().then(()=>clearTimeout(r))}}async handle(r){var n,s,i,a;if((s=(n=this.wpWindow)==null?void 0:n.getAttribute("src"))!=null&&s.includes(r.origin)){const{action:f=null,data:d=null}=r.data;try{let m=!1;switch(this.configuration.mode==="dev"&&f&&console.log(`[SDK][WebphoneEventHandler] received message from ${f}:`,d),f){case"userStatusChanged":case"phoneStatusChanged":if(["ready","busy","suspend","away","wrap","pause","in_campaign"].includes(d.status)&&((a=(i=this.configuration.adapter).onUserStatusChanged)==null||a.call(i,d.id,d.status)),["ready","idle","notready","busy"].includes(d.status)){const u=d.status,v=["ready","idle"].includes(u);m=u==="busy",this.configuration.adapter.onToggleClick2Dial(v,u)}break;case"showObject":if(!d.id)throw new Error("showObject event must have id");this.configuration.adapter.navigateToObjectHandler&&this.configuration.adapter.navigateToObjectHandler(d.id),this.configuration.adapter.popSoftphoneHandler&&this.configuration.adapter.popSoftphoneHandler(!m);break;case"navigateToObject":this.configuration.adapter.navigateToObjectHandler&&this.configuration.adapter.navigateToObjectHandler(d.id);break;case"create":await this.configuration.adapter.createEntityHandler(d);break;case"linkToCurrent":this.configuration.adapter.linkToCurrentHandler&&this.configuration.adapter.linkToCurrentHandler(d.id);break;case"webphone-login-ready":this.authorizeWebphone();break;case"webphone-ready":this.setIsLoaded(!0),this.authorizeWebphone(),this.configuration.adapter.loader.finish();break;case"webphone-loaded":this.configuration.adapter.popSoftphoneHandler&&this.configuration.adapter.popSoftphoneHandler(!0),this.configuration.adapter.loader.finish();break;case"webphone-ready-to-call":break;case"webphone-auth-error":this.setCss("body { display: none !important; }"),this.configuration.adapter.loader.error(d.error??"AUTH_ERROR",d.message??"");break;default:return!1}}catch(m){return this.configuration.mode==="dev"&&console.error(`[SDK][WebphoneEventHandler] error in action ${f}:`,m.message),!1}return!0}return!1}}Wt=new WeakMap,Lr=new WeakMap;var _n={exports:{}};const nh="2.0.0",Mi=256,sh=Number.MAX_SAFE_INTEGER||9007199254740991,oh=16,ih=Mi-6,ah=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var qr={MAX_LENGTH:Mi,MAX_SAFE_COMPONENT_LENGTH:oh,MAX_SAFE_BUILD_LENGTH:ih,MAX_SAFE_INTEGER:sh,RELEASE_TYPES:ah,SEMVER_SPEC_VERSION:nh,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const ch=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Gr=ch;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=qr,i=Gr;t=e.exports={};const a=t.re=[],f=t.safeRe=[],d=t.src=[],m=t.safeSrc=[],u=t.t={};let v=0;const N="[a-zA-Z0-9-]",b=[["\\s",1],["\\d",s],[N,n]],P=S=>{for(const[$,R]of b)S=S.split(`${$}*`).join(`${$}{0,${R}}`).split(`${$}+`).join(`${$}{1,${R}}`);return S},E=(S,$,R)=>{const L=P($),G=v++;i(S,G,$),u[S]=G,d[G]=$,m[G]=L,a[G]=new RegExp($,R?"g":void 0),f[G]=new RegExp(L,R?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${N}*`),E("MAINVERSION",`(${d[u.NUMERICIDENTIFIER]})\\.(${d[u.NUMERICIDENTIFIER]})\\.(${d[u.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${d[u.NUMERICIDENTIFIERLOOSE]})\\.(${d[u.NUMERICIDENTIFIERLOOSE]})\\.(${d[u.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${d[u.NUMERICIDENTIFIER]}|${d[u.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${d[u.NUMERICIDENTIFIERLOOSE]}|${d[u.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${d[u.PRERELEASEIDENTIFIER]}(?:\\.${d[u.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${d[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[u.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${N}+`),E("BUILD",`(?:\\+(${d[u.BUILDIDENTIFIER]}(?:\\.${d[u.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${d[u.MAINVERSION]}${d[u.PRERELEASE]}?${d[u.BUILD]}?`),E("FULL",`^${d[u.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${d[u.MAINVERSIONLOOSE]}${d[u.PRERELEASELOOSE]}?${d[u.BUILD]}?`),E("LOOSE",`^${d[u.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${d[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${d[u.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${d[u.XRANGEIDENTIFIER]})(?:\\.(${d[u.XRANGEIDENTIFIER]})(?:\\.(${d[u.XRANGEIDENTIFIER]})(?:${d[u.PRERELEASE]})?${d[u.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${d[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[u.XRANGEIDENTIFIERLOOSE]})(?:${d[u.PRERELEASELOOSE]})?${d[u.BUILD]}?)?)?`),E("XRANGE",`^${d[u.GTLT]}\\s*${d[u.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${d[u.GTLT]}\\s*${d[u.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),E("COERCE",`${d[u.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",d[u.COERCEPLAIN]+`(?:${d[u.PRERELEASE]})?(?:${d[u.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",d[u.COERCE],!0),E("COERCERTLFULL",d[u.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${d[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",E("TILDE",`^${d[u.LONETILDE]}${d[u.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${d[u.LONETILDE]}${d[u.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${d[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",E("CARET",`^${d[u.LONECARET]}${d[u.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${d[u.LONECARET]}${d[u.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${d[u.GTLT]}\\s*(${d[u.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${d[u.GTLT]}\\s*(${d[u.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${d[u.GTLT]}\\s*(${d[u.LOOSEPLAIN]}|${d[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${d[u.XRANGEPLAIN]})\\s+-\\s+(${d[u.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${d[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[u.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_n,_n.exports);var lr=_n.exports;const uh=Object.freeze({loose:!0}),lh=Object.freeze({}),dh=e=>e?typeof e!="object"?uh:e:lh;var ps=dh;const go=/^[0-9]+$/,Wi=(e,t)=>{const r=go.test(e),n=go.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},fh=(e,t)=>Wi(t,e);var zi={compareIdentifiers:Wi,rcompareIdentifiers:fh};const Er=Gr,{MAX_LENGTH:vo,MAX_SAFE_INTEGER:_r}=qr,{safeRe:$o,safeSrc:wo,t:br}=lr,hh=ps,{compareIdentifiers:kt}=zi;let ph=class Ye{constructor(t,r){if(r=hh(r),t instanceof Ye){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>vo)throw new TypeError(`version is longer than ${vo} characters`);Er("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?$o[br.LOOSE]:$o[br.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>_r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_r||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<_r)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Er("SemVer.compare",this.version,this.options,t),!(t instanceof Ye)){if(typeof t=="string"&&t===this.version)return 0;t=new Ye(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ye||(t=new Ye(t,this.options)),kt(this.major,t.major)||kt(this.minor,t.minor)||kt(this.patch,t.patch)}comparePre(t){if(t instanceof Ye||(t=new Ye(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],s=t.prerelease[r];if(Er("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return kt(n,s)}while(++r)}compareBuild(t){t instanceof Ye||(t=new Ye(t,this.options));let r=0;do{const n=this.build[r],s=t.build[r];if(Er("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return kt(n,s)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const s=new RegExp(`^${this.options.loose?wo[br.PRERELEASELOOSE]:wo[br.PRERELEASE]}$`),i=`-${r}`.match(s);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),kt(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ce=ph;const Eo=Ce,mh=(e,t,r=!1)=>{if(e instanceof Eo)return e;try{return new Eo(e,t)}catch(n){if(!r)return null;throw n}};var qt=mh;const yh=qt,gh=(e,t)=>{const r=yh(e,t);return r?r.version:null};var vh=gh;const $h=qt,wh=(e,t)=>{const r=$h(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var Eh=wh;const _o=Ce,_h=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new _o(e instanceof _o?e.version:e,r).inc(t,n,s).version}catch{return null}};var bh=_h;const bo=qt,Sh=(e,t)=>{const r=bo(e,null,!0),n=bo(t,null,!0),s=r.compare(n);if(s===0)return null;const i=s>0,a=i?r:n,f=i?n:r,d=!!a.prerelease.length;if(!!f.prerelease.length&&!d){if(!f.patch&&!f.minor)return"major";if(f.compareMain(a)===0)return f.minor&&!f.patch?"minor":"patch"}const u=d?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};var Ph=Sh;const Rh=Ce,Oh=(e,t)=>new Rh(e,t).major;var Ih=Oh;const Nh=Ce,jh=(e,t)=>new Nh(e,t).minor;var Th=jh;const Ch=Ce,Ah=(e,t)=>new Ch(e,t).patch;var kh=Ah;const Dh=qt,Lh=(e,t)=>{const r=Dh(e,t);return r&&r.prerelease.length?r.prerelease:null};var Mh=Lh;const So=Ce,Wh=(e,t,r)=>new So(e,r).compare(new So(t,r));var Be=Wh;const zh=Be,Vh=(e,t,r)=>zh(t,e,r);var Hh=Vh;const Uh=Be,Fh=(e,t)=>Uh(e,t,!0);var qh=Fh;const Po=Ce,Gh=(e,t,r)=>{const n=new Po(e,r),s=new Po(t,r);return n.compare(s)||n.compareBuild(s)};var ms=Gh;const Kh=ms,xh=(e,t)=>e.sort((r,n)=>Kh(r,n,t));var Xh=xh;const Bh=ms,Jh=(e,t)=>e.sort((r,n)=>Bh(n,r,t));var Yh=Jh;const Zh=Be,Qh=(e,t,r)=>Zh(e,t,r)>0;var Kr=Qh;const ep=Be,tp=(e,t,r)=>ep(e,t,r)<0;var ys=tp;const rp=Be,np=(e,t,r)=>rp(e,t,r)===0;var Vi=np;const sp=Be,op=(e,t,r)=>sp(e,t,r)!==0;var Hi=op;const ip=Be,ap=(e,t,r)=>ip(e,t,r)>=0;var gs=ap;const cp=Be,up=(e,t,r)=>cp(e,t,r)<=0;var vs=up;const lp=Vi,dp=Hi,fp=Kr,hp=gs,pp=ys,mp=vs,yp=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return lp(e,r,n);case"!=":return dp(e,r,n);case">":return fp(e,r,n);case">=":return hp(e,r,n);case"<":return pp(e,r,n);case"<=":return mp(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var Ui=yp;const gp=Ce,vp=qt,{safeRe:Sr,t:Pr}=lr,$p=(e,t)=>{if(e instanceof gp)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Sr[Pr.COERCEFULL]:Sr[Pr.COERCE]);else{const d=t.includePrerelease?Sr[Pr.COERCERTLFULL]:Sr[Pr.COERCERTL];let m;for(;(m=d.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||m.index+m[0].length!==r.index+r[0].length)&&(r=m),d.lastIndex=m.index+m[1].length+m[2].length;d.lastIndex=-1}if(r===null)return null;const n=r[2],s=r[3]||"0",i=r[4]||"0",a=t.includePrerelease&&r[5]?`-${r[5]}`:"",f=t.includePrerelease&&r[6]?`+${r[6]}`:"";return vp(`${n}.${s}.${i}${a}${f}`,t)};var wp=$p;class Ep{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}}var _p=Ep,cn,Ro;function Je(){if(Ro)return cn;Ro=1;const e=/\s+/g;class t{constructor(M,Z){if(Z=s(Z),M instanceof t)return M.loose===!!Z.loose&&M.includePrerelease===!!Z.includePrerelease?M:new t(M.raw,Z);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.formatted=void 0,this;if(this.options=Z,this.loose=!!Z.loose,this.includePrerelease=!!Z.includePrerelease,this.raw=M.trim().replace(e," "),this.set=this.raw.split("||").map(x=>this.parseRange(x.trim())).filter(x=>x.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const x=this.set[0];if(this.set=this.set.filter(Y=>!E(Y[0])),this.set.length===0)this.set=[x];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&S(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let M=0;M<this.set.length;M++){M>0&&(this.formatted+="||");const Z=this.set[M];for(let x=0;x<Z.length;x++)x>0&&(this.formatted+=" "),this.formatted+=Z[x].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(M){const x=((this.options.includePrerelease&&b)|(this.options.loose&&P))+":"+M,Y=n.get(x);if(Y)return Y;const W=this.options.loose,k=W?d[m.HYPHENRANGELOOSE]:d[m.HYPHENRANGE];M=M.replace(k,Ae(this.options.includePrerelease)),a("hyphen replace",M),M=M.replace(d[m.COMPARATORTRIM],u),a("comparator trim",M),M=M.replace(d[m.TILDETRIM],v),a("tilde trim",M),M=M.replace(d[m.CARETTRIM],N),a("caret trim",M);let w=M.split(" ").map(y=>R(y,this.options)).join(" ").split(/\s+/).map(y=>je(y,this.options));W&&(w=w.filter(y=>(a("loose invalid filter",y,this.options),!!y.match(d[m.COMPARATORLOOSE])))),a("range list",w);const I=new Map,_=w.map(y=>new i(y,this.options));for(const y of _){if(E(y))return[y];I.set(y.value,y)}I.size>1&&I.has("")&&I.delete("");const l=[...I.values()];return n.set(x,l),l}intersects(M,Z){if(!(M instanceof t))throw new TypeError("a Range is required");return this.set.some(x=>$(x,Z)&&M.set.some(Y=>$(Y,Z)&&x.every(W=>Y.every(k=>W.intersects(k,Z)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new f(M,this.options)}catch{return!1}for(let Z=0;Z<this.set.length;Z++)if(ke(this.set[Z],M,this.options))return!0;return!1}}cn=t;const r=_p,n=new r,s=ps,i=xr(),a=Gr,f=Ce,{safeRe:d,t:m,comparatorTrimReplace:u,tildeTrimReplace:v,caretTrimReplace:N}=lr,{FLAG_INCLUDE_PRERELEASE:b,FLAG_LOOSE:P}=qr,E=U=>U.value==="<0.0.0-0",S=U=>U.value==="",$=(U,M)=>{let Z=!0;const x=U.slice();let Y=x.pop();for(;Z&&x.length;)Z=x.every(W=>Y.intersects(W,M)),Y=x.pop();return Z},R=(U,M)=>(a("comp",U,M),U=ue(U,M),a("caret",U),U=G(U,M),a("tildes",U),U=Ie(U,M),a("xrange",U),U=qe(U,M),a("stars",U),U),L=U=>!U||U.toLowerCase()==="x"||U==="*",G=(U,M)=>U.trim().split(/\s+/).map(Z=>F(Z,M)).join(" "),F=(U,M)=>{const Z=M.loose?d[m.TILDELOOSE]:d[m.TILDE];return U.replace(Z,(x,Y,W,k,w)=>{a("tilde",U,x,Y,W,k,w);let I;return L(Y)?I="":L(W)?I=`>=${Y}.0.0 <${+Y+1}.0.0-0`:L(k)?I=`>=${Y}.${W}.0 <${Y}.${+W+1}.0-0`:w?(a("replaceTilde pr",w),I=`>=${Y}.${W}.${k}-${w} <${Y}.${+W+1}.0-0`):I=`>=${Y}.${W}.${k} <${Y}.${+W+1}.0-0`,a("tilde return",I),I})},ue=(U,M)=>U.trim().split(/\s+/).map(Z=>le(Z,M)).join(" "),le=(U,M)=>{a("caret",U,M);const Z=M.loose?d[m.CARETLOOSE]:d[m.CARET],x=M.includePrerelease?"-0":"";return U.replace(Z,(Y,W,k,w,I)=>{a("caret",U,Y,W,k,w,I);let _;return L(W)?_="":L(k)?_=`>=${W}.0.0${x} <${+W+1}.0.0-0`:L(w)?W==="0"?_=`>=${W}.${k}.0${x} <${W}.${+k+1}.0-0`:_=`>=${W}.${k}.0${x} <${+W+1}.0.0-0`:I?(a("replaceCaret pr",I),W==="0"?k==="0"?_=`>=${W}.${k}.${w}-${I} <${W}.${k}.${+w+1}-0`:_=`>=${W}.${k}.${w}-${I} <${W}.${+k+1}.0-0`:_=`>=${W}.${k}.${w}-${I} <${+W+1}.0.0-0`):(a("no pr"),W==="0"?k==="0"?_=`>=${W}.${k}.${w}${x} <${W}.${k}.${+w+1}-0`:_=`>=${W}.${k}.${w}${x} <${W}.${+k+1}.0-0`:_=`>=${W}.${k}.${w} <${+W+1}.0.0-0`),a("caret return",_),_})},Ie=(U,M)=>(a("replaceXRanges",U,M),U.split(/\s+/).map(Z=>We(Z,M)).join(" ")),We=(U,M)=>{U=U.trim();const Z=M.loose?d[m.XRANGELOOSE]:d[m.XRANGE];return U.replace(Z,(x,Y,W,k,w,I)=>{a("xRange",U,x,Y,W,k,w,I);const _=L(W),l=_||L(k),y=l||L(w),j=y;return Y==="="&&j&&(Y=""),I=M.includePrerelease?"-0":"",_?Y===">"||Y==="<"?x="<0.0.0-0":x="*":Y&&j?(l&&(k=0),w=0,Y===">"?(Y=">=",l?(W=+W+1,k=0,w=0):(k=+k+1,w=0)):Y==="<="&&(Y="<",l?W=+W+1:k=+k+1),Y==="<"&&(I="-0"),x=`${Y+W}.${k}.${w}${I}`):l?x=`>=${W}.0.0${I} <${+W+1}.0.0-0`:y&&(x=`>=${W}.${k}.0${I} <${W}.${+k+1}.0-0`),a("xRange return",x),x})},qe=(U,M)=>(a("replaceStars",U,M),U.trim().replace(d[m.STAR],"")),je=(U,M)=>(a("replaceGTE0",U,M),U.trim().replace(d[M.includePrerelease?m.GTE0PRE:m.GTE0],"")),Ae=U=>(M,Z,x,Y,W,k,w,I,_,l,y,j)=>(L(x)?Z="":L(Y)?Z=`>=${x}.0.0${U?"-0":""}`:L(W)?Z=`>=${x}.${Y}.0${U?"-0":""}`:k?Z=`>=${Z}`:Z=`>=${Z}${U?"-0":""}`,L(_)?I="":L(l)?I=`<${+_+1}.0.0-0`:L(y)?I=`<${_}.${+l+1}.0-0`:j?I=`<=${_}.${l}.${y}-${j}`:U?I=`<${_}.${l}.${+y+1}-0`:I=`<=${I}`,`${Z} ${I}`.trim()),ke=(U,M,Z)=>{for(let x=0;x<U.length;x++)if(!U[x].test(M))return!1;if(M.prerelease.length&&!Z.includePrerelease){for(let x=0;x<U.length;x++)if(a(U[x].semver),U[x].semver!==i.ANY&&U[x].semver.prerelease.length>0){const Y=U[x].semver;if(Y.major===M.major&&Y.minor===M.minor&&Y.patch===M.patch)return!0}return!1}return!0};return cn}var un,Oo;function xr(){if(Oo)return un;Oo=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,v){if(v=r(v),u instanceof t){if(u.loose===!!v.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,v),this.options=v,this.loose=!!v.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const v=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],N=u.match(v);if(!N)throw new TypeError(`Invalid comparator: ${u}`);this.operator=N[1]!==void 0?N[1]:"",this.operator==="="&&(this.operator=""),N[2]?this.semver=new f(N[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new f(u,this.options)}catch{return!1}return i(u,this.operator,this.semver,this.options)}intersects(u,v){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(u.value,v).test(this.value):u.operator===""?u.value===""?!0:new d(this.value,v).test(u.semver):(v=r(v),v.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!v.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||i(this.semver,"<",u.semver,v)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||i(this.semver,">",u.semver,v)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}un=t;const r=ps,{safeRe:n,t:s}=lr,i=Ui,a=Gr,f=Ce,d=Je();return un}const bp=Je(),Sp=(e,t,r)=>{try{t=new bp(t,r)}catch{return!1}return t.test(e)};var Xr=Sp;const Pp=Je(),Rp=(e,t)=>new Pp(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var Op=Rp;const Ip=Ce,Np=Je(),jp=(e,t,r)=>{let n=null,s=null,i=null;try{i=new Np(t,r)}catch{return null}return e.forEach(a=>{i.test(a)&&(!n||s.compare(a)===-1)&&(n=a,s=new Ip(n,r))}),n};var Tp=jp;const Cp=Ce,Ap=Je(),kp=(e,t,r)=>{let n=null,s=null,i=null;try{i=new Ap(t,r)}catch{return null}return e.forEach(a=>{i.test(a)&&(!n||s.compare(a)===1)&&(n=a,s=new Cp(n,r))}),n};var Dp=kp;const ln=Ce,Lp=Je(),Io=Kr,Mp=(e,t)=>{e=new Lp(e,t);let r=new ln("0.0.0");if(e.test(r)||(r=new ln("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const s=e.set[n];let i=null;s.forEach(a=>{const f=new ln(a.semver.version);switch(a.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!i||Io(f,i))&&(i=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!r||Io(r,i))&&(r=i)}return r&&e.test(r)?r:null};var Wp=Mp;const zp=Je(),Vp=(e,t)=>{try{return new zp(e,t).range||"*"}catch{return null}};var Hp=Vp;const Up=Ce,Fi=xr(),{ANY:Fp}=Fi,qp=Je(),Gp=Xr,No=Kr,jo=ys,Kp=vs,xp=gs,Xp=(e,t,r,n)=>{e=new Up(e,n),t=new qp(t,n);let s,i,a,f,d;switch(r){case">":s=No,i=Kp,a=jo,f=">",d=">=";break;case"<":s=jo,i=xp,a=No,f="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Gp(e,t,n))return!1;for(let m=0;m<t.set.length;++m){const u=t.set[m];let v=null,N=null;if(u.forEach(b=>{b.semver===Fp&&(b=new Fi(">=0.0.0")),v=v||b,N=N||b,s(b.semver,v.semver,n)?v=b:a(b.semver,N.semver,n)&&(N=b)}),v.operator===f||v.operator===d||(!N.operator||N.operator===f)&&i(e,N.semver))return!1;if(N.operator===d&&a(e,N.semver))return!1}return!0};var $s=Xp;const Bp=$s,Jp=(e,t,r)=>Bp(e,t,">",r);var Yp=Jp;const Zp=$s,Qp=(e,t,r)=>Zp(e,t,"<",r);var em=Qp;const To=Je(),tm=(e,t,r)=>(e=new To(e,r),t=new To(t,r),e.intersects(t,r));var rm=tm;const nm=Xr,sm=Be;var om=(e,t,r)=>{const n=[];let s=null,i=null;const a=e.sort((u,v)=>sm(u,v,r));for(const u of a)nm(u,t,r)?(i=u,s||(s=u)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const f=[];for(const[u,v]of n)u===v?f.push(u):!v&&u===a[0]?f.push("*"):v?u===a[0]?f.push(`<=${v}`):f.push(`${u} - ${v}`):f.push(`>=${u}`);const d=f.join(" || "),m=typeof t.raw=="string"?t.raw:String(t);return d.length<m.length?d:t};const Co=Je(),ws=xr(),{ANY:dn}=ws,Yt=Xr,Es=Be,im=(e,t,r={})=>{if(e===t)return!0;e=new Co(e,r),t=new Co(t,r);let n=!1;e:for(const s of e.set){for(const i of t.set){const a=cm(s,i,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},am=[new ws(">=0.0.0-0")],Ao=[new ws(">=0.0.0")],cm=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===dn){if(t.length===1&&t[0].semver===dn)return!0;r.includePrerelease?e=am:e=Ao}if(t.length===1&&t[0].semver===dn){if(r.includePrerelease)return!0;t=Ao}const n=new Set;let s,i;for(const b of e)b.operator===">"||b.operator===">="?s=ko(s,b,r):b.operator==="<"||b.operator==="<="?i=Do(i,b,r):n.add(b.semver);if(n.size>1)return null;let a;if(s&&i){if(a=Es(s.semver,i.semver,r),a>0)return null;if(a===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const b of n){if(s&&!Yt(b,String(s),r)||i&&!Yt(b,String(i),r))return null;for(const P of t)if(!Yt(b,String(P),r))return!1;return!0}let f,d,m,u,v=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,N=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;v&&v.prerelease.length===1&&i.operator==="<"&&v.prerelease[0]===0&&(v=!1);for(const b of t){if(u=u||b.operator===">"||b.operator===">=",m=m||b.operator==="<"||b.operator==="<=",s){if(N&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===N.major&&b.semver.minor===N.minor&&b.semver.patch===N.patch&&(N=!1),b.operator===">"||b.operator===">="){if(f=ko(s,b,r),f===b&&f!==s)return!1}else if(s.operator===">="&&!Yt(s.semver,String(b),r))return!1}if(i){if(v&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===v.major&&b.semver.minor===v.minor&&b.semver.patch===v.patch&&(v=!1),b.operator==="<"||b.operator==="<="){if(d=Do(i,b,r),d===b&&d!==i)return!1}else if(i.operator==="<="&&!Yt(i.semver,String(b),r))return!1}if(!b.operator&&(i||s)&&a!==0)return!1}return!(s&&m&&!i&&a!==0||i&&u&&!s&&a!==0||N||v)},ko=(e,t,r)=>{if(!e)return t;const n=Es(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Do=(e,t,r)=>{if(!e)return t;const n=Es(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var um=im;const fn=lr,Lo=qr,lm=Ce,Mo=zi,dm=qt,fm=vh,hm=Eh,pm=bh,mm=Ph,ym=Ih,gm=Th,vm=kh,$m=Mh,wm=Be,Em=Hh,_m=qh,bm=ms,Sm=Xh,Pm=Yh,Rm=Kr,Om=ys,Im=Vi,Nm=Hi,jm=gs,Tm=vs,Cm=Ui,Am=wp,km=xr(),Dm=Je(),Lm=Xr,Mm=Op,Wm=Tp,zm=Dp,Vm=Wp,Hm=Hp,Um=$s,Fm=Yp,qm=em,Gm=rm,Km=om,xm=um;var Xm={parse:dm,valid:fm,clean:hm,inc:pm,diff:mm,major:ym,minor:gm,patch:vm,prerelease:$m,compare:wm,rcompare:Em,compareLoose:_m,compareBuild:bm,sort:Sm,rsort:Pm,gt:Rm,lt:Om,eq:Im,neq:Nm,gte:jm,lte:Tm,cmp:Cm,coerce:Am,Comparator:km,Range:Dm,satisfies:Lm,toComparators:Mm,maxSatisfying:Wm,minSatisfying:zm,minVersion:Vm,validRange:Hm,outside:Um,gtr:Fm,ltr:qm,intersects:Gm,simplifyRange:Km,subset:xm,SemVer:lm,re:fn.re,src:fn.src,tokens:fn.t,SEMVER_SPEC_VERSION:Lo.SEMVER_SPEC_VERSION,RELEASE_TYPES:Lo.RELEASE_TYPES,compareIdentifiers:Mo.compareIdentifiers,rcompareIdentifiers:Mo.rcompareIdentifiers};const Bm=Mr(Xm);class _s extends ct{constructor(r,n,s){super(r,n);ge(this,"validatePayloadUsingSchema");this.validatePayloadUsingSchema=s}async handle(r){var i,a,f,d,m,u;const{action:n=null,data:s=null}=r.data;this.configuration.mode==="dev"&&n&&console.log(`[SDK] WebphonePostRobotHandler receiver message for ${n}:`,s);try{switch(n){case"getCallObject":const{callId:v=null}=s||{};if(!v)throw new Error("Missing callId");return await this.configuration.adapter.getCallObject(v);case"getUserStatus":return await((a=(i=this.configuration.adapter).getUserStatus)==null?void 0:a.call(i))||null;case"supportMatrix":return await this.configuration.adapter.supportMatrixHandler();case"searchObjects":return await((d=(f=this.configuration.adapter)==null?void 0:f.searchHandler)==null?void 0:d.call(f,s));case"upsertCallRecord":this.validatePayloadUsingSchema(Wo,s);const S=await this.configuration.adapter.upsertCallRecordHandler(s);if(typeof S=="object"&&!S.id)try{return{id:_s.parseSalesforceResponse(S,["recordId"]).recordId}}catch{}return S;case"linkToCurrent":return this.configuration.adapter.linkToCurrentHandler&&await this.configuration.adapter.linkToCurrentHandler(s.id),!0;case"connectorDetails":const $=((u=(m=this.wpWindow)==null?void 0:m.dataset)==null?void 0:u.packageVersion)??null;return{type:this.configuration.type,version:Bm.coerce($)};case"getIconUrl":const{type:R=null}=s||{};if(!R)throw new Error("[SDK][WebphonePostRobotHandler] Missing type");return await this.configuration.adapter.iconHandler(R);default:return null}}catch(v){return this.configuration.mode==="dev"&&n&&console.error(v.message),null}}static parseSalesforceResponse(r,n=[]){if(typeof r=="object"&&r!==null){const{errors:s=null,returnValue:i=null,success:a=!1}=r;if(a&&i&&n.every(f=>Object.keys(i).includes(f)))return i;if(s)throw s}throw new Error("Invalid Salesforce response format")}}class Jm{constructor(t){ge(this,"wpWindow");ge(this,"destinationHost","*");this.wpWindow=t}sendMessage(t,r){this.wpWindow.postMessage({action:t,...r&&{data:r}},this.destinationHost)}async sendAsyncMessage(t,r){const{data:n}=await pt.send(this.wpWindow,t,{action:t,...r&&{data:r}});return n}showObject(t){this.sendMessage("showObject",{id:t})}navigateToObject(t){this.sendMessage("navigateToObject",{id:t})}createEntity(t){this.sendMessage("create",{...t})}async getConnectorDetails(){return await this.sendAsyncMessage("connectorDetails")}async linkToCurrent(t){return await this.sendAsyncMessage("linkToCurrent",{id:t})}async getCallObject(t){return await this.sendAsyncMessage("getCallObject",{callId:t})}async getUserStatus(){return await this.sendAsyncMessage("getUserStatus")}async getIconUrl(t){return await this.sendAsyncMessage("getIconUrl",{type:t})}async getSupportMatrix(){return await this.sendAsyncMessage("supportMatrix")}async searchObjects({phoneNumber:t,vid:r}){return await this.sendAsyncMessage("searchObjects",{phoneNumber:t,vid:r})}async upsertTask(t){return await this.sendAsyncMessage("upsertCallRecord",{...t})}}var ir;class Ym{constructor(t,r){ge(this,"authorizeHandler");ge(this,"placeCallHandler");ge(this,"assignCallHandler");ge(this,"setTicketHandler");ge(this,"changeUserStatusHandler");ge(this,"setCssApplierHandler");ge(this,"logoutHandler");ge(this,"webphonePostRobotHandler");ge(this,"webphoneEventHandler");ge(this,"ajv");ge(this,"configuration");ge(this,"phoneWindow");ge(this,"wpWindow");hr(this,ir,!1);this.ajv=new Kf({schemas:{"callAssigments.schema.json":zs,"callTicket.schema.json":Vs,"connectorConfig.schema.json":Us,"createcallRecord.schema.json":Wo,"createEntity.schema.json":ka,"changeUserStatusSchema.schema.json":Hs,"objectDetails.schema.json":za,"placeCall.schema.json":Fs,"searchObjectList.schema.json":Xa,"webphoneAdapter.schema.json":Qa},keywords:[ua()]}),this.phoneWindow=r,this.configuration=this.validConfiguration(t),this.wpWindow=this.validAndPrepareWpWindow(document.querySelector(this.configuration.container))}boot(){this.initHandlers(),this.initListeners()}isLoaded(){return fr(this,ir)}validConfiguration(t){return this.validatePayloadUsingSchema(Us,t),"mode"in t||(t={...t,mode:"prod"}),t}validAndPrepareWpWindow(t){if(t instanceof HTMLIFrameElement){const{WEBPHONE_EMBEDDED_URL:r="https://webphone-connector.fcc-online.pl/",DEV_WEBPHONE_EMBEDDED_URL:n="https://dev-webphone.fcc-offline.v/"}=typeof process<"u"?process.env:{},s=this.configuration.mode==="dev"?localStorage.getItem("wpUrl")||n:r;return t.src.includes(s)||(t.src=s),t}throw new Error("[SDK] Validation error - wpWindow must be IFrame")}validatePayloadUsingSchema(t,r){var s,i;const n=this.ajv.compile(t);if(!n(r))throw new Error(`[SDK] Validation error ${((i=(s=n.errors)==null?void 0:s.at(0))==null?void 0:i.message)||""}`.trim())}initHandlers(){this.authorizeHandler=new Jf(this.configuration,this.wpWindow),this.placeCallHandler=new eh(this.configuration,this.wpWindow),this.assignCallHandler=new Bf(this.configuration,this.wpWindow),this.setTicketHandler=new th(this.configuration,this.wpWindow),this.changeUserStatusHandler=new Yf(this.configuration,this.wpWindow),this.setCssApplierHandler=new Zf(this.configuration,this.wpWindow),this.logoutHandler=new Qf(this.configuration,this.wpWindow),this.webphonePostRobotHandler=new _s(this.configuration,this.wpWindow,this.validatePayloadUsingSchema),this.webphoneEventHandler=new rh(this.configuration,this.wpWindow,t=>pr(this,ir,t),this.authorizeWp.bind(this),this.logoutWp.bind(this),this.setCss.bind(this))}initListeners(){if(!this.webphoneEventHandler)throw new Error("[SDK] Handler not initialized");if(this.phoneWindow.addEventListener("message",this.webphoneEventHandler.handle.bind(this.webphoneEventHandler)),!this.webphonePostRobotHandler)throw new Error("[SDK] Handler not initialized");try{pt.on("getCallObject",this.webphonePostRobotHandler.handle.bind(this)),pt.on("supportMatrix",this.webphonePostRobotHandler.handle.bind(this)),pt.on("searchObjects",this.webphonePostRobotHandler.handle.bind(this)),pt.on("upsertCallRecord",this.webphonePostRobotHandler.handle.bind(this)),pt.on("connectorDetails",this.webphonePostRobotHandler.handle.bind(this)),pt.on("linkToCurrent",this.webphonePostRobotHandler.handle.bind(this)),pt.on("getIconUrl",this.webphonePostRobotHandler.handle.bind(this))}catch{}}async placeCall(t){if(!this.placeCallHandler)throw new Error("[SDK] Handler not initialized");return this.validatePayloadUsingSchema(Fs,t),this.placeCallHandler.handle(t)}async changeContactAssigments(t){if(!this.assignCallHandler)throw new Error("[SDK] Handler not initialized");return this.validatePayloadUsingSchema(zs,t),this.assignCallHandler.handle(t)}async changeUserStatus(t){if(!this.changeUserStatusHandler)throw new Error("[SDK] Handler not initialized");return this.validatePayloadUsingSchema(Hs,t),this.changeUserStatusHandler.handle(t)}async setTicket(t){if(!this.setTicketHandler)throw new Error("[SDK] Handler not initialized");return this.validatePayloadUsingSchema(Vs,t),this.setTicketHandler.handle(t)}async setCss(t){if(!this.setCssApplierHandler)throw new Error("[SDK] Handler not initialized");return this.setCssApplierHandler.handle(t)}async authorizeWp(){if(!this.authorizeHandler)throw new Error("[SDK] Handler not initialized");return this.authorizeHandler.handle()}async logoutWp(){if(!this.logoutHandler)throw new Error("[SDK] Handler not initialized");return this.logoutHandler.handle()}}ir=new WeakMap;exports.ConnectorBridge=Jm;exports.default=Ym;
